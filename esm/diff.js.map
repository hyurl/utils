{"version":3,"file":"diff.js","sources":["../diff.ts"],"sourcesContent":["import { isDictLike } from \"is-like\";\nimport isEmpty from './isEmpty';\nimport isVoid from './isVoid';\nexport default function diff(origin, input, deep = false) {\n    if (Array.isArray(origin) && Array.isArray(input)) {\n        return [\n            ...input.filter(value => !origin.includes(value)),\n            ...origin.filter(value => !input.includes(value))\n        ];\n    }\n    else if (isDictLike(origin) && isDictLike(input)) {\n        let keys = Reflect.ownKeys(input);\n        let _keys = Reflect.ownKeys(origin);\n        let result = {};\n        keys.forEach(key => {\n            if (origin[key] !== input[key] &&\n                !(isVoid(origin[key]) && isVoid(input[key])) // ignore void values\n            ) {\n                if (deep &&\n                    typeof origin[key] === \"object\" && origin[key] !== null &&\n                    typeof input[key] === \"object\" && input[key] !== null) {\n                    let _result = diff(origin[key], input[key], deep);\n                    if (!isEmpty(_result)) {\n                        result[key] = _result;\n                    }\n                }\n                else {\n                    result[key] = input[key];\n                }\n            }\n        });\n        _keys.forEach(key => {\n            keys.includes(key) || (result[key] = origin[key]);\n        });\n        return result;\n    }\n    else {\n        return input;\n    }\n}\n//# sourceMappingURL=diff.js.map"],"names":["isDictLike"],"mappings":";;;;AAGe,SAAS,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,GAAG,KAAK,EAAE;AAC1D,IAAI,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;AACvD,QAAQ,OAAO;AACf,YAAY,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AAC7D,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AAC7D,SAAS,CAAC;AACV,KAAK;AACL,SAAS,IAAIA,YAAU,CAAC,MAAM,CAAC,IAAIA,YAAU,CAAC,KAAK,CAAC,EAAE;AACtD,QAAQ,IAAI,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AAC1C,QAAQ,IAAI,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;AAC5C,QAAQ,IAAI,MAAM,GAAG,EAAE,CAAC;AACxB,QAAQ,IAAI,CAAC,OAAO,CAAC,GAAG,IAAI;AAC5B,YAAY,IAAI,MAAM,CAAC,GAAG,CAAC,KAAK,KAAK,CAAC,GAAG,CAAC;AAC1C,gBAAgB,EAAE,MAAM,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;AAC5D,cAAc;AACd,gBAAgB,IAAI,IAAI;AACxB,oBAAoB,OAAO,MAAM,CAAC,GAAG,CAAC,KAAK,QAAQ,IAAI,MAAM,CAAC,GAAG,CAAC,KAAK,IAAI;AAC3E,oBAAoB,OAAO,KAAK,CAAC,GAAG,CAAC,KAAK,QAAQ,IAAI,KAAK,CAAC,GAAG,CAAC,KAAK,IAAI,EAAE;AAC3E,oBAAoB,IAAI,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;AACtE,oBAAoB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;AAC3C,wBAAwB,MAAM,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC;AAC9C,qBAAqB;AACrB,iBAAiB;AACjB,qBAAqB;AACrB,oBAAoB,MAAM,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC;AAC7C,iBAAiB;AACjB,aAAa;AACb,SAAS,CAAC,CAAC;AACX,QAAQ,KAAK,CAAC,OAAO,CAAC,GAAG,IAAI;AAC7B,YAAY,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;AAC9D,SAAS,CAAC,CAAC;AACX,QAAQ,OAAO,MAAM,CAAC;AACtB,KAAK;AACL,SAAS;AACT,QAAQ,OAAO,KAAK,CAAC;AACrB,KAAK;AACL;;;;"}