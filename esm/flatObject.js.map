{"version":3,"file":"flatObject.js","sources":["../flatObject.ts"],"sourcesContent":["import isVoid from './isVoid';\nimport { isDictLike, isArrayLike, isBufferLike } from 'is-like';\nexport default function flatObject(obj, depth = 1, flatArray = false) {\n    return flatDeep({}, obj, \"\", 0, depth, flatArray);\n}\nfunction flatDeep(carrier, source, field, depth, maxDepth, flatArray) {\n    let isArr;\n    let isDict;\n    let isContent = !isVoid(field) && field !== \"\";\n    if (depth === maxDepth || (!(isArr = isArrayLike(source, true) && !isBufferLike(source)) &&\n        !(isDict = isDictLike(source)))) {\n        carrier[field] = source;\n    }\n    else if (isDict) {\n        Reflect.ownKeys(source).forEach(key => {\n            let value = source[key];\n            if (typeof key === \"symbol\") {\n                if (depth === 0) { // only allow top-level symbol properties\n                    carrier[key] = value;\n                }\n            }\n            else {\n                flatDeep(carrier, value, isContent ? `${field}.${key}` : key, isContent ? depth + 1 : depth, maxDepth, flatArray);\n            }\n        });\n    }\n    else if (isArr) {\n        if (flatArray) {\n            for (let i = 0, len = source.length; i < len; ++i) {\n                flatDeep(carrier, source[i], isContent ? `${field}.${i}` : String(i), isContent ? depth + 1 : depth, maxDepth, flatArray);\n            }\n        }\n        else {\n            carrier[field] = source;\n        }\n    }\n    return carrier;\n}\n//# sourceMappingURL=flatObject.js.map"],"names":["isArrayLike","isBufferLike","isDictLike"],"mappings":";;;AAEe,SAAS,UAAU,CAAC,GAAG,EAAE,KAAK,GAAG,CAAC,EAAE,SAAS,GAAG,KAAK,EAAE;AACtE,IAAI,OAAO,QAAQ,CAAC,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC,EAAE,KAAK,EAAE,SAAS,CAAC,CAAC;AACtD,CAAC;AACD,SAAS,QAAQ,CAAC,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAE;AACtE,IAAI,IAAI,KAAK,CAAC;AACd,IAAI,IAAI,MAAM,CAAC;AACf,IAAI,IAAI,SAAS,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,KAAK,KAAK,EAAE,CAAC;AACnD,IAAI,IAAI,KAAK,KAAK,QAAQ,KAAK,EAAE,KAAK,GAAGA,aAAW,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAACC,cAAY,CAAC,MAAM,CAAC,CAAC;AAC5F,QAAQ,EAAE,MAAM,GAAGC,YAAU,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE;AACzC,QAAQ,OAAO,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC;AAChC,KAAK;AACL,SAAS,IAAI,MAAM,EAAE;AACrB,QAAQ,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,GAAG,IAAI;AAC/C,YAAY,IAAI,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;AACpC,YAAY,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;AACzC,gBAAgB,IAAI,KAAK,KAAK,CAAC,EAAE;AACjC,oBAAoB,OAAO,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;AACzC,iBAAiB;AACjB,aAAa;AACb,iBAAiB;AACjB,gBAAgB,QAAQ,CAAC,OAAO,EAAE,KAAK,EAAE,SAAS,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,GAAG,GAAG,EAAE,SAAS,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;AAClI,aAAa;AACb,SAAS,CAAC,CAAC;AACX,KAAK;AACL,SAAS,IAAI,KAAK,EAAE;AACpB,QAAQ,IAAI,SAAS,EAAE;AACvB,YAAY,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,EAAE,CAAC,EAAE;AAC/D,gBAAgB,QAAQ,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,SAAS,GAAG,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EAAE,SAAS,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;AAC1I,aAAa;AACb,SAAS;AACT,aAAa;AACb,YAAY,OAAO,CAAC,KAAK,CAAC,GAAG,MAAM,CAAC;AACpC,SAAS;AACT,KAAK;AACL,IAAI,OAAO,OAAO,CAAC;AACnB;;;;"}