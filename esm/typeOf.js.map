{"version":3,"file":"typeOf.js","sources":["../typeOf.ts"],"sourcesContent":["import { isValid } from \"https://lib.deno.dev/x/ayonli_jsext@latest/object/index.ts\";\n/**\n * Returns a string representation or the constructor of the value's type.\n * NOTE: this function also returns `'void'` when testing `NaN`.\n */\nexport default function typeOf(target) {\n    if (arguments.length === 0)\n        throw new TypeError(\"1 argument is required, 0 given\");\n    else if (!isValid(target) && !(target instanceof Date))\n        return \"void\";\n    let type = typeof target;\n    if (type === \"function\") {\n        if (isClass(target)) {\n            return \"class\";\n        }\n        else {\n            return \"function\";\n        }\n    }\n    else if (type === \"object\") {\n        if (Object.prototype.toString.call(target) === \"[object Arguments]\") {\n            return \"arguments\";\n        }\n        else {\n            return target.constructor || Object;\n        }\n    }\n    else {\n        return type;\n    }\n}\nfunction isClass(obj) {\n    if (typeof obj != \"function\")\n        return false;\n    // async function or arrow function\n    if (obj.prototype === undefined)\n        return false;\n    // generator function and malformed inheritance\n    if (obj.prototype.constructor !== obj)\n        return false;\n    // has own prototype properties\n    if (Object.getOwnPropertyNames(obj.prototype).length >= 2)\n        return true;\n    var str = String(obj);\n    // ES6 class\n    if (str.slice(0, 5) == \"class\")\n        return true;\n    // anonymous function\n    if (/^function\\s*\\(|^function anonymous\\(/.test(str))\n        return false;\n    var hasThis = /(call|apply|_classCallCheck)\\(this(, arguments)?\\)|\\bthis(.\\S+|\\[.+?\\])\\s*(=|\\()|=\\s*this[,;]/.test(str);\n    // Upper-cased first char of the name and has `this` in the body, or it's\n    // a native class in ES5 style.\n    if (/^function\\s+[A-Z]/.test(str) && (hasThis ||\n        (/\\[native code\\]/.test(str) &&\n            obj.name !== \"BigInt\" && // ES6 BigInt and Symbol is not class\n            obj.name !== \"Symbol\"))) {\n        return true;\n    }\n    // TypeScript anonymous class to ES5 with default export\n    if (hasThis && obj.name === \"default_1\")\n        return true;\n    return false;\n}\n//# sourceMappingURL=typeOf.js.map"],"names":[],"mappings":";;AACA;AACA;AACA;AACA;AACe,SAAS,MAAM,CAAC,MAAM,EAAE;AACvC,IAAI,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC;AAC9B,QAAQ,MAAM,IAAI,SAAS,CAAC,iCAAiC,CAAC,CAAC;AAC/D,SAAS,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,YAAY,IAAI,CAAC;AAC1D,QAAQ,OAAO,MAAM,CAAC;AACtB,IAAI,IAAI,IAAI,GAAG,OAAO,MAAM,CAAC;AAC7B,IAAI,IAAI,IAAI,KAAK,UAAU,EAAE;AAC7B,QAAQ,IAAI,OAAO,CAAC,MAAM,CAAC,EAAE;AAC7B,YAAY,OAAO,OAAO,CAAC;AAC3B,SAAS;AACT,aAAa;AACb,YAAY,OAAO,UAAU,CAAC;AAC9B,SAAS;AACT,KAAK;AACL,SAAS,IAAI,IAAI,KAAK,QAAQ,EAAE;AAChC,QAAQ,IAAI,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,oBAAoB,EAAE;AAC7E,YAAY,OAAO,WAAW,CAAC;AAC/B,SAAS;AACT,aAAa;AACb,YAAY,OAAO,MAAM,CAAC,WAAW,IAAI,MAAM,CAAC;AAChD,SAAS;AACT,KAAK;AACL,SAAS;AACT,QAAQ,OAAO,IAAI,CAAC;AACpB,KAAK;AACL,CAAC;AACD,SAAS,OAAO,CAAC,GAAG,EAAE;AACtB,IAAI,IAAI,OAAO,GAAG,IAAI,UAAU;AAChC,QAAQ,OAAO,KAAK,CAAC;AACrB;AACA,IAAI,IAAI,GAAG,CAAC,SAAS,KAAK,SAAS;AACnC,QAAQ,OAAO,KAAK,CAAC;AACrB;AACA,IAAI,IAAI,GAAG,CAAC,SAAS,CAAC,WAAW,KAAK,GAAG;AACzC,QAAQ,OAAO,KAAK,CAAC;AACrB;AACA,IAAI,IAAI,MAAM,CAAC,mBAAmB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,MAAM,IAAI,CAAC;AAC7D,QAAQ,OAAO,IAAI,CAAC;AACpB,IAAI,IAAI,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;AAC1B;AACA,IAAI,IAAI,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,OAAO;AAClC,QAAQ,OAAO,IAAI,CAAC;AACpB;AACA,IAAI,IAAI,sCAAsC,CAAC,IAAI,CAAC,GAAG,CAAC;AACxD,QAAQ,OAAO,KAAK,CAAC;AACrB,IAAI,IAAI,OAAO,GAAG,+FAA+F,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAC5H;AACA;AACA,IAAI,IAAI,mBAAmB,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,OAAO;AACjD,SAAS,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC;AACpC,YAAY,GAAG,CAAC,IAAI,KAAK,QAAQ;AACjC,YAAY,GAAG,CAAC,IAAI,KAAK,QAAQ,CAAC,CAAC,EAAE;AACrC,QAAQ,OAAO,IAAI,CAAC;AACpB,KAAK;AACL;AACA,IAAI,IAAI,OAAO,IAAI,GAAG,CAAC,IAAI,KAAK,WAAW;AAC3C,QAAQ,OAAO,IAAI,CAAC;AACpB,IAAI,OAAO,KAAK,CAAC;AACjB;;;;"}