{"version":3,"file":"split.js","sources":["../split.ts"],"sourcesContent":["import { isArrayLike, isBufferLike, isCollectionLike } from \"is-like\";\nfunction checkNumberArgument(name, value) {\n    if (typeof value !== \"number\") {\n        throw new TypeError(`argument '${name}' must be a number`);\n    }\n    else if (value < 1) {\n        throw new RangeError(`argument '${name}' must be 1 or higher`);\n    }\n}\nfunction splitArrayLike(arr, length, total = void 0) {\n    let result = [];\n    for (let i = 0, j = (total || arr.length); i < j; i += length) {\n        if (typeof arr.slice === \"function\") {\n            result.push(arr.slice(i, i + length));\n        }\n        else {\n            result.push(Array.prototype.slice.call(arr, i, i + length));\n        }\n    }\n    return result;\n}\nfunction splitBuffer(buf, sep) {\n    let result = [];\n    let offset = 0;\n    let length = sep.length;\n    let total = buf.byteLength;\n    while (offset < total) {\n        let index = buf.indexOf(sep, offset);\n        if (index !== -1) {\n            result.push(buf.slice(offset, index));\n            offset = index + length;\n        }\n        else {\n            result.push(buf.slice(offset));\n            offset = total;\n        }\n    }\n    return result;\n}\nfunction splitObject(obj, size) {\n    let proto = Object.getPrototypeOf(obj);\n    let keyChunks = splitArrayLike(Object.keys(obj), size);\n    let result = [];\n    for (let keys of keyChunks) {\n        let chunk = Object.create(proto);\n        result.push(chunk);\n        for (let key of keys) {\n            chunk[key] = obj[key];\n        }\n    }\n    return result;\n}\nfunction splitNumber(num, step) {\n    let result = [];\n    let offset = 0;\n    while ((offset += step) <= num) {\n        result.push(offset);\n    }\n    if (num > offset - step) {\n        result.push(num);\n    }\n    return result;\n}\nexport default function split(obj, sep) {\n    if (arguments.length < 2) {\n        throw new SyntaxError(`2 arguments required, received ${arguments.length}`);\n    }\n    else if (typeof obj === \"string\") {\n        if (typeof sep === \"string\" || sep instanceof RegExp) {\n            return obj.split(sep);\n        }\n        else {\n            checkNumberArgument(\"length\", sep);\n            return splitArrayLike(obj, sep);\n        }\n    }\n    else if (typeof obj === \"number\") {\n        checkNumberArgument(\"step\", sep);\n        return splitNumber(obj, sep);\n    }\n    else if (typeof Buffer === \"function\"\n        && Buffer.isBuffer(obj)\n        && (typeof sep === \"string\" || Buffer.isBuffer(sep))) {\n        return splitBuffer(obj, sep);\n    }\n    else if (isBufferLike(obj)) {\n        checkNumberArgument(\"byteLength\", sep);\n        return splitArrayLike(obj, sep, obj.byteLength);\n    }\n    else if (isArrayLike(obj, true)) {\n        checkNumberArgument(\"length\", sep);\n        return splitArrayLike(obj, sep);\n    }\n    else if (isCollectionLike(obj)) {\n        let ctor = obj[\"constructor\"];\n        checkNumberArgument(\"size\", sep);\n        return splitArrayLike([...obj], sep).map(list => new ctor(list));\n    }\n    else if (typeof obj === \"object\" && obj !== null) {\n        checkNumberArgument(\"size\", sep);\n        return splitObject(obj, sep);\n    }\n    else {\n        throw new TypeError(\"argument 'obj' must be a string, a number or an object\");\n    }\n}\n//# sourceMappingURL=split.js.map"],"names":[],"mappings":"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"}