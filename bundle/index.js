!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["@hyurl/utils"]={})}(this,(function(e){"use strict";"undefined"!=typeof document&&document.currentScript;var t={};Object.defineProperty(t,"__esModule",{value:!0});var r=t.isArrayLike=l,n=t.isBufferLike=void 0,o=t.isCollectionLike=a,i=t.isDictLike=function(e){return!("object"!==s(e)||null===e||e.constructor!==Object&&(e instanceof Date||e instanceof RegExp||l(e,!0)||g(e)||function(e){try{var t=JSON.stringify(e);return"{}"===t||"[]"===t}catch(e){return!1}}(e)||y(e)||a(e)||h(e)))};function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,u,f=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(f.push(n.value),f.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(c)throw o}}return f}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e){for(var t="object"===s(e)&&null!==e,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return t&&n.every((function(t){var r=u(t,2),n=r[0],o=r[1];return n in e&&s(e[n])===o}))}function l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Array.isArray(e))return!0;if(!t)return c(e,["length","number"])||"string"==typeof e;if(c(e,["length","number"])){var r,n=Object.keys(e),o=!n.includes("length");if(0===e.length||0===(r=n.map(Number).filter(isFinite)).length)return o;for(var i="function"==typeof e[Symbol.iterator],u=e.length;u--;)if(!r.includes(u)&&!o&&!i)return!1;return!0}return!1}function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return c(e,["size","number"],[Symbol.iterator,"function"])||!t&&(e instanceof WeakMap||e instanceof WeakSet)}function y(e){return c(e,["byteLength","number"],["slice","function"])}t.isErrorLike=function(e){return c(e,["name","string"],["message","string"],["stack","string"])},t.isObjectIdLike=g,t.isPromiseLike=h,t.isTypedArrayLike=y;var p=y;function h(e){return c(e,["then","function"])}function g(e){return"object"===s(e)&&null!==e&&("ObjectId"===e.constructor.name||"ObjectID"===e.constructor.name)}n=t.isBufferLike=p;const b=new TextEncoder;function m(e){return null==e||Object.is(e,NaN)}var d=function(e){if("function"!=typeof e)return!1;if(void 0===e.prototype)return!1;if(e.prototype.constructor!==e)return!1;if(Object.getOwnPropertyNames(e.prototype).length>=2)return!0;var t=String(e);if("class"==t.slice(0,5))return!0;if(/^function\s*\(|^function anonymous\(/.test(t))return!1;var r=/(call|apply|_classCallCheck)\(this(, arguments)?\)|\bthis(.\S+|\[.+?\])\s*(=|\()|=\s*this[,;]/.test(t);return!(!/^function\s+[A-Z]/.test(t)||!(r||/\[native code\]/.test(t)&&"BigInt"!==e.name&&"Symbol"!==e.name))||!(!r||"default_1"!==e.name)};function v(e){if(0===arguments.length)throw new TypeError("1 argument is required, 0 given");if(m(e))return"void";let t=typeof e;return"function"===t?d(e)?"class":"function":"object"===t?"[object Arguments]"===Object.prototype.toString.call(e)?"arguments":e.constructor||Object:t}const w=["",NaN,null,void 0],j=[...w,0,!1];function O(e,t=!1){return S(e,Boolean(t),j)}function S(e,t,i){if(i.includes(e))return!0;if("object"==typeof e){if(e instanceof RegExp)return!1;if(e instanceof Date)return"Invalid Date"===String(e);if(e instanceof Error)return 0===e.message.length;if(n(e))return 0===e.byteLength;if(r(e,!0)){if(0===e.length)return!0;if(t){for(let r=0,n=e.length;r<n;++r)if(!S(e[r],t,w))return!1;return!0}return!1}if(o(e,!0)){if(0===e.size)return!0;if(t){if(e instanceof Map){for(let r of e.values())if(!S(r,t,w))return!1;return!0}if(e instanceof Set){for(let r of e)if(!S(r,t,w))return!1;return!0}return!1}return!1}{let r=Reflect.ownKeys(e);return 0===r.length||!!t&&r.every((r=>S(e[r],t,w)))}}return!1}function E(e){const t=typeof e;if("number"===t||"bigint"===t)return!0;if("string"===t){if(!Number.isNaN(e))return!0;try{return BigInt(e),!0}catch(e){return!1}}return!1}function A(e,[t,r]){return e>=t&&e<=r}"function"==typeof BigInt&&j.push(BigInt("0"));const N=/^\s*(true|yes|on)\s*$/i,T=/^\s*(false|no|off)\s*$/i,I=/^\s*(null|nil|none|void|undefined)\s*$/i,k=/^\s*NaN\s*$/,P=/^\s*-?Infinity\s*/,D=/^\s*\/(.+)\/([gimuys]*)\s*$/,R=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER];function B(e){return Array.isArray(e)?e:Array.from(e)}function M(e,t,o,u,f,s){let c,l,a=!m(o)&&""!==o;if(u===f||!(c=r(t,!0)&&!n(t))&&!(l=i(t)))e[o]=t;else if(l)Reflect.ownKeys(t).forEach((r=>{let n=t[r];"symbol"==typeof r?0===u&&(e[r]=n):M(e,n,a?`${o}.${r}`:r,a?u+1:u,f,s)}));else if(c)if(s)for(let r=0,n=t.length;r<n;++r)M(e,t[r],a?`${o}.${r}`:String(r),a?u+1:u,f,s);else e[o]=t;return e}const x=A,L=function(e){return!("number"!=typeof e||Number.isNaN(e)||Number.isFinite(e)&&e%1==0)};const F=E;function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function K(e,t){return t.reduce(((t,r)=>(r in e&&void 0!==e[r]&&(t[r]=e[r]),t)),{})}function _(e){return!(null==e||Object.is(e,NaN)||e instanceof Date&&"Invalid Date"===e.toString())}const q=$,C=function(e,t){var r;const n=Object.getPrototypeOf(e);return!(!n||!$(n,t))&&"function"==typeof(null===(r=Object.getOwnPropertyDescriptor(n,t))||void 0===r?void 0:r.value)};Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator"));new Map;Symbol.asyncIterator;var z;"object"==typeof process&&(null===(z=process.versions)||void 0===z||z.node),function*(e,t,r=1,n=!1){let o=e;for(;;)if(yield o,o>=t){if(!n)break;o=e}else o+=r}(1,Number.MAX_SAFE_INTEGER,1,!0);const G=function(e,t){const r=function(...r){return t.call(this,e,...r)};return Object.defineProperty(r,"name",Object.getOwnPropertyDescriptor(e,"name")),Object.defineProperty(r,"length",Object.getOwnPropertyDescriptor(e,"length")),Object.defineProperty(r,"toString",{configurable:!0,enumerable:!1,writable:!0,value:e.toString.bind(e)}),r},V=function(e,t){return"function"==typeof e&&"function"==typeof t&&e.prototype instanceof t};function W(e,t,o,i,u){if("string"==typeof e)return i&&""===e.trim()?u>0?void 0:"":e;if(null===e||"object"!=typeof e||e instanceof Date||e instanceof Error||e instanceof RegExp||n(e))return e;if(o&&O(e))return u>0?void 0:r(e,!0)?[]:{};if(r(e,!0)){let r=[];for(let n=0,f=e.length;n<f;++n){let f=e[n];_(f)&&(t?(f=W(f,t,o,i,u+1),!_(f)||r.push(f)):r.push(f))}return u>0&&o&&O(r)?void 0:r}{let r=Reflect.ownKeys(e).reduce(((r,n)=>{let f=e[n];return _(f)&&(t?(f=W(f,t,o,i,u+1),!_(f)||(r[n]=f)):r[n]=f),r}),{});return u>0&&o&&O(r)?void 0:r}}const X=function(e,t=!1,r=!1,n=!1){return W(e,t,r,n,0)};function Y(e,t,r,n,o){if(i(e)&&i(t)){let o=Reflect.ownKeys(t),u={};return o.forEach((o=>{if(e[o]!==t[o]&&_(t[o])&&(!n||""!==t[o]))if(r&&i(e[o])&&i(t[o])){let i=Y(e[o],t[o],r,n,!0);O(i)||(u[o]=i,Object.assign(e[o],t[o]))}else u[o]=e[o]=t[o]})),u}return o?t:{}}const H=function(e,t){return e+Math.floor(Math.random()*(t-e+1))};const J=async function(e){return new Promise((t=>setTimeout(t,e)))};function U(e,t="number"){return e.every((e=>typeof e===t))}function Z(e,t){if("number"!=typeof t)throw new TypeError(`argument '${e}' must be a number`);if(t<1)throw new RangeError(`argument '${e}' must be 1 or higher`)}function Q(e,t,r=void 0){let n=[];for(let o=0,i=r||e.length;o<i;o+=t)"function"==typeof e.slice?n.push(e.slice(o,o+t)):n.push(Array.prototype.slice.call(e,o,o+t));return n}const ee=function(e,t){if("function"!=typeof t)throw new TypeError("type must be a valid constructor");let r;const n={string:String,number:Number,bigint:BigInt,boolean:Boolean,symbol:Symbol};return e instanceof t?[String,Number,Boolean].includes(t)?e.valueOf():e:(r=typeof e)&&n[r]===t?e:null},te=async function(e){void 0===globalThis.setImmediate&&(globalThis.setImmediate=e=>setTimeout(e,0));do{await new Promise(globalThis.setImmediate)}while(0==await e())};if(void 0===re)var re=e=>setTimeout(e,0);var ne=oe;function oe(e,t,r=!1){if(t<1)throw new RangeError("The 'interval' time for throttle must not be smaller than 1");if(!oe.gcTimer){let{gcInterval:e,tasks:t}=oe;oe.gcTimer=setInterval((()=>{let r=Date.now();t.forEach((({interval:n,lastActive:o},i)=>{r-o>Math.max(n+5,e)&&t.delete(i)}))}),e),"function"==typeof oe.gcTimer.unref&&oe.gcTimer.unref()}let n=oe.tasks.get(e);return n||oe.tasks.set(e,n=function(e,t=!1){let r={interval:e,lastActive:0,cache:void 0,queue:new Set,func:void 0,daemon:null};async function n(r,...n){t&&!this.daemon&&(this.daemon=setInterval((()=>{var e;return null===(e=this.func)||void 0===e?void 0:e.call(this,r,...n)}),e),"function"==typeof this.daemon.unref&&this.daemon.unref());let o=Date.now();if(o-this.lastActive>=e){if(this.lastActive=o,t&&this.cache){if(Promise.resolve(r(...n)).then((e=>{this.cache={value:e,error:null}})).catch((e=>{this.cache={value:void 0,error:e}})),this.cache.error)throw this.cache.error;return this.cache.value}{let e,t;this.cache=void 0;try{e=await r(...n),this.cache={value:e,error:null}}catch(e){this.cache={value:void 0,error:t=e}}if(re((()=>{O(this.queue)||this.queue.forEach((r=>{t?r.reject(t):r.resolve(e),this.queue.delete(r)}))})),t)throw t;return e}}if(this.cache){if(this.cache.error)throw this.cache.error;return this.cache.value}return new Promise(((e,t)=>{this.queue.add({resolve:e,reject:t})}))}return r.func=n.bind(r),r}(t,r)),n.func}!function(e){e.gcInterval=3e4,e.gcTimer=void 0,e.tasks=new Map}(oe||(oe={}));const ie=G;e.count=function(e,t=void 0){if("string"==typeof e)return"string"==typeof t?t?e?e.split(t).length-1:0:e.length+1:!0===t?"function"==typeof Buffer&&"function"==typeof Buffer.byteLength?Buffer.byteLength(e):b.encode(e).byteLength:e.length;if(r(e,!0)){if(2===arguments.length){let r=0;for(let n=e.length;n--;)(e[n]===t||Object.is(e[n],t))&&r++;return r}return e.length}return n(e)?e.byteLength:o(e,!0)?e.size:Object.keys(e).length},e.define=function(e,t,r,n=!1,o=!1){v(r)!==Object||!function(e){return"get"===String(Object.keys(e))&&"function"==typeof e.get}(r)&&!function(e){let t=String(Object.keys(e));return("get,set"===t||"set,get"===t)&&"function"==typeof e.get&&"function"==typeof e.set}(r)?Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:o,value:r}):Object.defineProperty(e,t,{configurable:!0,enumerable:n,...r})},e.diff=function e(t,r,n=!1){if(Array.isArray(t)&&Array.isArray(r))return[...r.filter((e=>!t.includes(e))),...t.filter((e=>!r.includes(e)))];if(i(t)&&i(r)){let o=Reflect.ownKeys(r),i=Reflect.ownKeys(t),u={};return o.forEach((o=>{if(!(t[o]===r[o]||m(t[o])&&m(r[o])))if(n&&"object"==typeof t[o]&&null!==t[o]&&"object"==typeof r[o]&&null!==r[o]){let i=e(t[o],r[o],n);O(i)||(u[o]=i)}else u[o]=r[o]})),i.forEach((e=>{o.includes(e)||(u[e]=t[e])})),u}return r},e.ensureType=function e(t){switch(typeof t){case"string":{let e;if(N.test(t))return!0;if(T.test(t))return!1;if(I.test(t))return null;if(k.test(t))return NaN;if(P.test(t))return Number(t);if(e=t.match(D))return new RegExp(e[1],e[2]);{let e=Number(t);return!isNaN(e)&&A(e,R)&&"+"!==t[0]?e:t}}case"object":return null===t?null:r(t,!0)?B(t).map(e):i(t)?Reflect.ownKeys(t).reduce(((r,n)=>(r[n]=e(t[n]),r)),{}):t;default:return t}},e.flatObject=function(e,t=1,r=!1){return M({},e,"",0,t,r)},e.getGlobal=function(e=void 0){let t;return"object"==typeof globalThis?t=globalThis:"object"==typeof self?t=self:"object"==typeof global?t=global:"object"==typeof window&&(t=window),t&&(e?t[e]:t)},e.isBetween=x,e.isEmpty=O,e.isFloat=L,e.isInteger=function(e){return"bigint"==typeof e||Number.isInteger(e)},e.isNumeric=F,e.isOwnKey=q,e.isOwnMethod=C,e.isSubClassOf=V,e.isVoid=m,e.keysOf=function(e){return Array.isArray(e)?e.map(((e,t)=>t)):Reflect.ownKeys(e)},e.omit=function(e,t){return Array.isArray(e)?e.filter((e=>!t.includes(e))):function(e,t){const r=Reflect.ownKeys(e).filter((e=>!t.includes(e))),n=K(e,r);return e instanceof Error&&["name","message","cause"].forEach((r=>{t.includes(r)||void 0===e[r]||$(n,r)||(n[r]=e[r])})),n}(e,t)},e.omitVoid=X,e.patch=function(e,t,r=!1,n=!1){return Y(e,t,r,n,!1)},e.pick=function(e,t){return Array.isArray(e)?t.map((t=>e[t])):K(e,t)},e.rand=H,e.randStr=function(e,t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"){let r="",n=t.length-1;for(;0<e--;)r+=t[H(0,n)];return r},e.sleep=J,e.sort=function e(t,n=void 0){if(r(t,!0)){let e=B(t),r=n;return r||!U(e)&&!U(e,"bigint")||(r=(e,t)=>e-t),function(e){if("object"==typeof process&&"object"==typeof process.versions)return e.length<=10||parseFloat(process.versions.v8||"0")>=7;if("object"==typeof Deno)return!0;if("object"==typeof navigator&&"string"==typeof navigator.userAgent){let t=navigator.userAgent.match(/(Chrome|Firefox|Safari|Edge|OPR)\/(\d+)/);if(t){let r=t[1],n=parseFloat(t[2]);if("Edge"===r&&e.length<=512||"Chrome"===r&&n>=70||e.length<=10||"Firefox"===r&&n>=3||"Safari"===r&&n>=10.1||"OPR"===r&&n>=54)return!0}}return!1}(e)?e.sort(r):e.map(((e,t)=>({value:e,index:t}))).sort(((e,t)=>r(e.value,t.value)||e.index-t.index)).map((({value:e})=>e))}if(i(t)){let o=Boolean(n);return[...e(Object.getOwnPropertyNames(t)),...Object.getOwnPropertySymbols(t)].reduce(((n,u)=>{let f=t[u];return o&&(r(f,!0)?f=B(f).map((t=>i(t)?e(t,o):t)):i(f)&&(f=e(f,o))),n[u]=f,n}),{})}throw"function"==typeof n?new TypeError("The target to sort is not an array"):"boolean"==typeof n?new TypeError("The target to sort is not a pure object"):new TypeError("The target to sort is not an array or a pure object")},e.split=function(e,t){if(arguments.length<2)throw new SyntaxError(`2 arguments required, received ${arguments.length}`);if("string"==typeof e)return"string"==typeof t||t instanceof RegExp?e.split(t):(Z("length",t),Q(e,t));if("number"==typeof e)return Z("step",t),function(e,t){let r=[],n=0;for(;(n+=t)<=e;)r.push(n);return e>n-t&&r.push(e),r}(e,t);if("function"==typeof Buffer&&Buffer.isBuffer(e)&&("string"==typeof t||Buffer.isBuffer(t)))return function(e,t){let r=[],n=0,o=t.length,i=e.byteLength;for(;n<i;){let u=e.indexOf(t,n);-1!==u?(r.push(e.slice(n,u)),n=u+o):(r.push(e.slice(n)),n=i)}return r}(e,t);if(n(e))return Z("byteLength",t),Q(e,t,e.byteLength);if(r(e,!0))return Z("length",t),Q(e,t);if(o(e)){let r=e.constructor;return Z("size",t),Q([...e],t).map((e=>new r(e)))}if("object"==typeof e&&null!==e)return Z("size",t),function(e,t){let r=Object.getPrototypeOf(e),n=Q(Object.keys(e),t),o=[];for(let t of n){let n=Object.create(r);o.push(n);for(let r of t)n[r]=e[r]}return o}(e,t);throw new TypeError("argument 'obj' must be a string, a number or an object")},e.timestamp=function(e,t=!1){var r;if("boolean"==typeof e&&(t=e,e=void 0),(e=e||new Date)instanceof Date)return t?e.valueOf():Math.floor(e.valueOf()/1e3);if("number"==typeof e)return t?e:Math.floor(e/1e3);{let n,o=String(e).trim();if(o.includes(",")&&o.split(",").every(E))n=function(e){let[t,r,n,o,i,u,f]=e.split(",").map(Number),s=new Date;return _(t)&&s.setFullYear(t),_(r)&&s.setMonth(r),_(n)&&s.setDate(n),_(o)&&s.setHours(o),_(i)&&s.setMinutes(i),_(u)&&s.setSeconds(u),_(f)&&s.setMilliseconds(f),s}(o);else{let e=null;(e=o.match(/^(\d{1,2}):\d{2}(:\d{2})?/))&&(2!==(null===(r=e[1])||void 0===r?void 0:r.length)&&(o="0"+o),e[2]||(o+=":00"),n=new Date,o=n.getFullYear()+"-"+String(n.getMonth()+1).padStart(2,"0")+"-"+String(n.getDate()).padStart(2,"0")+" "+o),n=new Date(o)}if("Invalid Date"!==String(n))return t?n.valueOf():Math.floor(n.valueOf()/1e3);throw console.log(o),new Error("The input argument is not a valid date-time string")}},e.trim=function e(t,n=!1){if("string"==typeof t)return t.trim();if(r(t,!0))return B(t).map((t=>e(t,n)));if(i(t)){return[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)].reduce(((o,u)=>{let f=t[u];return"string"==typeof f?f=f.trim():n&&(r(f,!0)?f=B(f).map((t=>i(t)?e(t,n):t)):i(f)&&(f=e(f,n))),o[u]=f,o}),{})}return t},e.typeAs=ee,e.typeOf=v,e.until=te,e.useThrottle=ne,e.wrap=ie}));
//# sourceMappingURL=index.js.map
