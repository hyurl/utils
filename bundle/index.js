!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["@hyurl/utils"]={})}(this,(function(e){"use strict";function t(e,...t){return"object"==typeof e&&null!==e&&t.every((([t,n])=>t in e&&typeof e[t]===n))}function n(e){return!("object"!=typeof e||null===e||e.constructor!==Object&&(e instanceof Date||e instanceof RegExp||r(e,!0)||function(e){return"object"==typeof e&&null!==e&&("ObjectId"===e.constructor.name||"ObjectID"===e.constructor.name)}(e)||function(e){try{let t=JSON.stringify(e);return"{}"===t||"[]"===t}catch(e){return!1}}(e)||i(e)||o(e)||function(e){return t(e,["then","function"])}(e)))}function r(e,n=!1){if(Array.isArray(e))return!0;if(!n)return t(e,["length","number"])||"string"==typeof e;if(t(e,["length","number"])){let t,n=Object.keys(e),r=!n.includes("length");if(0===e.length||0===(t=n.map(Number).filter(isFinite)).length)return r;{let n="function"==typeof e[Symbol.iterator];for(let o=e.length;o--;)if(!t.includes(o)&&!r&&!n)return!1;return!0}}return!1}function o(e,n=!1){return t(e,["size","number"],[Symbol.iterator,"function"])||!n&&(e instanceof WeakMap||e instanceof WeakSet)}function i(e){return t(e,["byteLength","number"],["slice","function"])}const u=i;const f=new TextEncoder;function s(e){return null==e||Object.is(e,NaN)}function c(e){if(0===arguments.length)throw new TypeError("1 argument is required, 0 given");if(s(e))return"void";let t=typeof e;return"function"===t?function(e){if("function"!=typeof e)return!1;if(void 0===e.prototype)return!1;if(e.prototype.constructor!==e)return!1;if(Object.getOwnPropertyNames(e.prototype).length>=2)return!0;var t=String(e);if("class"==t.slice(0,5))return!0;if(/^function\s*\(|^function anonymous\(/.test(t))return!1;var n=/(call|apply|_classCallCheck)\(this(, arguments)?\)|\bthis(.\S+|\[.+?\])\s*(=|\()|=\s*this[,;]/.test(t);if(/^function\s+[A-Z]/.test(t)&&(n||/\[native code\]/.test(t)&&"BigInt"!==e.name&&"Symbol"!==e.name))return!0;return!(!n||"default_1"!==e.name)}(e)?"class":"function":"object"===t?"[object Arguments]"===Object.prototype.toString.call(e)?"arguments":e.constructor||Object:t}const l=["",NaN,null,void 0],a=[...l,0,!1];function y(e,t=!1){return p(e,Boolean(t),a)}function p(e,t,n){if(n.includes(e))return!0;if("object"==typeof e){if(e instanceof RegExp)return!1;if(e instanceof Date)return"Invalid Date"===String(e);if(e instanceof Error)return 0===e.message.length;if(u(e))return 0===e.byteLength;if(r(e,!0)){if(0===e.length)return!0;if(t){for(let n=0,r=e.length;n<r;++n)if(!p(e[n],t,l))return!1;return!0}return!1}if(o(e,!0)){if(0===e.size)return!0;if(t){if(e instanceof Map){for(let n of e.values())if(!p(n,t,l))return!1;return!0}if(e instanceof Set){for(let n of e)if(!p(n,t,l))return!1;return!0}return!1}return!1}{let n=Reflect.ownKeys(e);return 0===n.length||!!t&&n.every((n=>p(e[n],t,l)))}}return!1}function h(e){const t=typeof e;if("number"===t||"bigint"===t)return!0;if("string"===t){if(!Number.isNaN(e))return!0;try{return BigInt(e),!0}catch(e){return!1}}return!1}function g(e,[t,n]){return e>=t&&e<=n}"function"==typeof BigInt&&a.push(BigInt("0"));const b=/^\s*(true|yes|on)\s*$/i,m=/^\s*(false|no|off)\s*$/i,d=/^\s*(null|nil|none|void|undefined)\s*$/i,v=/^\s*NaN\s*$/,w=/^\s*-?Infinity\s*/,j=/^\s*\/(.+)\/([gimuys]*)\s*$/,O=[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER];function E(e){return Array.isArray(e)?e:Array.from(e)}function N(e,t,o,i,f,c){let l,a,y=!s(o)&&""!==o;if(i===f||!(l=r(t,!0)&&!u(t))&&!(a=n(t)))e[o]=t;else if(a)Reflect.ownKeys(t).forEach((n=>{let r=t[n];"symbol"==typeof n?0===i&&(e[n]=r):N(e,r,y?`${o}.${n}`:n,y?i+1:i,f,c)}));else if(l)if(c)for(let n=0,r=t.length;n<r;++n)N(e,t[n],y?`${o}.${n}`:String(n),y?i+1:i,f,c);else e[o]=t;return e}const S=g,T=function(e){return!("number"!=typeof e||Number.isNaN(e)||Number.isFinite(e)&&e%1==0)};const A=h;function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function D(e,t){return t.reduce(((t,n)=>(n in e&&void 0!==e[n]&&(t[n]=e[n]),t)),{})}function I(e){return!(null==e||Object.is(e,NaN)||e instanceof Date&&"Invalid Date"===e.toString())}const R=P,B=function(e,t){var n;const r=Object.getPrototypeOf(e);return!(!r||!P(r,t))&&"function"==typeof(null===(n=Object.getOwnPropertyDescriptor(r,t))||void 0===n?void 0:n.value)};const x=function(e,t){return"function"==typeof e&&"function"==typeof t&&e.prototype instanceof t};function M(e,t,n,o,i){if("string"==typeof e)return o&&""===e.trim()?i>0?void 0:"":e;if(null===e||"object"!=typeof e||e instanceof Date||e instanceof Error||e instanceof RegExp||u(e))return e;if(n&&y(e))return i>0?void 0:r(e,!0)?[]:{};if(r(e,!0)){let r=[];for(let u=0,f=e.length;u<f;++u){let f=e[u];I(f)&&(t?(f=M(f,t,n,o,i+1),!I(f)||r.push(f)):r.push(f))}return i>0&&n&&y(r)?void 0:r}{let r=Reflect.ownKeys(e).reduce(((r,u)=>{let f=e[u];return I(f)&&(t?(f=M(f,t,n,o,i+1),!I(f)||(r[u]=f)):r[u]=f),r}),{});return i>0&&n&&y(r)?void 0:r}}const k=function(e,t=!1,n=!1,r=!1){return M(e,t,n,r,0)};function F(e,t,r,o,i){if(n(e)&&n(t)){let i=Reflect.ownKeys(t),u={};return i.forEach((i=>{if(e[i]!==t[i]&&I(t[i])&&(!o||""!==t[i]))if(r&&n(e[i])&&n(t[i])){let n=F(e[i],t[i],r,o,!0);y(n)||(u[i]=n,Object.assign(e[i],t[i]))}else u[i]=e[i]=t[i]})),u}return i?t:{}}const $=function(e,t){return e+Math.floor(Math.random()*(t-e+1))};const K=async function(e){return new Promise((t=>setTimeout(t,e)))};function L(e,t="number"){return e.every((e=>typeof e===t))}function q(e,t){if("number"!=typeof t)throw new TypeError(`argument '${e}' must be a number`);if(t<1)throw new RangeError(`argument '${e}' must be 1 or higher`)}function z(e,t,n=void 0){let r=[];for(let o=0,i=n||e.length;o<i;o+=t)"function"==typeof e.slice?r.push(e.slice(o,o+t)):r.push(Array.prototype.slice.call(e,o,o+t));return r}const C=function(e,t){if("function"!=typeof t)throw new TypeError("type must be a valid constructor");let n;const r={string:String,number:Number,bigint:BigInt,boolean:Boolean,symbol:Symbol};return e instanceof t?[String,Number,Boolean].includes(t)?e.valueOf():e:(n=typeof e)&&r[n]===t?e:null},_=async function(e){for(;!1===await e();)await new Promise((e=>setTimeout(e)))};if(void 0===G)var G=e=>setTimeout(e,0);var V=W;function W(e,t,n=!1){if(t<1)throw new RangeError("The 'interval' time for throttle must not be smaller than 1");if(!W.gcTimer){let{gcInterval:e,tasks:t}=W;W.gcTimer=setInterval((()=>{let n=Date.now();t.forEach((({interval:r,lastActive:o},i)=>{n-o>Math.max(r+5,e)&&t.delete(i)}))}),e),"function"==typeof W.gcTimer.unref&&W.gcTimer.unref()}let r=W.tasks.get(e);return r||W.tasks.set(e,r=function(e,t=!1){let n={interval:e,lastActive:0,cache:void 0,queue:new Set,func:void 0,daemon:null};async function r(n,...r){t&&!this.daemon&&(this.daemon=setInterval((()=>{var e;return null===(e=this.func)||void 0===e?void 0:e.call(this,n,...r)}),e),"function"==typeof this.daemon.unref&&this.daemon.unref());let o=Date.now();if(o-this.lastActive>=e){if(this.lastActive=o,t&&this.cache){if(Promise.resolve(n(...r)).then((e=>{this.cache={value:e,error:null}})).catch((e=>{this.cache={value:void 0,error:e}})),this.cache.error)throw this.cache.error;return this.cache.value}{let e,t;this.cache=void 0;try{e=await n(...r),this.cache={value:e,error:null}}catch(e){this.cache={value:void 0,error:t=e}}if(G((()=>{y(this.queue)||this.queue.forEach((n=>{t?n.reject(t):n.resolve(e),this.queue.delete(n)}))})),t)throw t;return e}}if(this.cache){if(this.cache.error)throw this.cache.error;return this.cache.value}return new Promise(((e,t)=>{this.queue.add({resolve:e,reject:t})}))}return n.func=r.bind(n),n}(t,n)),r.func}!function(e){e.gcInterval=3e4,e.gcTimer=void 0,e.tasks=new Map}(W||(W={}));const Y=function(e,t){const n=function(...n){return t.call(this,e,...n)};return Object.defineProperty(n,"name",Object.getOwnPropertyDescriptor(e,"name")),Object.defineProperty(n,"length",Object.getOwnPropertyDescriptor(e,"length")),Object.defineProperty(n,"toString",{configurable:!0,enumerable:!1,writable:!0,value:e.toString.bind(e)}),n};e.count=function(e,t=void 0){if("string"==typeof e)return"string"==typeof t?t?e?e.split(t).length-1:0:e.length+1:!0===t?"function"==typeof Buffer&&"function"==typeof Buffer.byteLength?Buffer.byteLength(e):f.encode(e).byteLength:e.length;if(r(e,!0)){if(2===arguments.length){let n=0;for(let r=e.length;r--;)(e[r]===t||Object.is(e[r],t))&&n++;return n}return e.length}return u(e)?e.byteLength:o(e,!0)?e.size:Object.keys(e).length},e.define=function(e,t,n,r=!1,o=!1){c(n)!==Object||!function(e){return"get"===String(Object.keys(e))&&"function"==typeof e.get}(n)&&!function(e){let t=String(Object.keys(e));return("get,set"===t||"set,get"===t)&&"function"==typeof e.get&&"function"==typeof e.set}(n)?Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:o,value:n}):Object.defineProperty(e,t,{configurable:!0,enumerable:r,...n})},e.diff=function e(t,r,o=!1){if(Array.isArray(t)&&Array.isArray(r))return[...r.filter((e=>!t.includes(e))),...t.filter((e=>!r.includes(e)))];if(n(t)&&n(r)){let n=Reflect.ownKeys(r),i=Reflect.ownKeys(t),u={};return n.forEach((n=>{if(!(t[n]===r[n]||s(t[n])&&s(r[n])))if(o&&"object"==typeof t[n]&&null!==t[n]&&"object"==typeof r[n]&&null!==r[n]){let i=e(t[n],r[n],o);y(i)||(u[n]=i)}else u[n]=r[n]})),i.forEach((e=>{n.includes(e)||(u[e]=t[e])})),u}return r},e.ensureType=function e(t){switch(typeof t){case"string":{let e;if(b.test(t))return!0;if(m.test(t))return!1;if(d.test(t))return null;if(v.test(t))return NaN;if(w.test(t))return Number(t);if(e=t.match(j))return new RegExp(e[1],e[2]);{let e=Number(t);return!isNaN(e)&&g(e,O)&&"+"!==t[0]?e:t}}case"object":return null===t?null:r(t,!0)?E(t).map(e):n(t)?Reflect.ownKeys(t).reduce(((n,r)=>(n[r]=e(t[r]),n)),{}):t;default:return t}},e.flatObject=function(e,t=1,n=!1){return N({},e,"",0,t,n)},e.getGlobal=function(e=void 0){let t;return"object"==typeof globalThis?t=globalThis:"object"==typeof self?t=self:"object"==typeof global?t=global:"object"==typeof window&&(t=window),t&&(e?t[e]:t)},e.isBetween=S,e.isEmpty=y,e.isFloat=T,e.isInteger=function(e){return"bigint"==typeof e||Number.isInteger(e)},e.isNumeric=A,e.isOwnKey=R,e.isOwnMethod=B,e.isSubClassOf=x,e.isVoid=s,e.keysOf=function(e){return Array.isArray(e)?e.map(((e,t)=>t)):Reflect.ownKeys(e)},e.omit=function(e,t){return Array.isArray(e)?e.filter((e=>!t.includes(e))):function(e,t){const n=Reflect.ownKeys(e).filter((e=>!t.includes(e))),r=D(e,n);return e instanceof Error&&["name","message","cause"].forEach((n=>{t.includes(n)||void 0===e[n]||P(r,n)||(r[n]=e[n])})),r}(e,t)},e.omitVoid=k,e.patch=function(e,t,n=!1,r=!1){return F(e,t,n,r,!1)},e.pick=function(e,t){return Array.isArray(e)?t.map((t=>e[t])):D(e,t)},e.rand=$,e.randStr=function(e,t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"){let n="",r=t.length-1;for(;0<e--;)n+=t[$(0,r)];return n},e.sleep=K,e.sort=function e(t,o=void 0){if(r(t,!0)){let e=E(t),n=o;return n||!L(e)&&!L(e,"bigint")||(n=(e,t)=>e-t),function(e){if("object"==typeof process&&"object"==typeof process.versions)return e.length<=10||parseFloat(process.versions.v8||"0")>=7;if("object"==typeof Deno)return!0;if("object"==typeof navigator&&"string"==typeof navigator.userAgent){let t=navigator.userAgent.match(/(Chrome|Firefox|Safari|Edge|OPR)\/(\d+)/);if(t){let n=t[1],r=parseFloat(t[2]);if("Edge"===n&&e.length<=512||"Chrome"===n&&r>=70||e.length<=10||"Firefox"===n&&r>=3||"Safari"===n&&r>=10.1||"OPR"===n&&r>=54)return!0}}return!1}(e)?e.sort(n):e.map(((e,t)=>({value:e,index:t}))).sort(((e,t)=>n(e.value,t.value)||e.index-t.index)).map((({value:e})=>e))}if(n(t)){let i=Boolean(o);return[...e(Object.getOwnPropertyNames(t)),...Object.getOwnPropertySymbols(t)].reduce(((o,u)=>{let f=t[u];return i&&(r(f,!0)?f=E(f).map((t=>n(t)?e(t,i):t)):n(f)&&(f=e(f,i))),o[u]=f,o}),{})}throw"function"==typeof o?new TypeError("The target to sort is not an array"):"boolean"==typeof o?new TypeError("The target to sort is not a pure object"):new TypeError("The target to sort is not an array or a pure object")},e.split=function(e,t){if(arguments.length<2)throw new SyntaxError(`2 arguments required, received ${arguments.length}`);if("string"==typeof e)return"string"==typeof t||t instanceof RegExp?e.split(t):(q("length",t),z(e,t));if("number"==typeof e)return q("step",t),function(e,t){let n=[],r=0;for(;(r+=t)<=e;)n.push(r);return e>r-t&&n.push(e),n}(e,t);if("function"==typeof Buffer&&Buffer.isBuffer(e)&&("string"==typeof t||Buffer.isBuffer(t)))return function(e,t){let n=[],r=0,o=t.length,i=e.byteLength;for(;r<i;){let u=e.indexOf(t,r);-1!==u?(n.push(e.slice(r,u)),r=u+o):(n.push(e.slice(r)),r=i)}return n}(e,t);if(u(e))return q("byteLength",t),z(e,t,e.byteLength);if(r(e,!0))return q("length",t),z(e,t);if(o(e)){let n=e.constructor;return q("size",t),z([...e],t).map((e=>new n(e)))}if("object"==typeof e&&null!==e)return q("size",t),function(e,t){let n=Object.getPrototypeOf(e),r=z(Object.keys(e),t),o=[];for(let t of r){let r=Object.create(n);o.push(r);for(let n of t)r[n]=e[n]}return o}(e,t);throw new TypeError("argument 'obj' must be a string, a number or an object")},e.timestamp=function(e,t=!1){var n;if("boolean"==typeof e&&(t=e,e=void 0),(e=e||new Date)instanceof Date)return t?e.valueOf():Math.floor(e.valueOf()/1e3);if("number"==typeof e)return t?e:Math.floor(e/1e3);{let r,o=String(e).trim();if(o.includes(",")&&o.split(",").every(h))r=function(e){let[t,n,r,o,i,u,f]=e.split(",").map(Number),s=new Date;return I(t)&&s.setFullYear(t),I(n)&&s.setMonth(n),I(r)&&s.setDate(r),I(o)&&s.setHours(o),I(i)&&s.setMinutes(i),I(u)&&s.setSeconds(u),I(f)&&s.setMilliseconds(f),s}(o);else{let e=null;(e=o.match(/^(\d{1,2}):\d{2}(:\d{2})?/))&&(2!==(null===(n=e[1])||void 0===n?void 0:n.length)&&(o="0"+o),e[2]||(o+=":00"),r=new Date,o=r.getFullYear()+"-"+String(r.getMonth()+1).padStart(2,"0")+"-"+String(r.getDate()).padStart(2,"0")+" "+o),r=new Date(o)}if("Invalid Date"!==String(r))return t?r.valueOf():Math.floor(r.valueOf()/1e3);throw console.log(o),new Error("The input argument is not a valid date-time string")}},e.trim=function e(t,o=!1){if("string"==typeof t)return t.trim();if(r(t,!0))return E(t).map((t=>e(t,o)));if(n(t)){return[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)].reduce(((i,u)=>{let f=t[u];return"string"==typeof f?f=f.trim():o&&(r(f,!0)?f=E(f).map((t=>n(t)?e(t,o):t)):n(f)&&(f=e(f,o))),i[u]=f,i}),{})}return t},e.typeAs=C,e.typeOf=c,e.until=_,e.useThrottle=V,e.wrap=Y}));
//# sourceMappingURL=index.js.map
