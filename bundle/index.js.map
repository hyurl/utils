{"version":3,"file":"index.js","mappings":"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","sources":["webpack://@hyurl/utils/webpack/universalModuleDefinition","webpack://@hyurl/utils/./node_modules/@ayonli/jsext/cjs/index.js","webpack://@hyurl/utils/./node_modules/@ayonli/jsext/cjs/number/index.js","webpack://@hyurl/utils/./node_modules/@ayonli/jsext/cjs/object/index.js","webpack://@hyurl/utils/./node_modules/@ayonli/jsext/cjs/promise/index.js","webpack://@hyurl/utils/./node_modules/check-iterable/index.js","webpack://@hyurl/utils/./node_modules/could-be-class/index.js","webpack://@hyurl/utils/./node_modules/is-like/index.js","webpack://@hyurl/utils/./count.ts","webpack://@hyurl/utils/./define.ts","webpack://@hyurl/utils/./diff.ts","webpack://@hyurl/utils/./ensureType.ts","webpack://@hyurl/utils/./flatObject.ts","webpack://@hyurl/utils/./getGlobal.ts","webpack://@hyurl/utils/./isBetween.ts","webpack://@hyurl/utils/./isEmpty.ts","webpack://@hyurl/utils/./isFloat.ts","webpack://@hyurl/utils/./isInteger.ts","webpack://@hyurl/utils/./isNumeric.ts","webpack://@hyurl/utils/./isOwnKey.ts","webpack://@hyurl/utils/./isOwnMethod.ts","webpack://@hyurl/utils/./isSubClassOf.ts","webpack://@hyurl/utils/./isVoid.ts","webpack://@hyurl/utils/./keysOf.ts","webpack://@hyurl/utils/./omit.ts","webpack://@hyurl/utils/./omitVoid.ts","webpack://@hyurl/utils/./patch.ts","webpack://@hyurl/utils/./pick.ts","webpack://@hyurl/utils/./rand.ts","webpack://@hyurl/utils/./randStr.ts","webpack://@hyurl/utils/./sleep.ts","webpack://@hyurl/utils/./sort.ts","webpack://@hyurl/utils/./split.ts","webpack://@hyurl/utils/./timestamp.ts","webpack://@hyurl/utils/./trim.ts","webpack://@hyurl/utils/./typeAs.ts","webpack://@hyurl/utils/./typeOf.ts","webpack://@hyurl/utils/./until.ts","webpack://@hyurl/utils/./useThrottle.ts","webpack://@hyurl/utils/./wrap.ts","webpack://@hyurl/utils/./node_modules/utf8-length/index.js","webpack://@hyurl/utils/external node-commonjs \"child_process\"","webpack://@hyurl/utils/external node-commonjs \"events\"","webpack://@hyurl/utils/external node-commonjs \"path\"","webpack://@hyurl/utils/external node-commonjs \"url\"","webpack://@hyurl/utils/external node-commonjs \"worker_threads\"","webpack://@hyurl/utils/webpack/bootstrap","webpack://@hyurl/utils/./index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@hyurl/utils\"] = factory();\n\telse\n\t\troot[\"@hyurl/utils\"] = factory();\n})(this, () => {\nreturn ","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst check_iterable_1 = require(\"check-iterable\");\nconst number_1 = require(\"./number\");\nconst isNode = typeof process === \"object\" && !!((_a = process.versions) === null || _a === void 0 ? void 0 : _a.node);\nconst throttleCaches = new Map();\n/**\n * The maximum number of workers allowed to exist at the same time.\n *\n * The primary purpose of the workers is not mean to run tasks in parallel, but run them in separate\n * from the main thread, so that aborting tasks can be achieved by terminating the worker thread and\n * it will not affect the main thread.\n *\n * That said, the worker thread can still be used to achieve parallelism, but it should be noticed\n * that only the numbers of tasks that equals to the CPU core numbers will be run at the same time.\n */\nconst maxWorkerNum = 16;\nconst workerIdCounter = (0, number_1.sequence)(1, Number.MAX_SAFE_INTEGER, 1, true);\nlet workerPool = [];\n// The worker consumer queue is nothing but a callback list, once a worker is available, the runner\n// pop a consumer and run the callback, which will retry gaining the worker and retry the task.\nconst workerConsumerQueue = [];\n/**\n * Merges properties and methods only if they're missing in the class.\n */\nfunction mergeIfNotExists(proto, source, mergeSuper = false) {\n    let props = Reflect.ownKeys(source);\n    for (let prop of props) {\n        if (prop == \"constructor\") {\n            continue;\n        }\n        else if (mergeSuper) {\n            // When merging properties from super classes, the properties in the\n            // base class has the first priority and shall not be overwrite.\n            if (!(prop in proto)) {\n                setProp(proto, source, prop);\n            }\n        }\n        else if (!proto.hasOwnProperty(prop)) {\n            setProp(proto, source, prop);\n        }\n    }\n    return proto;\n}\n/**\n * Merges properties and methods across the prototype chain.\n */\nfunction mergeHierarchy(ctor, mixin, mergeSuper = false) {\n    mergeIfNotExists(ctor.prototype, mixin.prototype, mergeSuper);\n    let _super = Object.getPrototypeOf(mixin);\n    // Every user defined class or functions that can be instantiated have their\n    // own names, if no name appears, that means the function has traveled to \n    // the root of the hierarchical tree.\n    if (_super.name) {\n        mergeHierarchy(ctor, _super, true);\n    }\n}\n/**\n * Sets property for prototype based on the given source and prop name properly.\n */\nfunction setProp(proto, source, prop) {\n    let desc = Object.getOwnPropertyDescriptor(source, prop);\n    if (desc) {\n        Object.defineProperty(proto, prop, desc);\n    }\n    else {\n        proto[prop] = source[prop];\n    }\n}\nconst jsext = {\n    try(fn, ...args) {\n        if (typeof fn === \"function\") {\n            try {\n                return jsext.try(fn.apply(void 0, args));\n            }\n            catch (err) {\n                return [err, undefined];\n            }\n        }\n        let returns = fn;\n        // Implementation details should be ordered from complex to simple.\n        if ((0, check_iterable_1.isAsyncGenerator)(returns)) {\n            return (async function* () {\n                let input;\n                let result;\n                // Use `while` loop instead of `for...of...` in order to\n                // retrieve the return value of a generator function.\n                while (true) {\n                    try {\n                        let { done, value } = await returns.next(input);\n                        if (done) {\n                            result = value;\n                            break;\n                        }\n                        else {\n                            // Receive any potential input value that passed\n                            // to the outer `next()` call, and pass them to\n                            // `res.next()` in the next call.\n                            input = yield Promise.resolve([null, value]);\n                        }\n                    }\n                    catch (err) {\n                        // If any error occurs, yield that error as resolved\n                        // and break the loop immediately, indicating the\n                        // process is forced broken.\n                        yield Promise.resolve([err, undefined]);\n                        break;\n                    }\n                }\n                return Promise.resolve([null, result]);\n            })();\n        }\n        else if ((0, check_iterable_1.isGenerator)(returns)) {\n            return (function* () {\n                let input;\n                let result;\n                while (true) {\n                    try {\n                        let { done, value } = returns.next(input);\n                        if (done) {\n                            result = value;\n                            break;\n                        }\n                        else {\n                            input = yield [null, value];\n                        }\n                    }\n                    catch (err) {\n                        yield [err, undefined];\n                        break;\n                    }\n                }\n                return [null, result];\n            })();\n        }\n        else if (typeof (returns === null || returns === void 0 ? void 0 : returns.then) === \"function\") {\n            returns = returns.then((value) => [null, value]);\n            return Promise.resolve(returns).catch((err) => [err, undefined]);\n        }\n        else {\n            return [null, returns];\n        }\n    },\n    func(fn) {\n        return function (...args) {\n            var _a;\n            const callbacks = [];\n            const defer = (cb) => void callbacks.push(cb);\n            let result;\n            try {\n                const returns = fn.call(this, defer, ...args);\n                if ((0, check_iterable_1.isAsyncGenerator)(returns)) {\n                    const gen = (async function* () {\n                        var _a;\n                        let input;\n                        // Use `while` loop instead of `for...of...` in order to\n                        // retrieve the return value of a generator function.\n                        while (true) {\n                            try {\n                                let { done, value } = await returns.next(input);\n                                if (done) {\n                                    result = { value, error: null };\n                                    break;\n                                }\n                                else {\n                                    // Receive any potential input value that passed\n                                    // to the outer `next()` call, and pass them to\n                                    // `res.next()` in the next call.\n                                    input = yield Promise.resolve(value);\n                                }\n                            }\n                            catch (error) {\n                                // If any error occurs, capture that error and break\n                                // the loop immediately, indicating the process is\n                                // forced broken.\n                                result = { value: void 0, error };\n                                break;\n                            }\n                        }\n                        for (let i = callbacks.length - 1; i >= 0; i--) {\n                            await ((_a = callbacks[i]) === null || _a === void 0 ? void 0 : _a.call(callbacks));\n                        }\n                        if (result.error) {\n                            throw result.error;\n                        }\n                        else {\n                            return Promise.resolve(result.value);\n                        }\n                    })();\n                    return gen;\n                }\n                else if ((0, check_iterable_1.isGenerator)(returns)) {\n                    const gen = (function* () {\n                        var _a;\n                        let input;\n                        while (true) {\n                            try {\n                                let { done, value } = returns.next(input);\n                                if (done) {\n                                    result = { value, error: null };\n                                    break;\n                                }\n                                else {\n                                    input = yield value;\n                                }\n                            }\n                            catch (error) {\n                                result = { value: void 0, error };\n                                break;\n                            }\n                        }\n                        for (let i = callbacks.length - 1; i >= 0; i--) {\n                            (_a = callbacks[i]) === null || _a === void 0 ? void 0 : _a.call(callbacks);\n                        }\n                        if (result.error) {\n                            throw result.error;\n                        }\n                        else {\n                            return result.value;\n                        }\n                    })();\n                    return gen;\n                }\n                else if (typeof (returns === null || returns === void 0 ? void 0 : returns.then) === \"function\") {\n                    return Promise.resolve(returns).then(value => ({\n                        value,\n                        error: null,\n                    })).catch((error) => ({\n                        value: void 0,\n                        error,\n                    })).then(async (result) => {\n                        var _a;\n                        for (let i = callbacks.length - 1; i >= 0; i--) {\n                            await ((_a = callbacks[i]) === null || _a === void 0 ? void 0 : _a.call(callbacks));\n                        }\n                        if (result.error) {\n                            throw result.error;\n                        }\n                        else {\n                            return result.value;\n                        }\n                    });\n                }\n                else {\n                    result = { value: returns, error: null };\n                }\n            }\n            catch (error) {\n                result = { value: void 0, error };\n            }\n            for (let i = callbacks.length - 1; i >= 0; i--) {\n                (_a = callbacks[i]) === null || _a === void 0 ? void 0 : _a.call(callbacks);\n            }\n            if (result.error) {\n                throw result.error;\n            }\n            else {\n                return result.value;\n            }\n        };\n    },\n    wrap(fn, wrapper) {\n        const wrapped = function (...args) {\n            return wrapper.call(this, fn, ...args);\n        };\n        Object.defineProperty(wrapped, \"name\", Object.getOwnPropertyDescriptor(fn, \"name\"));\n        Object.defineProperty(wrapped, \"length\", Object.getOwnPropertyDescriptor(fn, \"length\"));\n        Object.defineProperty(wrapped, \"toString\", {\n            configurable: true,\n            enumerable: false,\n            writable: true,\n            value: fn.toString.bind(fn),\n        });\n        return wrapped;\n    },\n    throttle(handler, options) {\n        const key = typeof options === \"number\" ? null : options.for;\n        const duration = typeof options === \"number\" ? options : options.duration;\n        const handleCall = function (cache, ...args) {\n            var _a;\n            if (cache.result && Date.now() < ((_a = cache.expires) !== null && _a !== void 0 ? _a : 0)) {\n                if (cache.result.error) {\n                    throw cache.result.error;\n                }\n                else {\n                    return cache.result.value;\n                }\n            }\n            try {\n                const returns = handler.call(this, ...args);\n                cache.result = { value: returns };\n                cache.expires = Date.now() + duration;\n                return returns;\n            }\n            catch (error) {\n                cache.result = { error };\n                cache.expires = Date.now() + duration;\n                throw error;\n            }\n        };\n        if (!key) {\n            const cache = { for: null };\n            return function (...args) {\n                return handleCall.call(this, cache, ...args);\n            };\n        }\n        else {\n            let cache = throttleCaches.get(key);\n            if (!cache) {\n                cache = { for: key };\n                throttleCaches.set(key, cache);\n            }\n            return function (...args) {\n                return handleCall.call(this, cache, ...args);\n            };\n        }\n    },\n    mixins(base, ...mixins) {\n        const obj = { ctor: null };\n        obj.ctor = class extends base {\n        }; // make sure this class has no name\n        for (let mixin of mixins) {\n            if (typeof mixin == \"function\") {\n                mergeHierarchy(obj.ctor, mixin);\n            }\n            else if (mixin && typeof mixin == \"object\") {\n                mergeIfNotExists(obj.ctor.prototype, mixin);\n            }\n            else {\n                throw new TypeError(\"mixin must be a constructor or an object\");\n            }\n        }\n        return obj.ctor;\n    },\n    isSubclassOf(ctor1, ctor2) {\n        return typeof ctor1 === \"function\"\n            && typeof ctor2 === \"function\"\n            && ctor1.prototype instanceof ctor2;\n    },\n    read(source, eventMap = undefined) {\n        var _a;\n        if (typeof source[Symbol.asyncIterator] === \"function\") {\n            return source;\n        }\n        const iterable = {\n            ended: false,\n            error: null,\n            queue: [],\n            consumers: [],\n            next() {\n                return new Promise((resolve, reject) => {\n                    if (this.error && !this.ended) {\n                        // If there is error occurred during the last transmission and the iterator\n                        // hasn't been closed, reject that error and stop the iterator immediately.\n                        reject(this.error);\n                        this.ended = true;\n                    }\n                    else if (this.ended && !this.queue.length) {\n                        // If the iterator has is closed, resolve the pending consumer with void\n                        // value.\n                        resolve({ value: void 0, done: true });\n                    }\n                    else if (this.queue.length > 0) {\n                        // If there are data in the queue, resolve the the first piece immediately.\n                        resolve({ value: this.queue.shift(), done: false });\n                    }\n                    else {\n                        // If there are no queued data, push the consumer to a waiting queue.\n                        this.consumers.push({ resolve, reject });\n                    }\n                });\n            }\n        };\n        const handleMessage = (data) => {\n            var _a;\n            if (iterable.consumers.length > 0) {\n                (_a = iterable.consumers.shift()) === null || _a === void 0 ? void 0 : _a.resolve({ value: data, done: false });\n            }\n            else {\n                iterable.queue.push(data);\n            }\n        };\n        const handleClose = () => {\n            iterable.ended = true;\n            let consumer;\n            while (consumer = iterable.consumers.shift()) {\n                consumer.resolve({ value: undefined, done: true });\n            }\n        };\n        const handleError = (err) => {\n            iterable.error = err;\n            if (iterable.consumers.length > 0) {\n                iterable.consumers.forEach(item => {\n                    item.reject(err);\n                });\n                iterable.consumers = [];\n            }\n        };\n        const handleBrowserErrorEvent = (ev) => {\n            let err;\n            if (ev instanceof ErrorEvent) {\n                err = ev.error || new Error(ev.message);\n            }\n            else {\n                // @ts-ignore\n                err = new Error(\"something went wrong\", { cause: ev });\n            }\n            handleError(err);\n        };\n        const proto = Object.getPrototypeOf(source);\n        const msgDesc = Object.getOwnPropertyDescriptor(proto, \"onmessage\");\n        if ((msgDesc === null || msgDesc === void 0 ? void 0 : msgDesc.set) && typeof source.close === \"function\") { // WebSocket or EventSource\n            const errDesc = Object.getOwnPropertyDescriptor(proto, \"onerror\");\n            const closeDesc = Object.getOwnPropertyDescriptor(proto, \"onclose\");\n            let cleanup;\n            if ((eventMap === null || eventMap === void 0 ? void 0 : eventMap.event) &&\n                (eventMap === null || eventMap === void 0 ? void 0 : eventMap.event) !== \"message\" &&\n                typeof source[\"addEventListener\"] === \"function\") { // for EventSource listening on custom events\n                const es = source;\n                const eventName = eventMap.event;\n                const msgListener = (ev) => {\n                    handleMessage(ev.data);\n                };\n                es.addEventListener(eventName, msgListener);\n                cleanup = () => {\n                    es.removeEventListener(eventName, msgListener);\n                };\n            }\n            else {\n                msgDesc.set.call(source, (ev) => {\n                    handleMessage(ev.data);\n                });\n                cleanup = () => {\n                    var _a;\n                    (_a = msgDesc.set) === null || _a === void 0 ? void 0 : _a.call(source, null);\n                };\n            }\n            (_a = errDesc === null || errDesc === void 0 ? void 0 : errDesc.set) === null || _a === void 0 ? void 0 : _a.call(source, handleBrowserErrorEvent);\n            if (closeDesc === null || closeDesc === void 0 ? void 0 : closeDesc.set) { // WebSocket\n                closeDesc.set.call(source, () => {\n                    var _a, _b;\n                    handleClose();\n                    (_a = closeDesc.set) === null || _a === void 0 ? void 0 : _a.call(source, null);\n                    (_b = errDesc === null || errDesc === void 0 ? void 0 : errDesc.set) === null || _b === void 0 ? void 0 : _b.call(source, null);\n                    cleanup === null || cleanup === void 0 ? void 0 : cleanup();\n                });\n            }\n            else if (!(closeDesc === null || closeDesc === void 0 ? void 0 : closeDesc.set) && typeof source.close === \"function\") { // EventSource\n                // EventSource by default does not trigger close event, we need to make sure when\n                // it calls the close() function, the iterator is automatically closed.\n                const es = source;\n                const _close = es.close;\n                es.close = function close() {\n                    var _a;\n                    _close.call(es);\n                    handleClose();\n                    es.close = _close;\n                    (_a = errDesc === null || errDesc === void 0 ? void 0 : errDesc.set) === null || _a === void 0 ? void 0 : _a.call(source, null);\n                    cleanup === null || cleanup === void 0 ? void 0 : cleanup();\n                };\n            }\n        }\n        else if (typeof source.send === \"function\" && typeof source.close === \"function\") {\n            // non-standard WebSocket implementation\n            const ws = source;\n            ws.onmessage = (ev) => {\n                handleMessage(ev.data);\n            };\n            ws.onerror = handleBrowserErrorEvent;\n            ws.onclose = () => {\n                handleClose();\n                ws.onclose = null;\n                ws.onerror = null;\n                ws.onmessage = null;\n            };\n        }\n        else if (typeof source[\"addEventListener\"] === \"function\") { // EventTarget\n            const target = source;\n            const msgEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.message) || \"message\";\n            const errEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.error) || \"error\";\n            const closeEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.close) || \"close\";\n            const msgListener = (ev) => {\n                if (ev instanceof MessageEvent) {\n                    handleMessage(ev.data);\n                }\n            };\n            target.addEventListener(msgEvent, msgListener);\n            target.addEventListener(errEvent, handleBrowserErrorEvent);\n            target.addEventListener(closeEvent, function closeListener() {\n                handleClose();\n                target.removeEventListener(closeEvent, closeListener);\n                target.removeEventListener(msgEvent, msgListener);\n                target.removeEventListener(errEvent, handleBrowserErrorEvent);\n            });\n        }\n        else if (typeof source[\"on\"] === \"function\") { // EventEmitter\n            const target = source;\n            const dataEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.data) || \"data\";\n            const errEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.error) || \"error\";\n            const endEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.close) || \"close\";\n            target.on(dataEvent, handleMessage);\n            target.once(errEvent, handleError);\n            target.once(endEvent, () => {\n                handleClose();\n                target.off(dataEvent, handleMessage);\n                target.off(dataEvent, handleError);\n            });\n        }\n        else {\n            throw new TypeError(\"the input source cannot be read as an AsyncIterable object\");\n        }\n        return {\n            [Symbol.asyncIterator]() {\n                return iterable;\n            }\n        };\n    },\n    async run(script, args = undefined, options = undefined) {\n        var _a;\n        const msg = {\n            type: \"ffi\",\n            script,\n            baseUrl: \"\",\n            fn: (options === null || options === void 0 ? void 0 : options.fn) || \"default\",\n            args: args !== null && args !== void 0 ? args : [],\n        };\n        if (typeof Deno === \"object\") {\n            msg.baseUrl = \"file://\" + Deno.cwd() + \"/\";\n        }\n        else if (isNode) {\n            msg.baseUrl = \"file://\" + process.cwd() + \"/\";\n        }\n        else if (typeof location === \"object\") {\n            msg.baseUrl = location.href;\n        }\n        // `buffer` is used to store data pieces yielded by generator functions before they are\n        // consumed. `error` and `result` serves similar purposes for function results.\n        const buffer = [];\n        let error = null;\n        let result;\n        let resolver;\n        let iterator;\n        let workerId;\n        let poolRecord;\n        let release;\n        let terminate = () => Promise.resolve(void 0);\n        let timeout = (options === null || options === void 0 ? void 0 : options.timeout) ? setTimeout(() => {\n            const err = new Error(`operation timeout after ${options.timeout}ms`);\n            if (resolver) {\n                resolver.reject(err);\n            }\n            else {\n                error = err;\n            }\n            terminate();\n        }, options.timeout) : null;\n        const handleMessage = (msg) => {\n            var _a;\n            if (msg && typeof msg === \"object\" && typeof msg.type === \"string\") {\n                if (msg.type === \"error\") {\n                    return handleError(msg.error);\n                }\n                else if (msg.type === \"return\") {\n                    if (options === null || options === void 0 ? void 0 : options.keepAlive) {\n                        // Release before resolve.\n                        release === null || release === void 0 ? void 0 : release();\n                        if (workerConsumerQueue.length) {\n                            // Queued consumer now has chance to gain the worker.\n                            (_a = workerConsumerQueue.shift()) === null || _a === void 0 ? void 0 : _a();\n                        }\n                    }\n                    else {\n                        terminate();\n                    }\n                    if (resolver) {\n                        resolver.resolve(msg.value);\n                    }\n                    else {\n                        result = { value: msg.value };\n                    }\n                }\n                else if (msg.type === \"yield\") {\n                    if (msg.done) {\n                        // The final message of yield event is the return value.\n                        handleMessage({ type: \"return\", value: msg.value });\n                    }\n                    else {\n                        if (iterator) {\n                            iterator.emit(\"data\", msg.value);\n                        }\n                        else {\n                            buffer.push(msg.value);\n                        }\n                    }\n                }\n            }\n        };\n        const handleError = (err) => {\n            if (resolver) {\n                resolver.reject(err);\n            }\n            else if (iterator) {\n                iterator.emit(\"error\", err);\n            }\n            else {\n                error = err;\n            }\n        };\n        const handleExit = () => {\n            var _a;\n            if (poolRecord) {\n                // Clean the pool before resolve.\n                workerPool = workerPool.filter(record => record !== poolRecord);\n                if (workerConsumerQueue.length) {\n                    // Queued consumer now has chance to create new worker.\n                    (_a = workerConsumerQueue.shift()) === null || _a === void 0 ? void 0 : _a();\n                }\n            }\n            if (resolver) {\n                resolver.resolve(void 0);\n            }\n            else if (iterator) {\n                iterator.emit(\"close\");\n            }\n            else if (!error && !result) {\n                result = { value: void 0 };\n            }\n        };\n        if (isNode) {\n            const path = await Promise.resolve().then(() => require(\"path\"));\n            const { fileURLToPath } = await Promise.resolve().then(() => require(\"url\"));\n            let _filename;\n            let _dirname;\n            let entry;\n            if (typeof __filename === \"string\") {\n                _filename = __filename;\n                _dirname = __dirname;\n            }\n            else {\n                // This file URL will be replace with `import.meta.url` by Rollup plugin.\n                _filename = fileURLToPath(\"file://{__filename}\");\n                _dirname = path.dirname(_filename);\n            }\n            if ([\"cjs\", \"esm\"].includes(path.basename(_dirname))) { // compiled\n                entry = path.join(path.dirname(_dirname), \"worker.mjs\");\n            }\n            else {\n                entry = path.join(_dirname, \"worker.mjs\");\n            }\n            if ((options === null || options === void 0 ? void 0 : options.adapter) === \"child_process\") {\n                let worker;\n                let ok = true;\n                poolRecord = workerPool.find(item => {\n                    return item.adapter === \"child_process\" && !item.busy;\n                });\n                if (poolRecord) {\n                    worker = poolRecord.worker;\n                    workerId = poolRecord.workerId;\n                    poolRecord.busy = true;\n                }\n                else if (workerPool.length < maxWorkerNum) {\n                    const { fork } = await Promise.resolve().then(() => require(\"child_process\"));\n                    const isPrior14 = parseInt(process.version.slice(1)) < 14;\n                    worker = fork(entry, {\n                        stdio: \"inherit\",\n                        serialization: isPrior14 ? \"advanced\" : \"json\",\n                    });\n                    workerId = worker.pid;\n                    ok = await new Promise((resolve) => {\n                        worker.once(\"exit\", () => {\n                            if (error) {\n                                // The child process took too long to start and cause timeout error.\n                                resolve(false);\n                            }\n                        });\n                        worker.once(\"message\", () => {\n                            worker.removeAllListeners(\"exit\");\n                            resolve(true);\n                        });\n                    });\n                    // Fill the worker pool regardless the current call should keep-alive or not,\n                    // this will make sure that the total number of workers will not exceed the\n                    // maxWorkerNum. If the the call doesn't keep-alive the worker, it will be\n                    // cleaned after the call.\n                    ok && workerPool.push(poolRecord = {\n                        workerId,\n                        worker,\n                        adapter: \"child_process\",\n                        busy: true,\n                    });\n                }\n                else {\n                    // Put the current call in the consumer queue if there are no workers available,\n                    // once an existing call finishes, the queue will pop the its head consumer and\n                    // retry.\n                    return new Promise((resolve) => {\n                        workerConsumerQueue.push(resolve);\n                    }).then(() => jsext.run(script, args, options));\n                }\n                release = () => {\n                    // Remove the event listener so that later calls will not mess up.\n                    worker.off(\"message\", handleMessage);\n                    poolRecord && (poolRecord.busy = false);\n                };\n                terminate = () => Promise.resolve(void worker.kill(1));\n                if (ok) {\n                    worker.send(msg);\n                    worker.on(\"message\", handleMessage);\n                    worker.once(\"error\", handleError);\n                    worker.once(\"exit\", handleExit);\n                }\n            }\n            else {\n                let worker;\n                let ok = true;\n                poolRecord = workerPool.find(item => {\n                    return item.adapter === \"worker_threads\" && !item.busy;\n                });\n                if (poolRecord) {\n                    worker = poolRecord.worker;\n                    workerId = poolRecord.workerId;\n                    poolRecord.busy = true;\n                }\n                else if (workerPool.length < maxWorkerNum) {\n                    const { Worker } = await Promise.resolve().then(() => require(\"worker_threads\"));\n                    worker = new Worker(entry);\n                    workerId = worker.threadId;\n                    ok = await new Promise((resolve) => {\n                        worker.once(\"exit\", () => {\n                            if (error) {\n                                // The child process took too long to start and cause timeout error.\n                                resolve(false);\n                            }\n                        });\n                        worker.once(\"online\", () => {\n                            worker.removeAllListeners(\"exit\");\n                            resolve(true);\n                        });\n                    });\n                    ok && workerPool.push(poolRecord = {\n                        workerId,\n                        worker,\n                        adapter: \"worker_threads\",\n                        busy: true,\n                    });\n                }\n                else {\n                    return new Promise((resolve) => {\n                        workerConsumerQueue.push(resolve);\n                    }).then(() => jsext.run(script, args, options));\n                }\n                release = () => {\n                    worker.off(\"message\", handleMessage);\n                    poolRecord && (poolRecord.busy = false);\n                };\n                terminate = async () => void (await worker.terminate());\n                if (ok) {\n                    worker.postMessage(msg);\n                    worker.on(\"message\", handleMessage);\n                    worker.once(\"error\", handleError);\n                    worker.once(\"messageerror\", handleError);\n                    worker.once(\"exit\", handleExit);\n                }\n            }\n        }\n        else {\n            let worker;\n            poolRecord = workerPool.find(item => {\n                return item.adapter === \"worker_threads\" && !item.busy;\n            });\n            if (poolRecord) {\n                worker = poolRecord.worker;\n                workerId = poolRecord.workerId;\n                poolRecord.busy = true;\n            }\n            else if (workerPool.length < maxWorkerNum) {\n                let url;\n                if (typeof Deno === \"object\") {\n                    // Deno can load the module regardless of MINE type.\n                    url = [\n                        ...(\"file://{__filename}\".split(\"/\").slice(0, -1)),\n                        \"worker-web.mjs\"\n                    ].join(\"/\");\n                }\n                else {\n                    const _url = (options === null || options === void 0 ? void 0 : options.webWorkerEntry)\n                        || \"https://raw.githubusercontent.com/ayonli/jsext/main/esm/worker-web.mjs\";\n                    const res = await fetch(_url);\n                    let blob;\n                    if ((_a = res.headers.get(\"content-type\")) === null || _a === void 0 ? void 0 : _a.startsWith(\"application/javascript\")) {\n                        blob = await res.blob();\n                    }\n                    else {\n                        const buf = await res.arrayBuffer();\n                        blob = new Blob([new Uint8Array(buf)], {\n                            type: \"application/javascript\",\n                        });\n                    }\n                    url = URL.createObjectURL(blob);\n                }\n                worker = new Worker(url, { type: \"module\" });\n                workerId = workerIdCounter.next().value;\n                workerPool.push(poolRecord = {\n                    workerId,\n                    worker,\n                    adapter: \"worker_threads\",\n                    busy: true,\n                });\n            }\n            else {\n                return new Promise((resolve) => {\n                    workerConsumerQueue.push(resolve);\n                }).then(() => jsext.run(script, args, options));\n            }\n            release = () => {\n                worker.onmessage = null;\n                poolRecord && (poolRecord.busy = false);\n            };\n            terminate = async () => {\n                await Promise.resolve(worker.terminate());\n                handleExit();\n            };\n            worker.postMessage(msg);\n            worker.onmessage = (ev) => handleMessage(ev.data);\n            worker.onerror = (ev) => handleMessage(ev.error || new Error(ev.message));\n            worker.onmessageerror = () => {\n                handleError(new Error(\"unable to deserialize the message\"));\n            };\n        }\n        return {\n            workerId,\n            async abort() {\n                timeout && clearTimeout(timeout);\n                await terminate();\n            },\n            async result() {\n                return await new Promise((resolve, reject) => {\n                    if (error) {\n                        reject(error);\n                    }\n                    else if (result) {\n                        resolve(result.value);\n                    }\n                    else {\n                        resolver = { resolve, reject };\n                    }\n                });\n            },\n            async *iterate() {\n                if (resolver) {\n                    throw new Error(\"result() has been called\");\n                }\n                else if (result) {\n                    throw new TypeError(\"the response is not iterable\");\n                }\n                const { EventEmitter } = await Promise.resolve().then(() => require(\"events\"));\n                iterator = new EventEmitter();\n                if (buffer.length) {\n                    (async () => {\n                        await Promise.resolve(null);\n                        let msg;\n                        while (msg = buffer.shift()) {\n                            iterator.emit(\"data\", msg);\n                        }\n                    })().catch(console.error);\n                }\n                for await (const msg of jsext.read(iterator)) {\n                    yield msg;\n                }\n            },\n        };\n    }\n};\nexports.default = jsext;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sequence = exports.random = exports.isBetween = exports.isNumeric = exports.isFloat = void 0;\n/** Returns `true` if the given value is a float number, `false` otherwise. */\nfunction isFloat(value) {\n    return typeof value === \"number\"\n        && !Number.isNaN(value)\n        && (!Number.isFinite(value) || value % 1 !== 0);\n}\nexports.isFloat = isFloat;\n/**\n * Returns `true` if the given value is a numeric value, `false` otherwise. A numeric value is a\n * number, a bigint, or a string that can be converted to a number or bigint.\n */\nfunction isNumeric(value) {\n    let type = typeof value;\n    if (type === \"number\" || type === \"bigint\") {\n        return true;\n    }\n    else if (type === \"string\") {\n        if (!Number.isNaN(value)) {\n            return true;\n        }\n        else {\n            try {\n                BigInt(value);\n                return true;\n            }\n            catch (_a) {\n                return false;\n            }\n        }\n    }\n    return false;\n}\nexports.isNumeric = isNumeric;\n/** Return `true` if a number is between the given range (inclusive). */\nfunction isBetween(value, [min, max]) {\n    return value >= min && value <= max;\n}\nexports.isBetween = isBetween;\n/** Returns a random integer ranged from `min` to `max`. */\nfunction random(min, max) {\n    return min + Math.floor(Math.random() * (max - min + 1));\n}\nexports.random = random;\n/** Creates a generator that produces sequential numbers from `min` to `max` (inclusive). */\nfunction* sequence(min, max, step = 1, loop = false) {\n    let id = min;\n    while (true) {\n        yield id;\n        if (id >= max) {\n            if (loop) {\n                id = min;\n            }\n            else {\n                break;\n            }\n        }\n        else {\n            id += step;\n        }\n    }\n}\nexports.sequence = sequence;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.as = exports.omit = exports.pick = exports.patch = exports.hasOwnMethod = exports.hasOwn = void 0;\nfunction hasOwn(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n}\nexports.hasOwn = hasOwn;\n;\n/**\n * Returns `true` if the specified object has the indicated method as its own method (in its own\n * prototype). If the method is inherited, or is not in the prototype, or does not exist, this\n * function returns `false`.\n */\nfunction hasOwnMethod(obj, method) {\n    var _a;\n    let proto = Object.getPrototypeOf(obj);\n    if (!proto || !hasOwn(proto, method)) {\n        return false;\n    }\n    return typeof ((_a = Object.getOwnPropertyDescriptor(proto, method)) === null || _a === void 0 ? void 0 : _a.value) === \"function\";\n}\nexports.hasOwnMethod = hasOwnMethod;\nfunction patch(target, ...sources) {\n    for (const source of sources) {\n        for (const key of Reflect.ownKeys(source)) {\n            if (!hasOwn(target, key) || target[key] === undefined) {\n                target[key] = source[key];\n            }\n        }\n    }\n    return target;\n}\nexports.patch = patch;\n;\nfunction pick(obj, keys) {\n    return keys.reduce((result, key) => {\n        if (key in obj && obj[key] !== undefined) {\n            result[key] = obj[key];\n        }\n        return result;\n    }, {});\n}\nexports.pick = pick;\nfunction omit(obj, keys) {\n    const allKeys = Reflect.ownKeys(obj);\n    const keptKeys = allKeys.filter(key => !keys.includes(key));\n    const result = pick(obj, keptKeys);\n    // special treatment for Error types\n    if (obj instanceof Error) {\n        [\"name\", \"message\", \"cause\"].forEach(key => {\n            if (!keys.includes(key) &&\n                obj[key] !== undefined &&\n                !hasOwn(result, key)) {\n                result[key] = obj[key];\n            }\n        });\n    }\n    return result;\n}\nexports.omit = omit;\nfunction as(obj, type) {\n    if (typeof type !== \"function\") {\n        throw new TypeError(\"type must be a valid constructor\");\n    }\n    let _type;\n    let primitiveMap = {\n        \"string\": String,\n        \"number\": Number,\n        \"bigint\": BigInt,\n        \"boolean\": Boolean,\n        \"symbol\": Symbol\n    };\n    if (obj instanceof type) {\n        if ([String, Number, Boolean].includes(type)) {\n            return obj.valueOf(); // make sure the primitives are returned.\n        }\n        else {\n            return obj;\n        }\n    }\n    else if ((_type = typeof obj) && primitiveMap[_type] === type) {\n        return obj;\n    }\n    return null;\n}\nexports.as = as;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.until = exports.sleep = exports.after = exports.timeout = void 0;\n/** Try to resolve a promise with a timeout limit. */\nasync function timeout(value, ms) {\n    const result = await Promise.race([\n        value,\n        new Promise((_, reject) => setTimeout(() => {\n            reject(new Error(`operation timeout after ${ms}ms`));\n        }, ms))\n    ]);\n    return result;\n}\nexports.timeout = timeout;\n/** Resolves a promise only after the given duration. */\nasync function after(value, ms) {\n    const [result] = await Promise.allSettled([\n        value,\n        new Promise(resolve => setTimeout(resolve, ms))\n    ]);\n    if (result.status === \"fulfilled\") {\n        return result.value;\n    }\n    else {\n        throw result.reason;\n    }\n}\nexports.after = after;\n/** Blocks the context for a given time. */\nasync function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\nexports.sleep = sleep;\n/** Blocks the context until the test is passed. */\nasync function until(test) {\n    if (typeof globalThis.setImmediate === \"undefined\") {\n        // @ts-ignore\n        globalThis.setImmediate = (cb) => setTimeout(cb, 0);\n    }\n    do {\n        await new Promise(globalThis.setImmediate);\n    } while ((await test()) == false);\n}\nexports.until = until;\n//# sourceMappingURL=index.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isIterable = isIterable;\nexports.isAsyncIterable = isAsyncIterable;\nexports.isIteratorLike = isIteratorLike;\nexports.isIterableIterator = isIterableIterator;\nexports.isAsyncIterableIterator = isAsyncIterableIterator;\nexports.isGenerator = isGenerator;\nexports.isAsyncGenerator = isAsyncGenerator;\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nif (!Symbol.asyncIterator) {\n  Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\");\n}\n\n/**\n * Checks if the given object is an Iterable (implemented `@@iterator`).\n * @returns {obj is Iterable<any>}\n */\nfunction isIterable(obj) {\n  return obj !== null && obj !== undefined && typeof obj[Symbol.iterator] === \"function\";\n}\n\n/**\n * Checks if the given object is an AsyncIterable (implemented `@@asyncIterator`).\n * @returns {obj is AsyncIterable<any>}\n */\nfunction isAsyncIterable(obj) {\n  return obj !== null && obj !== undefined && typeof obj[Symbol.asyncIterator] === \"function\";\n}\n\n/**\n * Checks if the given object is an IteratorLike (implemented `next`).\n * @returns {obj is { next: Function }}\n */\nfunction isIteratorLike(obj) {\n  // An iterable object has a 'next' method, however including a 'next' method\n  // doesn't ensure the object is an iterator, it is only iterator-like.\n  return _typeof(obj) === \"object\" && obj !== null && typeof obj.next === \"function\";\n}\n\n/**\n * Checks if the given object is an IterableIterator (implemented both\n * `@@iterator` and `next`).\n */\nfunction isIterableIterator(obj) {\n  return isIteratorLike(obj) && typeof obj[Symbol.iterator] === \"function\";\n}\n\n/**\n * Checks if the given object is an AsyncIterableIterator (implemented\n * both `@@asyncIterator` and `next`).\n * @returns {obj is AsyncIterableIterator<any>}\n */\nfunction isAsyncIterableIterator(obj) {\n  return isIteratorLike(obj) && typeof obj[Symbol.asyncIterator] === \"function\";\n}\n\n/**\n * Checks if the given object is a Generator.\n * @returns {obj is Generator}\n */\nfunction isGenerator(obj) {\n  return isIterableIterator(obj) && hasGeneratorSpecials(obj);\n}\n\n/**\n * Checks if the given object is an AsyncGenerator.\n * @returns {obj is AsyncGenerator}\n */\nfunction isAsyncGenerator(obj) {\n  return isAsyncIterableIterator(obj) && hasGeneratorSpecials(obj);\n}\nfunction hasGeneratorSpecials(obj) {\n  return typeof obj[\"return\"] === \"function\" && typeof obj[\"throw\"] === \"function\";\n}\n","\"use strict\";\n\n/**\n * Checks if an object could be an instantiable class.\n * @param {any} obj\n * @returns {obj is new (...args: any[]) => any}\n */\nfunction couldBeClass(obj) {\n    if (typeof obj != \"function\") return false;\n\n    // async function or arrow function\n    if (obj.prototype === undefined)\n        return false;\n\n    // generator function and malformed inheritance\n    if (obj.prototype.constructor !== obj)\n        return false;\n\n    // has own prototype properties\n    if (Object.getOwnPropertyNames(obj.prototype).length >= 2)\n        return true;\n\n    var str = String(obj);\n\n    // ES6 class\n    if (str.slice(0, 5) == \"class\")\n        return true;\n\n    // anonymous function\n    if (/^function\\s*\\(|^function anonymous\\(/.test(str))\n        return false;\n\n    var hasThis = /(call|apply|_classCallCheck)\\(this(, arguments)?\\)|\\bthis(.\\S+|\\[.+?\\])\\s*(=|\\()|=\\s*this[,;]/.test(str);\n\n    // Upper-cased first char of the name and has `this` in the body, or it's\n    // a native class in ES5 style.\n    if (/^function\\s+[A-Z]/.test(str) && (hasThis ||\n        (/\\[native code\\]/.test(str) &&\n            obj.name !== \"BigInt\" && // ES6 BigInt and Symbol is not class\n            obj.name !== \"Symbol\"\n        )\n    )) {\n        return true;\n    }\n\n    // TypeScript anonymous class to ES5 with default export\n    if (hasThis && obj.name === \"default_1\")\n        return true;\n\n    return false;\n}\n\nexports.couldBeClass = couldBeClass;\nexports.default = couldBeClass;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isArrayLike = isArrayLike;\nexports.isBufferLike = void 0;\nexports.isCollectionLike = isCollectionLike;\nexports.isDictLike = isDictLike;\nexports.isErrorLike = isErrorLike;\nexports.isObjectIdLike = isObjectIdLike;\nexports.isPromiseLike = isPromiseLike;\nexports.isTypedArrayLike = isTypedArrayLike;\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0) { ; } } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n/**\n * @param {any} value \n * @param {Array<[string|symbol, string]>} props \n * @param {Array<string>} types\n */\nfunction isObjectWith(value) {\n  var isObj = _typeof(value) === \"object\" && value !== null;\n  for (var _len = arguments.length, props = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    props[_key - 1] = arguments[_key];\n  }\n  return isObj && props.every(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      p = _ref2[0],\n      t = _ref2[1];\n    return p in value && _typeof(value[p]) === t;\n  });\n}\nfunction isEmptyDict(obj) {\n  try {\n    var str = JSON.stringify(obj);\n    return str === \"{}\" || str === \"[]\";\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Checks if the input value is a dict `object`, which includes key-value pairs.\n * @returns {value is { [x: string | symbol]: any; }}\n */\nfunction isDictLike(value) {\n  return _typeof(value) === \"object\" && value !== null && (value.constructor === Object || !(value instanceof Date) && !(value instanceof RegExp) && !isArrayLike(value, true) && !isObjectIdLike(value) && !isEmptyDict(value) && !isTypedArrayLike(value) && !isCollectionLike(value) && !isPromiseLike(value));\n}\n\n/**\n * Checks if the input value is an `object` with `length` property or a string.\n * @returns {value is ArrayLike<any>}\n */\nfunction isArrayLike(value) {\n  var strict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (Array.isArray(value)) {\n    return true;\n  } else if (!strict) {\n    return isObjectWith(value, [\"length\", \"number\"]) || typeof value === \"string\";\n  } else if (isObjectWith(value, [\"length\", \"number\"])) {\n    var keys = Object.keys(value);\n    var isNonEnumLength = !keys.includes(\"length\");\n    var indexes;\n    if (value.length === 0 || (indexes = keys.map(Number).filter(isFinite)).length === 0) {\n      return isNonEnumLength;\n    } else {\n      var hasIterator = typeof value[Symbol.iterator] === \"function\";\n      for (var i = value.length; i--;) {\n        if (!indexes.includes(i) && !(isNonEnumLength || hasIterator)) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Checks if the input value is an `object` with `size` property and\n * `[Symbol.iterator]()` method, or is an instance of **WeakMap** or\n * **WeakSet** if `excludeWeakOnes` is not set.\n */\nfunction isCollectionLike(value) {\n  var excludeWeakOnes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return isObjectWith(value, [\"size\", \"number\"], [Symbol.iterator, \"function\"]) || !excludeWeakOnes && (value instanceof WeakMap || value instanceof WeakSet);\n}\n\n/**\n * \n * @returns {value is ArrayLike<number> & Pick<Uint8Array, \"byteLength\" | \"slice\">}\n */\nfunction isTypedArrayLike(value) {\n  return isObjectWith(value, [\"byteLength\", \"number\"], [\"slice\", \"function\"]);\n}\n\n/** @deprecated An alias of `isTypedArrayLike`. */\nvar isBufferLike = isTypedArrayLike;\n\n/**\n * Checks if the input value is an `object` with `name`, `message` and `stack`\n * properties.\n * @returns {value is Error}\n */\nexports.isBufferLike = isBufferLike;\nfunction isErrorLike(value) {\n  return isObjectWith(value, [\"name\", \"string\"], [\"message\", \"string\"], [\"stack\", \"string\"]);\n}\n\n/**\n * Checks if the input is an `object` with `then()` method.\n * @returns {value is PromiseLike<any>}\n */\nfunction isPromiseLike(value) {\n  return isObjectWith(value, [\"then\", \"function\"]);\n}\nfunction isObjectIdLike(value) {\n  return _typeof(value) === \"object\" && value !== null && (value.constructor.name === \"ObjectId\" || value.constructor.name === \"ObjectID\");\n}\n","import { isArrayLike, isBufferLike, isCollectionLike } from \"is-like\";\n\nconst bytes: (str: string) => number = require(\"utf8-length\");\nconst encoder = typeof TextEncoder === \"function\" ? new TextEncoder() : null;\n\nexport default count;\n\n/** Counts the length of a string. */\nfunction count(str: string, byteLength?: boolean): number;\n/** Counts how many times a substring appeared in the given string. */\nfunction count(str: string, substr: string): number;\n/** Counts the length of an array-like object. */\nfunction count<T>(arr: ArrayLike<T>): number;\n/** Counts how many times an element appeared in the given array-like object. */\nfunction count<T>(arr: ArrayLike<T>, ele: T): number;\n/** Counts the size of a collection. */\nfunction count(collection: Map<any, any> | Set<any>): number;\n/** Counts the capacity of an object (of how many properties it has). */\nfunction count(obj: any): number;\nfunction count(target: any, option: any = void 0) {\n    if (typeof target === \"string\") {\n        if (typeof option === \"string\") {\n            if (!option) {\n                return target.length + 1;\n            } else if (!target) {\n                return 0;\n            }\n\n            return target.split(option).length - 1;\n        } else if (option === true) {\n            if (typeof Buffer === \"function\" &&\n                typeof Buffer.byteLength === \"function\"\n            ) {\n                return Buffer.byteLength(target);\n            } else if (encoder) {\n                return encoder.encode(target).byteLength;\n            } else {\n                return bytes(target);\n            }\n        } else {\n            return target.length;\n        }\n    } else if (isArrayLike(target, true)) {\n        if (arguments.length === 2) {\n            let times = 0;\n\n            for (let i = target.length; i--;) {\n                // treat 0 equals -0 and NaN equals NaN\n                if (target[i] === option || Object.is(target[i], option)) {\n                    times++;\n                }\n            }\n\n            return times;\n        } else {\n            return target.length;\n        }\n    } else if (isBufferLike(target)) {\n        return target.byteLength;\n    } else if (isCollectionLike(target, true)) {\n        return target.size;\n    } else {\n        return Object.keys(target).length;\n    }\n}\n","import typeOf from './typeOf';\n\n/**\n * Sets a property on the target object.\n * @param value Normally this is the value bound to the property, however, it\n *  could be used to set the getter and the setter using the signature\n *  `{ get: Function, set?: Function }`.\n * @param enumerable By default, the property is non-enumerable and can't be\n *  seen by the console, use this option to make it enumerable and visible to\n *  the console.\n * @param writable By default, the property is readonly once set, use this\n *  option to allow it being writable.\n *  **This property doesn't work with setter.**\n */\nexport default function define(\n    obj: any,\n    prop: string | symbol,\n    value: any,\n    enumerable = false,\n    writable = false,\n): void {\n    if ((typeOf(value) as any) === Object) {\n        if (isGetter(value) || isGetterAndSetter(value)) {\n            Object.defineProperty(obj, prop, {\n                configurable: true,\n                enumerable,\n                ...value\n            });\n            return;\n        }\n    }\n\n    Object.defineProperty(obj, <string | symbol>prop, {\n        configurable: true,\n        enumerable,\n        writable,\n        value\n    });\n}\n\nfunction isGetter(obj: any) {\n    return String(Object.keys(obj)) === \"get\"\n        && typeof obj[\"get\"] === \"function\";\n}\n\nfunction isGetterAndSetter(obj: any) {\n    let sign = String(Object.keys(obj));\n    return (sign === \"get,set\" || sign === \"set,get\")\n        && typeof obj[\"get\"] === \"function\"\n        && typeof obj[\"set\"] === \"function\";\n}\n","import { isDictLike } from \"is-like\";\nimport isEmpty from './isEmpty';\nimport isVoid from './isVoid';\n\n\n/**\n * Creates an array that contains the difference set between `origin` and\n * `input`;\n */\nexport default function diff<T>(origin: T[], input: T[]): T[];\n/**\n * Evaluates the differences between `origin` and `input`, if a property exists\n * in both objects and the values are not equal, the `input` one will be taken.\n * \n * NOTE: This function treats all void values equal and will not differ them.\n */\nexport default function diff<T, U>(origin: T, input: U): Diff<T, U>;\nexport default function diff<T, U>(origin: T, input: U, deep: true): DeepPartial<T & U>;\nexport default function diff(origin: any, input: any, deep = false) {\n    if (Array.isArray(origin) && Array.isArray(input)) {\n        return [\n            ...input.filter(value => !origin.includes(value)),\n            ...origin.filter(value => !input.includes(value))\n        ];\n    } else if (isDictLike(origin) && isDictLike(input)) {\n        let keys = Reflect.ownKeys(input);\n        let _keys = Reflect.ownKeys(origin);\n        let result: any = {};\n\n        keys.forEach(key => {\n            if (origin[key] !== input[key] &&\n                !(isVoid(origin[key]) && isVoid(input[key])) // ignore void values\n            ) {\n                if (deep &&\n                    typeof origin[key] === \"object\" && origin[key] !== null &&\n                    typeof input[key] === \"object\" && input[key] !== null\n                ) {\n                    let _result = diff(origin[key], input[key], deep);\n\n                    if (!isEmpty(_result)) {\n                        result[key] = _result;\n                    }\n                } else {\n                    result[key] = input[key];\n                }\n            }\n        });\n\n        _keys.forEach(key => {\n            keys.includes(key) || (result[key] = origin[key]);\n        });\n\n        return result;\n    } else {\n        return input;\n    }\n}\n","import { isArrayLike, isDictLike } from 'is-like';\nimport isBetween from './isBetween';\nimport keysOf from './keysOf';\n\nconst truePattern = /^\\s*(true|yes|on)\\s*$/i;\nconst falsePattern = /^\\s*(false|no|off)\\s*$/i;\nconst nullPattern = /^\\s*(null|nil|none|void|undefined)\\s*$/i;\nconst nanPattern = /^\\s*NaN\\s*$/;\nconst infinityPattern = /^\\s*-?Infinity\\s*/;\nconst regexPattern = /^\\s*\\/(.+)\\/([gimuys]*)\\s*$/;\nconst numberInterval: [number, number] = [\n    Number.MIN_SAFE_INTEGER,\n    Number.MAX_SAFE_INTEGER\n];\n\n/**\n * Casts the target object or its contents to the closest types automatically.\n * This function is useful when reading config from a file or fetching data from\n * the web.\n */\nexport default function ensureType(target: any): any {\n    switch (typeof target) {\n        case \"string\": {\n            let re: RegExpMatchArray | null;\n\n            if (truePattern.test(target)) {\n                return true;\n            } else if (falsePattern.test(target)) {\n                return false;\n            } else if (nullPattern.test(target)) {\n                return null;\n            } else if (nanPattern.test(target)) {\n                return NaN;\n            } else if (infinityPattern.test(target)) {\n                return Number(target);\n            } else if (re = target.match(regexPattern)) {\n                return new RegExp(re[1] as string, re[2]);\n            } else {\n                let num = Number(target);\n\n                if (!isNaN(num) &&\n                    isBetween(num, numberInterval) &&\n                    target[0] !== \"+\" // Most likely a telephone number.\n                ) {\n                    return num;\n                } else {\n                    return target;\n                }\n            }\n        }\n\n        case \"object\": {\n            if (target === null) {\n                return null;\n            } else if (isArrayLike(target, true)) {\n                return ensureArray(target).map(ensureType);\n            } else if (isDictLike(target)) {\n                return keysOf(target).reduce((result, key) => {\n                    result[key] = ensureType(target[key]);\n                    return result;\n                }, <Record<string | symbol, any>>{});\n            } else {\n                return target;\n            }\n        }\n\n        default:\n            return target;\n    }\n}\n\nexport function ensureArray<T>(value: ArrayLike<T>): T[] {\n    return Array.isArray(value) ? value : Array.from(value);\n}\n","import isVoid from './isVoid';\nimport type { Constructor, TypedArray } from \"@ayonli/jsext\";\nimport { isDictLike, isArrayLike, isBufferLike } from 'is-like';\n\ntype OmitChildrenNodes<T> = Pick<T, {\n    [K in keyof T]: T[K] extends TypedArray\n    ? K\n    : T[K] extends (any[] | ArrayLike<any> | Function | Constructor<any> | Map<any, any> | Set<any> | Promise<any> | TypedArray)\n    ? K\n    : T[K] extends object\n    ? never\n    : K;\n}[keyof T]>;\n\ntype OmitChildrenElements<T> = Pick<T, {\n    [K in keyof T]: T[K] extends TypedArray\n    ? K\n    : T[K] extends (Function | Constructor<any> | Map<any, any> | Set<any> | Promise<any> | TypedArray)\n    ? K\n    : T[K] extends (object | any[] | ArrayLike<any>)\n    ? never\n    : K;\n}[keyof T]>;\n\n/**\n * Create an object with flatted properties of the original object, the children\n * nodes' properties will be transformed to a string-represented path.\n * NOTE: this function also flat array/array-like nodes (except for TypedArray).\n * @param depth Default value: `1`.\n * @example\n *  flatObject({ foo: { bar: \"Hello, World!\" } }) === { \"foo.bar\": \"Hello, World!\" }\n */\nexport default function flatObject<T extends object>(\n    obj: T,\n    depth?: number\n): OmitChildrenNodes<T> & Record<string | symbol, any>;\nexport default function flatObject<T extends object>(\n    obj: T,\n    depth: number,\n    flatArray: true\n): OmitChildrenElements<T> & Record<string | symbol, any>;\nexport default function flatObject(obj: any, depth = 1, flatArray = false) {\n    return flatDeep({}, obj, \"\", 0, depth, flatArray);\n}\n\nfunction flatDeep(\n    carrier: any,\n    source: any,\n    field: string,\n    depth: number,\n    maxDepth: number,\n    flatArray: boolean\n) {\n    let isArr: boolean | undefined;\n    let isDict: boolean | undefined;\n    let isContent = !isVoid(field) && field !== \"\";\n\n    if (depth === maxDepth || (\n        !(isArr = isArrayLike(source, true) && !isBufferLike(source)) &&\n        !(isDict = isDictLike(source))\n    )) {\n        carrier[field] = source;\n    } else if (isDict) {\n        Reflect.ownKeys(<object>source).forEach(key => {\n            let value = (<any>source)[key];\n\n            if (typeof key === \"symbol\") {\n                if (depth === 0) { // only allow top-level symbol properties\n                    carrier[key] = value;\n                }\n            } else {\n                flatDeep(\n                    carrier,\n                    value,\n                    isContent ? `${field}.${key}` : key,\n                    isContent ? depth + 1 : depth,\n                    maxDepth,\n                    flatArray\n                );\n            }\n        });\n    } else if (isArr) {\n        if (flatArray) {\n            for (let i = 0, len = (<any[]>source).length; i < len; ++i) {\n                flatDeep(\n                    carrier,\n                    (<any[]>source)[i],\n                    isContent ? `${field}.${i}` : String(i),\n                    isContent ? depth + 1 : depth,\n                    maxDepth,\n                    flatArray\n                );\n            }\n        } else {\n            carrier[field] = source;\n        }\n    }\n\n    return carrier;\n}\n","import type { Ensured } from \"@ayonli/jsext\";\n\nexport type Global = Ensured<Partial<Window & typeof globalThis>, keyof Window & typeof globalThis>;\n\n/** Gets the global object of the host environment. */\nexport default function getGlobal(): Global;\n/** Returns a property from the global object. */\nexport default function getGlobal<P extends keyof Global>(prop: P): Global[P];\n/** Returns a property from the global object. */\nexport default function getGlobal(prop: string): any;\nexport default function getGlobal(prop: string | undefined = void 0): any {\n    let _global: Global & { [prop: string]: any; } | undefined;\n\n    if (typeof globalThis === \"object\") {\n        _global = <any>globalThis;\n    } else if (typeof self === \"object\") {\n        _global = self;\n    } else if (typeof global === \"object\") {\n        _global = <any>global;\n    } else if (typeof window === \"object\") {\n        _global = window;\n    }\n\n    return _global && (prop ? _global[prop] : _global);\n}\n","import { isBetween as _isBetween } from \"@ayonli/jsext/number\";\n\n/** @deprecated use `Number.isBetween` from `@ayonli/jsext/number/augment` instead. */\nconst isBetween = _isBetween;\nexport default isBetween;\n","import { isArrayLike, isBufferLike, isCollectionLike } from \"is-like\";\n\nconst BaseEmptyPrimitives: any[] = [\"\", NaN, null, void 0];\nconst EmptyPrimitives: any[] = [...BaseEmptyPrimitives, 0, false];\n\nif (typeof BigInt === \"function\")\n    EmptyPrimitives.push(BigInt(\"0\"));\n\n/**\n * Checks if the value resolves to an empty object or a falsy value.\n */\nexport default function isEmpty(value: any, deep = false): boolean {\n    return test(value, Boolean(deep), EmptyPrimitives);\n}\n\nfunction test(\n    value: any,\n    deep: boolean,\n    emptyPrimitives: any[]\n): boolean {\n    if (emptyPrimitives.includes(value))\n        return true;\n\n    if (typeof value === \"object\") {\n        if (value instanceof RegExp) {\n            return false;\n        } else if (value instanceof Date) {\n            return String(value) === \"Invalid Date\";\n        } else if (value instanceof Error) {\n            return value.message.length === 0;\n        } else if (isBufferLike(value)) {\n            return value.byteLength === 0;\n        } else if (isArrayLike(value, true)) {\n            if (value.length === 0) {\n                return true;\n            } else if (!deep) {\n                return false;\n            } else {\n                for (let i = 0, len = value.length; i < len; ++i) {\n                    if (!test(value[i], deep, BaseEmptyPrimitives)) {\n                        return false;\n                    }\n                }\n\n                return true;\n            }\n        } else if (isCollectionLike(value, true)) {\n            if (value.size === 0) {\n                return true;\n            } else if (!deep) {\n                return false;\n            } else {\n                if (value instanceof Map) {\n                    for (let v of value.values()) {\n                        if (!test(v, deep, BaseEmptyPrimitives)) {\n                            return false;\n                        }\n                    }\n\n                    return true;\n                } else if (value instanceof Set) {\n                    for (let v of value) {\n                        if (!test(v, deep, BaseEmptyPrimitives)) {\n                            return false;\n                        }\n                    }\n\n                    return true;\n                }\n\n                return false;\n            }\n        } else {\n            let keys = Reflect.ownKeys(value);\n\n            if (keys.length === 0) {\n                return true;\n            } else if (!deep) {\n                return false;\n            } else {\n                return keys.every(\n                    k => test(value[k], deep, BaseEmptyPrimitives)\n                );\n            }\n        }\n    }\n\n    return false;\n}\n","import { isFloat as _isFloat } from \"@ayonli/jsext/number\";\n\n/** @deprecated use `Number.isFloat` from `@ayonli/jsext/number/augment` instead. */\nconst isFloat = _isFloat as (value: any) => value is number;\nexport default isFloat;\n","/**\n * Checks if the value is an integer number (or bigint).\n * \n * @deprecated use `Number.isInteger` instead.\n */\nexport default function isInteger(value: any): value is (number | bigint) {\n    return typeof value === \"bigint\" || Number.isInteger(value);\n}\n","import { isNumeric as _isNumeric } from \"@ayonli/jsext/number\";\n\n/** @deprecated use `Number.isNumeric` from `@ayonli/jsext/number/augment` instead. */\nconst isNumeric = _isNumeric;\nexport default isNumeric;\n","import { hasOwn } from \"@ayonli/jsext/object\";\n\n/** @deprecated use `Object.hasOwn` from `@ayonli/jsext/object/augment` instead. */\nconst isOwnKey = hasOwn;\nexport default isOwnKey;\n","import { hasOwnMethod } from \"@ayonli/jsext/object\";\n\n/** @deprecated use `Object.hasOwnMethod` from `@ayonli/jsext/object/augment` instead. */\nconst isOwnMethod = hasOwnMethod;\nexport default isOwnMethod;\n","import jsext from \"@ayonli/jsext\";\n\n/** @deprecated use `jsext.jsSubclassOf() from `@ayonli/jsext` instead. */\nconst isSubClassOf = jsext.isSubclassOf;\nexport default isSubClassOf;\n","/**\n * Checks if a value is resolved to void (`null`, `undefined` or `NaN`).\n */\nexport default function isVoid(value: any): value is void {\n    return value === null || value === undefined || Object.is(value, NaN);\n}","/** Returns the indexes of the given array. */\nexport default function keysOf<T extends any[]>(arr: T): number[];\n/** Returns an array of the given function's own properties. */\nexport default function keysOf<T extends Function>(fn: T): (string | symbol)[];\n/** Returns an array of the given object's own properties. */\nexport default function keysOf<T extends object>(obj: T): (keyof T | symbol)[];\nexport default function keysOf(obj: object): (string | number | symbol)[] {\n    if (Array.isArray(obj)) {\n        return obj.map((_, i) => i);\n    } else {\n        return Reflect.ownKeys(obj);\n    }\n}\n","import { omit as _omit } from \"@ayonli/jsext/object\";\n\n/** Creates an array composed without the picked items. */\nexport default function omit<T extends any>(arr: T[], items: T[]): T[];\n/**\n * Creates an object composed without the picked properties.\n * NOTE: this function will collect both the own keys and the enumerable\n * properties from the prototype chain.\n * \n * @deprecated use `Object.omit` from `@ayonli/jsext/object/augment` instead.\n */\nexport default function omit<T extends object, U extends keyof T>(obj: T, props: U[]): Omit<T, U>;\n/**\n * @deprecated use `Object.omit` from `@ayonli/jsext/object/augment` instead.\n */\nexport default function omit<T>(obj: T, props: (string | symbol)[]): Partial<T>;\nexport default function omit(obj: any, props: (string | number | symbol)[]) {\n    if (Array.isArray(obj)) {\n        return obj.filter(i => !props.includes(i));\n    } else {\n        return _omit(obj, props);\n    }\n}\n","import isVoid from \"./isVoid\";\nimport isEmpty from \"./isEmpty\";\nimport { isArrayLike, isBufferLike } from 'is-like';\n\n/**\n * Creates an object composed with only the non-void properties.\n * @param omitEmptyObjects If set, empty properties of type `object` will be\n *  removed as well.\n * @param omitEmptyStrings If set, empty properties of type `string` will be\n *  removed as well.\n */\nexport default function omitVoid<T>(\n    target: T,\n    deep = false,\n    omitEmptyObjects = false,\n    omitEmptyStrings = false\n): T {\n    return doOmit(target, deep, omitEmptyObjects, omitEmptyStrings, 0) as T;\n}\n\nexport function doOmit<T extends any>(\n    target: T,\n    deep: boolean,\n    omitEmptyObjects: boolean,\n    omitEmptyStrings: boolean,\n    depth: number\n): T | undefined {\n    if (typeof target === \"string\") {\n        return omitEmptyStrings && target.trim() === \"\"\n            ? (depth > 0 ? void 0 : \"\" as T)\n            : target;\n    } else if (target === null\n        || typeof target !== \"object\"\n        || target instanceof Date\n        || target instanceof Error\n        || target instanceof RegExp\n        || isBufferLike(target)\n    ) {\n        return target;\n    } else if (omitEmptyObjects && isEmpty(target)) {\n        return depth > 0 ? void 0 : (isArrayLike(target, true) ? [] : {}) as any;\n    }\n\n    if (isArrayLike(target, true)) {\n        let arr: any[] = [];\n\n        for (let i = 0, len = (<ArrayLike<any>>target).length; i < len; ++i) {\n            let value = target[i];\n\n            if (!isVoid(value)) {\n                if (deep) {\n                    value = doOmit(\n                        value,\n                        deep,\n                        omitEmptyObjects,\n                        omitEmptyStrings,\n                        depth + 1);\n                    isVoid(value) || arr.push(value);\n                } else {\n                    arr.push(value);\n                }\n            }\n        }\n\n        if (depth > 0 && omitEmptyObjects && isEmpty(arr)) {\n            return void 0;\n        } else {\n            return arr as any;\n        }\n    } else {\n        let obj = Reflect.ownKeys(target as object).reduce((obj, key) => {\n            let value = (target as any)[key];\n\n            if (!isVoid(value)) {\n                if (deep) {\n                    value = doOmit(\n                        value,\n                        deep,\n                        omitEmptyObjects,\n                        omitEmptyStrings,\n                        depth + 1);\n                    isVoid(value) || ((obj as any)[key] = value);\n                } else {\n                    (obj as any)[key] = value;\n                }\n            }\n\n            return obj;\n        }, <T>{});\n\n        if (depth > 0 && omitEmptyObjects && isEmpty(obj)) {\n            return void 0;\n        } else {\n            return obj;\n        }\n    }\n}\n","import { isDictLike } from 'is-like';\nimport isEmpty from './isEmpty';\nimport isVoid from './isVoid';\n\n\n/**\n * Patches the differences onto the `origin` object from the `input` object. If\n * a property exists in both objects and the values are not equal, the `input`\n * one will be taken. However, those properties that are only presents in the\n * `origin` object will remain untouched.\n * \n * NOTE: This function mutates the `origin` object and returns the patched\n * differences, when patching, any void value in the `input` object will be\n * ignored.\n * \n * This function is very useful, for example, a client issued a patch of the\n * resource and the server wants to know what properties has been modified by\n * this update so that it can perform some extra operations to provide a better\n * user experience.\n */\nexport default function patch<T, U>(\n    origin: T,\n    input: U,\n    deep = false,\n    ignoreEmptyStrings = false,\n): T & Partial<U> {\n    return doPatch(origin, input, deep, ignoreEmptyStrings, false);\n}\n\nfunction doPatch(\n    origin: any,\n    input: any,\n    deep: boolean,\n    ignoreEmptyStrings: boolean,\n    isChildNode: boolean\n) {\n    if (isDictLike(origin) && isDictLike(input)) {\n        let keys = Reflect.ownKeys(input);\n        let result: any = {};\n\n        keys.forEach(key => {\n            if (origin[key] !== input[key] &&\n                !isVoid(input[key]) && // ignore invalid values\n                (!ignoreEmptyStrings || input[key] !== \"\")\n            ) {\n                if (deep && isDictLike(origin[key]) && isDictLike(input[key])) {\n                    let _result = doPatch(\n                        origin[key],\n                        input[key],\n                        deep,\n                        ignoreEmptyStrings,\n                        true\n                    );\n\n                    if (!isEmpty(_result)) {\n                        result[key] = _result;\n                        Object.assign(origin[key], input[key]);\n                    }\n                } else {\n                    result[key] = origin[key] = input[key];\n                }\n            }\n        });\n\n        return result;\n    } else if (isChildNode) {\n        return input;\n    } else {\n        return {};\n    }\n}\n","import { pick as _pick } from \"@ayonli/jsext/object\";\n\n/** Creates an array composed of the picked elements. */\nexport default function pick<T extends any[]>(arr: T, indexes: number[]): T;\n/**\n * Creates an object composed of the picked properties.\n * \n * @deprecated use `Object.pick` from `@ayonli/jsext/object/augment` instead.\n */\nexport default function pick<T extends object, U extends keyof T>(obj: T, props: U[]): Pick<T, U>;\n/**\n * @deprecated use `Object.pick` from `@ayonli/jsext/object/augment` instead.\n */\nexport default function pick<T>(obj: T, props: (string | symbol)[]): Partial<T>;\nexport default function pick(obj: any, props: (string | number | symbol)[]) {\n    if (Array.isArray(obj)) {\n        return (<number[]>props).map(i => obj[i]);\n    } else {\n        return _pick(obj, props);\n    }\n}\n","import { random } from \"@ayonli/jsext/number\";\n\n/** @deprecated use `Number.random` from `@ayonli/jsext/number/augment` instead. */\nconst rand = random;\nexport default rand;\n","import rand from './rand';\n\n/** \n * Generates a random string.\n * @param chars The possible characters.\n * @deprecated use `String.random` from `@ayonli/jsext/string/augment` instead.\n */\nexport default function randStr(\n    length: number,\n    chars = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n) {\n    let str = \"\";\n    let max = chars.length - 1;\n\n    while (0 < length--) {\n        str += chars[rand(0, max)];\n    }\n\n    return str;\n}\n","import { sleep as _sleep } from \"@ayonli/jsext/promise\";\n\n/** @deprecated use `Promise.sleep` from `@ayonli/jsext/promise/augment` instead. */\nconst sleep = _sleep;\nexport default sleep;\n","import { isArrayLike, isDictLike } from 'is-like';\nimport { ensureArray } from \"./ensureType\";\n\ndeclare var Deno: any;\n\n/**\n * Creates a new array with sorted elements of the original array, the sorted\n * array is in ascending order by default, unless providing a `compare` function\n * to determine how should the elements be ordered.\n * Unlike `Array.prototype.sort()`, this function always guarantees a stable\n * sort; and if all elements are numbers, they're sorted by their values instead\n * of converting to strings for sorting.\n */\nexport default function sort<T>(arr: ArrayLike<T>, compare?: (a: T, b: T) => number): T[];\n/**\n * Creates a new object with sorted keys (in ascending order) of the original\n * object, if `deep` is set, the children nodes will be sorted as well.\n * Note: symbol keys are not sorted and remain their original order.\n */\nexport default function sort<T extends object>(obj: T, deep?: boolean): T;\nexport default function sort(\n    target: any | any[],\n    method: ((a: any, b: any) => number) | boolean | undefined = void 0\n) {\n    if (isArrayLike(target, true)) {\n        let arr = ensureArray(target);\n        let compare = <(a: any, b: any) => number>method;\n\n        // If the compare function is omitted and all the elements are numbers\n        // (or of bigint), sort them by their values.\n        if (!compare && (onlyNumbers(arr) || onlyNumbers(arr, \"bigint\"))) {\n            compare = (a: number, b: number) => a - b;\n        }\n\n        if (shouldUseNativeSort(arr)) {\n            return arr.sort(compare);\n        }\n\n        // Emulate stable sort.\n        // Reference: http://blog.vjeux.com/2010/javascript/javascript-sorting-table.html\n        return arr\n            .map((value, index) => ({ value, index }))\n            .sort((a, b) => compare(a.value, b.value) || a.index - b.index)\n            .map(({ value }) => value);\n    } else if (isDictLike(target)) {\n        let deep = Boolean(method);\n        let keys = [\n            ...sort(Object.getOwnPropertyNames(target)), // sort the string keys\n            ...Object.getOwnPropertySymbols(target)\n        ];\n\n        return keys.reduce((result, key) => {\n            let value = target[key];\n\n            if (deep) {\n                if (isArrayLike(value, true)) {\n                    value = ensureArray(value).map(item => {\n                        return isDictLike(item) ? sort(item, deep) : item;\n                    });\n                } else if (isDictLike(value)) {\n                    value = sort(value, deep);\n                }\n            }\n\n            result[key] = value;\n            return result;\n        }, {} as any);\n    } else {\n        if (typeof method === \"function\") {\n            throw new TypeError(\"The target to sort is not an array\");\n        } else if (typeof method === \"boolean\") {\n            throw new TypeError(\"The target to sort is not a pure object\");\n        } else {\n            throw new TypeError(\n                \"The target to sort is not an array or a pure object\"\n            );\n        }\n    }\n}\n\nfunction onlyNumbers(arr: any[], type: \"number\" | \"bigint\" = \"number\") {\n    return arr.every(ele => typeof ele === type);\n}\n\nfunction shouldUseNativeSort(arr: any[]) {\n    if (typeof process === \"object\" && typeof process.versions === \"object\") {\n        return arr.length <= 10\n            || parseFloat(process.versions.v8 || \"0\") >= 7.0;\n    } else if (typeof Deno === \"object\") {\n        return true;\n    } else if (typeof navigator === \"object\"\n        && typeof navigator.userAgent === \"string\"\n    ) {\n        let match = navigator.userAgent.match(\n            /(Chrome|Firefox|Safari|Edge|OPR)\\/(\\d+)/\n        );\n\n        if (match) {\n            let name = match[1];\n            let version = parseFloat(match[2] as string);\n\n            if ((name === \"Edge\" && arr.length <= 512) ||\n                (name === \"Chrome\" && (version >= 70) || arr.length <= 10) ||\n                (name === \"Firefox\" && version >= 3) ||\n                (name === \"Safari\" && version >= 10.1) ||\n                (name === \"OPR\" && version >= 54)\n            ) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n","import { isArrayLike, isBufferLike, isCollectionLike } from \"is-like\";\nimport type { RealArrayLike } from \"@ayonli/jsext/array\";\nimport type { TypedArray } from \"@ayonli/jsext\";\n\nfunction checkNumberArgument(name: string, value: any) {\n    if (typeof value !== \"number\") {\n        throw new TypeError(`argument '${name}' must be a number`);\n    } else if (value < 1) {\n        throw new RangeError(`argument '${name}' must be 1 or higher`);\n    }\n}\n\nfunction splitArrayLike(arr: ArrayLike<any>, length: number, total: number | undefined = void 0) {\n    let result: any[] = [];\n\n    for (let i = 0, j = (total || arr.length); i < j; i += length) {\n        if (typeof (arr as RealArrayLike<any>).slice === \"function\") {\n            result.push((arr as RealArrayLike<any>).slice(i, i + length));\n        } else {\n            result.push(Array.prototype.slice.call(arr, i, i + length));\n        }\n    }\n\n    return result;\n}\n\nfunction splitBuffer(buf: Buffer, sep: string | Buffer) {\n    let result: Buffer[] = [];\n    let offset = 0;\n    let length = sep.length;\n    let total = buf.byteLength;\n\n    while (offset < total) {\n        let index = buf.indexOf(sep, offset);\n\n        if (index !== -1) {\n            result.push(buf.slice(offset, index));\n            offset = index + length;\n        } else {\n            result.push(buf.slice(offset));\n            offset = total;\n        }\n    }\n\n    return result;\n}\n\nfunction splitObject(obj: any, size: number) {\n    let proto = Object.getPrototypeOf(obj);\n    let keyChunks = splitArrayLike(Object.keys(obj), size);\n    let result = [];\n\n    for (let keys of keyChunks) {\n        let chunk = Object.create(proto);\n        result.push(chunk);\n\n        for (let key of keys) {\n            chunk[key] = obj[key];\n        }\n    }\n\n    return result;\n}\n\nfunction splitNumber(num: number, step: number) {\n    let result: number[] = [];\n    let offset = 0;\n\n    while ((offset += step) <= num) {\n        result.push(offset);\n    }\n\n    if (num > offset - step) {\n        result.push(num);\n    }\n\n    return result;\n}\n\n/** Splits a string into chunks by the given separator. */\nexport default function split(str: string, separator: string | RegExp): string[];\n/** Splits a string into chunks with the given length. */\nexport default function split(str: string, length: number): string[];\n/** Splits a number into serials with the given step. */\nexport default function split(num: number, step: number): number[];\n/** Splits a Buffer into chunks by the given separator. */\nexport default function split<T extends Buffer>(buf: T, separator: string | Buffer): T[];\n/** Splits a Buffer, an ArrayBuffer, or a TypedArray into chunks with the given byteLength. */\nexport default function split<T extends Buffer | ArrayBufferLike | TypedArray>(buf: T, byteLength: number): T[];\n/** Splits an array into chunks of arrays with the given length. */\nexport default function split<T extends Array<any>>(arr: T, length: number): T[];\n/** Splits an array-like object into chunks of arrays with the given length. */\nexport default function split<T>(list: ArrayLike<T>, length: number): T[][];\n/** Splits a collection into chunks with the given size. */\nexport default function split<T extends Set<any> | Map<any, any>>(collection: T, size: number): T[];\n/** Splits an object into multiple objects with partial properties. */\nexport default function split<T extends object>(obj: T extends Function ? never : T, size: number): Partial<T>[];\nexport default function split(obj: any, sep: any) {\n    if (arguments.length < 2) {\n        throw new SyntaxError(`2 arguments required, received ${arguments.length}`);\n    } else if (typeof obj === \"string\") {\n        if (typeof sep === \"string\" || sep instanceof RegExp) {\n            return obj.split(sep);\n        } else {\n            checkNumberArgument(\"length\", sep);\n            return splitArrayLike(obj, sep);\n        }\n    } else if (typeof obj === \"number\") {\n        checkNumberArgument(\"step\", sep);\n        return splitNumber(obj, sep);\n    } else if (typeof Buffer === \"function\"\n        && Buffer.isBuffer(obj)\n        && (typeof sep === \"string\" || Buffer.isBuffer(sep))\n    ) {\n        return splitBuffer(obj, sep);\n    } else if (isBufferLike(obj)) {\n        checkNumberArgument(\"byteLength\", sep);\n        return splitArrayLike(obj, sep, obj.byteLength);\n    } else if (isArrayLike(obj, true)) {\n        checkNumberArgument(\"length\", sep);\n        return splitArrayLike(obj, sep);\n    } else if (isCollectionLike(obj)) {\n        let ctor = obj[\"constructor\"];\n        checkNumberArgument(\"size\", sep);\n        return splitArrayLike([...obj], sep).map(list => new ctor(list));\n    } else if (typeof obj === \"object\" && obj !== null) {\n        checkNumberArgument(\"size\", sep);\n        return splitObject(obj, sep);\n    } else {\n        throw new TypeError(\"argument 'obj' must be a string, a number or an object\");\n    }\n}\n","import isNumeric from './isNumeric';\nimport isVoid from './isVoid';\n\nexport default timestamp;\n\n/** Returns the current UNIX timestamp. */\nfunction timestamp(ms?: boolean): number;\n/**\n * Returns the UNIX timestamp according the input date or time.\n * \n * TIP: since v0.2.3, this function supports the date string format in\n * `<year>,<monthIndex>,[date],[hours],[minutes],[seconds],[milliseconds]`,\n * which segments is used as arguments for `Date` constructor.\n * \n * NOTE: if the input value is a number, it must be of milliseconds.\n */\nfunction timestamp(input: string | number | Date, ms?: boolean): number;\nfunction timestamp(input: any, ms = false) {\n    if (typeof input === \"boolean\") {\n        ms = input;\n        input = void 0;\n    }\n\n    input = input || new Date();\n\n    if (input instanceof Date) {\n        return ms ? input.valueOf() : Math.floor(input.valueOf() / 1000);\n    } else if (typeof input === \"number\") {\n        return ms ? input : Math.floor(input / 1000);\n    } else {\n        let date: Date;\n        let dateTime = String(input).trim();\n\n        if (dateTime.includes(\",\") && dateTime.split(\",\").every(isNumeric)) {\n            date = parseDateRawArgs(dateTime);\n        } else {\n            if (/^\\d{1,2}:\\d{2}(:\\d{2})?/.test(dateTime)) { // time only\n                date = new Date();\n                dateTime = date.getFullYear()\n                    + \"-\" + (date.getMonth() + 1)\n                    + \"-\" + date.getDate()\n                    + \" \" + dateTime;\n            }\n\n            date = new Date(dateTime);\n        }\n\n        if (String(date) !== \"Invalid Date\") {\n            return ms ? date.valueOf() : Math.floor(date.valueOf() / 1000);\n        } else {\n            throw new Error(\"The input argument is not a valid date-time string\");\n        }\n    }\n}\n\nfunction parseDateRawArgs(str: string) {\n    let [Y, M, D, H, m, s, ms] = str.split(\",\").map(Number);\n    let date = new Date();\n\n    isVoid(Y) || date.setFullYear(Y);\n    isVoid(M) || date.setMonth(M);\n    isVoid(D) || date.setDate(D);\n    isVoid(H) || date.setHours(H);\n    isVoid(m) || date.setMinutes(m);\n    isVoid(s) || date.setSeconds(s);\n    isVoid(ms) || date.setMilliseconds(ms);\n\n    return date;\n}","import { isArrayLike, isDictLike } from \"is-like\";\nimport { ensureArray } from \"./ensureType\";\n\n/**\n * Trims the leading and tailing spaces of a string, the string properties of\n * an object, or the string and object elements in an array.\n */\nexport default function trim<T extends any>(target: T, deep = false): T extends string ? string : T {\n    if (typeof target === \"string\") {\n        return target.trim() as any;\n    } else if (isArrayLike(target, true)) {\n        return ensureArray(target).map(item => trim(item, deep)) as any;\n    } else if (isDictLike(target)) {\n        const keys = [\n            ...Object.getOwnPropertyNames(target),\n            ...Object.getOwnPropertySymbols(target)\n        ];\n\n        return keys.reduce((result, key) => {\n            let value = target[key];\n\n            if (typeof value === \"string\") {\n                value = value.trim();\n            } else if (deep) {\n                if (isArrayLike(value, true)) {\n                    value = ensureArray(value).map(item => {\n                        return isDictLike(item) ? trim(item, deep) : item;\n                    });\n                } else if (isDictLike(value)) {\n                    value = trim(value, deep);\n                }\n            }\n\n            result[key] = value;\n            return result;\n        }, {} as any);\n    } else {\n        return target as any;\n    }\n}\n","import { as } from \"@ayonli/jsext/object\";\n\n/** @deprecated use `Object.as` from `@ayonli/jsext/object/augment` instead. */\nconst typeAs = as;\nexport default typeAs;\n","import isVoid from './isVoid';\nimport isClass from \"could-be-class\";\nimport type { Constructor } from \"@ayonli/jsext\";\n\nexport type TypeNames = \"string\"\n    | \"number\"\n    | \"bigint\"\n    | \"boolean\"\n    | \"symbol\"\n    | \"function\"\n    | \"class\"\n    | \"arguments\"\n    | \"void\";\n\n/**\n * Returns a string representation or the constructor of the value's type.\n * NOTE: this function also returns `'void'` when testing `NaN`.\n */\nexport default function typeOf<T extends any>(\n    target: T\n): TypeNames | Constructor<T> {\n    if (arguments.length === 0)\n        throw new TypeError(\"1 argument is required, 0 given\");\n    else if (isVoid(target))\n        return \"void\";\n\n    let type = typeof target;\n\n    if (type === \"function\") {\n        if (isClass(<any>target)) {\n            return \"class\";\n        } else {\n            return \"function\";\n        }\n    } else if (type === \"object\") {\n        if (Object.prototype.toString.call(target) === \"[object Arguments]\") {\n            return \"arguments\";\n        } else {\n            return (<any>target).constructor || Object;\n        }\n    } else {\n        return <any>type;\n    }\n}\n","import { until as _until } from \"@ayonli/jsext/promise\";\n\n/** @deprecated use `Promise.until` from `@ayonli/jsext/promise/augment` instead. */\nconst until = _until;\nexport default until;\n","import isEmpty from './isEmpty';\n\n// @ts-ignore\nif (typeof setImmediate === \"undefined\") {\n    // compatible with browsers\n    var setImmediate = (cb: () => void) => setTimeout(cb, 0);\n}\n\nexport default useThrottle;\n\n/**\n * Uses throttle strategy on the given resource and returns a throttle function,\n * if a subsequent call happens within the `interval` time, the previous result\n * will be returned and the current `handle` function will not be invoked.\n * \n * If `backgroundUpdate` is set, when reaching the `interval` time, the `handle`\n * function will be called in background and updates the result the when it's\n * done, the current call and any calls before the update will return the\n * previous result instead.\n * \n * NOTE: this function only creates the throttle function once and uses\n * `interval` only once, any later calls on the same `resource` will return the\n * initial throttle function.\n * \n * @deprecated this implementation is too complicated and redundant, use\n *  `jsext.throttle` from `@ayonli/jsext` instead.\n */\nfunction useThrottle(resource: any, interval: number, backgroundUpdate = false) {\n    if (interval < 1) {\n        throw new RangeError(\n            \"The 'interval' time for throttle must not be smaller than 1\"\n        );\n    } else if (!useThrottle.gcTimer) {\n        let { gcInterval, tasks: jobs } = useThrottle;\n\n        useThrottle.gcTimer = setInterval(() => {\n            let now = Date.now();\n\n            jobs.forEach(({ interval, lastActive }, key) => {\n                if (now - lastActive > Math.max(interval + 5, gcInterval)) {\n                    jobs.delete(key);\n                }\n            });\n        }, gcInterval);\n\n        if (typeof useThrottle.gcTimer.unref === \"function\") {\n            useThrottle.gcTimer.unref();\n        }\n    }\n\n    let task = useThrottle.tasks.get(resource);\n\n    if (!task) {\n        useThrottle.tasks.set(\n            resource,\n            task = createThrottleTask(interval, backgroundUpdate)\n        );\n    }\n\n    return task.func as (<T, A extends any[]>(\n        handle: (...args: A) => T | Promise<T>,\n        ...args: A\n    ) => Promise<T>);\n}\n\nnamespace useThrottle {\n    export var gcInterval = 30000;\n    export let gcTimer: any = void 0;\n    export const tasks = new Map<any, ThrottleTask>();\n}\n\ntype ThrottleTask = {\n    interval: number;\n    lastActive: number;\n    cache: { value: any, error: any; } | undefined;\n    queue: Set<{ resolve: (value: any) => void, reject: (err: any) => void; }>;\n    func: (<T, A extends any[]>(\n        handle: (...args: A) => T | Promise<T>,\n        ...args: A\n    ) => Promise<T>) | undefined;\n    daemon?: any;\n};\n\nfunction createThrottleTask(\n    interval: number,\n    backgroundUpdate = false\n): ThrottleTask {\n    let task: ThrottleTask = {\n        interval,\n        lastActive: 0,\n        cache: void 0,\n        queue: new Set(),\n        func: void 0,\n        daemon: null,\n    };\n\n    async function throttle<T, A extends any[]>(\n        this: ThrottleTask,\n        handle: (...args: A) => T | Promise<T>,\n        ...args: A\n    ): Promise<T> {\n        if (backgroundUpdate && !this.daemon) {\n            this.daemon = setInterval(() => this.func?.(handle, ...args), interval);\n\n            if (typeof this.daemon.unref === \"function\") {\n                this.daemon.unref();\n            }\n        }\n\n        let now = Date.now();\n\n        if ((now - this.lastActive) >= interval) {\n            this.lastActive = now;\n\n            if (backgroundUpdate && this.cache) {\n                Promise.resolve(handle(...args)).then(result => {\n                    this.cache = { value: result, error: null };\n                }).catch(err => {\n                    this.cache = { value: void 0, error: err };\n                });\n\n                if (this.cache.error)\n                    throw this.cache.error;\n                else\n                    return this.cache.value as T;\n            } else {\n                // Clear cache before dispatching the new job.\n                this.cache = void 0;\n\n                let result: T | undefined;\n                let error: any;\n\n                try {\n                    result = await handle(...args);\n                    this.cache = { value: result, error: null };\n                } catch (err) {\n                    this.cache = { value: void 0, error: error = err };\n                }\n\n                // Resolve or reject subsequent jobs once the result is ready,\n                // and make the procedure asynchronous so that they will be\n                // performed after the current job.\n                setImmediate(() => {\n                    if (!isEmpty(this.queue)) {\n                        this.queue.forEach((job) => {\n                            error ? job.reject(error) : job.resolve(result);\n                            this.queue.delete(job);\n                        });\n                    }\n                });\n\n                if (error)\n                    throw error;\n                else\n                    return result as T;\n            }\n        } else if (this.cache) {\n            if (this.cache.error)\n                throw this.cache.error;\n            else\n                return this.cache.value as T;\n        } else {\n            return new Promise<T>((resolve, reject) => {\n                this.queue.add({ resolve, reject });\n            });\n        }\n    }\n\n    task.func = throttle.bind(task) as any;\n    return task;\n}\n","import jsext from \"@ayonli/jsext\";\n\n/** @deprecated use `jsext.wrap` from `@ayonli/jsext` instead. */\nconst wrap = jsext.wrap;\nexport default wrap;\n","module.exports = function(s) {\n  return ~-encodeURI(s).split(/%..|./).length\n}\n","module.exports = require(\"child_process\");","module.exports = require(\"events\");","module.exports = require(\"path\");","module.exports = require(\"url\");","module.exports = require(\"worker_threads\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import \"./types\";\nexport { default as count } from \"./count\";\nexport { default as define } from \"./define\";\nexport { default as diff } from \"./diff\";\nexport { default as ensureType } from \"./ensureType\";\nexport { default as flatObject } from \"./flatObject\";\nexport { default as getGlobal } from \"./getGlobal\";\nexport { default as isBetween } from \"./isBetween\";\nexport { default as isEmpty } from \"./isEmpty\";\nexport { default as isFloat } from \"./isFloat\";\nexport { default as isInteger } from \"./isInteger\";\nexport { default as isNumeric } from \"./isNumeric\";\nexport { default as isOwnKey } from \"./isOwnKey\";\nexport { default as isOwnMethod } from \"./isOwnMethod\";\nexport { default as isSubClassOf } from \"./isSubClassOf\";\nexport { default as isVoid } from \"./isVoid\";\nexport { default as keysOf } from \"./keysOf\";\nexport { default as omit } from \"./omit\";\nexport { default as omitVoid } from \"./omitVoid\";\nexport { default as patch } from \"./patch\";\nexport { default as pick } from \"./pick\";\nexport { default as rand } from \"./rand\";\nexport { default as randStr } from \"./randStr\";\nexport { default as sleep } from \"./sleep\";\nexport { default as sort } from \"./sort\";\nexport { default as split } from \"./split\";\nexport { default as timestamp } from \"./timestamp\";\nexport { default as trim } from \"./trim\";\nexport { default as typeAs } from \"./typeAs\";\nexport { default as typeOf } from \"./typeOf\";\nexport { default as until } from \"./until\";\nexport { default as useThrottle } from \"./useThrottle\";\nexport { default as wrap } from \"./wrap\";\n"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","this","_a","Object","defineProperty","value","check_iterable_1","number_1","isNode","process","versions","node","throttleCaches","Map","workerIdCounter","sequence","Number","MAX_SAFE_INTEGER","workerPool","workerConsumerQueue","mergeIfNotExists","proto","source","mergeSuper","props","Reflect","ownKeys","prop","setProp","hasOwnProperty","mergeHierarchy","ctor","mixin","prototype","_super","getPrototypeOf","name","desc","getOwnPropertyDescriptor","jsext","fn","args","try","apply","err","undefined","returns","isAsyncGenerator","input","result","done","next","Promise","resolve","isGenerator","then","catch","func","callbacks","defer","cb","push","call","gen","error","i","length","async","wrap","wrapper","wrapped","configurable","enumerable","writable","toString","bind","throttle","handler","options","key","for","duration","handleCall","cache","Date","now","expires","get","set","mixins","base","obj","TypeError","isSubclassOf","ctor1","ctor2","read","eventMap","Symbol","asyncIterator","iterable","ended","queue","consumers","reject","shift","handleMessage","data","handleClose","consumer","handleError","forEach","item","handleBrowserErrorEvent","ev","ErrorEvent","Error","message","cause","msgDesc","close","errDesc","closeDesc","cleanup","event","es","eventName","msgListener","addEventListener","removeEventListener","_b","_close","send","ws","onmessage","onerror","onclose","target","msgEvent","errEvent","closeEvent","MessageEvent","closeListener","dataEvent","endEvent","on","once","off","run","script","msg","type","baseUrl","Deno","cwd","location","href","buffer","resolver","iterator","workerId","poolRecord","release","terminate","timeout","setTimeout","keepAlive","emit","handleExit","filter","record","path","fileURLToPath","_filename","_dirname","entry","__filename","__dirname","includes","basename","join","dirname","adapter","worker","ok","find","busy","fork","isPrior14","parseInt","version","slice","stdio","serialization","pid","removeAllListeners","kill","Worker","threadId","postMessage","url","split","_url","webWorkerEntry","res","fetch","blob","headers","startsWith","buf","arrayBuffer","Blob","Uint8Array","URL","createObjectURL","onmessageerror","abort","clearTimeout","iterate","EventEmitter","console","random","isBetween","isNumeric","isFloat","isNaN","isFinite","BigInt","min","max","Math","floor","step","loop","id","hasOwn","pick","keys","reduce","as","omit","patch","hasOwnMethod","method","sources","keptKeys","_type","primitiveMap","String","Boolean","valueOf","until","sleep","after","ms","race","_","allSettled","status","reason","test","globalThis","setImmediate","_typeof","constructor","isIteratorLike","isIterableIterator","isAsyncIterableIterator","hasGeneratorSpecials","isIterable","isAsyncIterable","couldBeClass","getOwnPropertyNames","str","hasThis","_slicedToArray","arr","_arrayWithHoles","Array","isArray","_iterableToArrayLimit","_i","_s","_e","_x","_r","_arr","_n","_d","_unsupportedIterableToArray","o","minLen","_arrayLikeToArray","n","from","_nonIterableRest","len","arr2","isObjectWith","isObj","_len","arguments","_key","every","_ref","_ref2","p","t","isArrayLike","strict","indexes","isNonEnumLength","map","hasIterator","isCollectionLike","excludeWeakOnes","WeakMap","WeakSet","isTypedArrayLike","isBufferLike","isDictLike","RegExp","isObjectIdLike","isEmptyDict","JSON","stringify","e","isPromiseLike","isErrorLike","bytes","encoder","TextEncoder","count","option","Buffer","byteLength","encode","times","is","size","isGetter","isGetterAndSetter","sign","diff","origin","deep","_keys","_result","truePattern","falsePattern","nullPattern","nanPattern","infinityPattern","regexPattern","numberInterval","MIN_SAFE_INTEGER","ensureArray","ensureType","re","NaN","match","num","flatDeep","carrier","field","depth","maxDepth","flatArray","isArr","isDict","isContent","flatObject","getGlobal","_global","self","global","window","BaseEmptyPrimitives","EmptyPrimitives","emptyPrimitives","v","values","Set","k","isEmpty","isInteger","isOwnKey","isOwnMethod","isSubClassOf","isVoid","keysOf","doOmit","omitEmptyObjects","omitEmptyStrings","trim","omitVoid","doPatch","ignoreEmptyStrings","isChildNode","assign","rand","randStr","chars","onlyNumbers","ele","sort","compare","a","b","shouldUseNativeSort","parseFloat","v8","navigator","userAgent","index","getOwnPropertySymbols","checkNumberArgument","RangeError","splitArrayLike","total","j","sep","SyntaxError","splitNumber","offset","isBuffer","splitBuffer","indexOf","list","splitObject","keyChunks","chunk","create","timestamp","date","dateTime","parseDateRawArgs","Y","M","D","H","m","s","setFullYear","setMonth","setDate","setHours","setMinutes","setSeconds","setMilliseconds","getFullYear","getMonth","getDate","typeAs","typeOf","useThrottle","resource","interval","backgroundUpdate","gcTimer","gcInterval","tasks","jobs","setInterval","lastActive","delete","unref","task","createThrottleTask","daemon","handle","job","add","encodeURI","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","default"],"sourceRoot":""}