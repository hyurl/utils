{"version":3,"file":"index.js","mappings":"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","sources":["webpack://@hyurl/utils/webpack/universalModuleDefinition","webpack://@hyurl/utils/./node_modules/@ayonli/jsext/index.js","webpack://@hyurl/utils/./node_modules/@ayonli/jsext/number/index.js","webpack://@hyurl/utils/./node_modules/@ayonli/jsext/object/index.js","webpack://@hyurl/utils/./node_modules/@ayonli/jsext/promise/index.js","webpack://@hyurl/utils/./node_modules/check-iterable/index.js","webpack://@hyurl/utils/./node_modules/could-be-class/index.js","webpack://@hyurl/utils/./node_modules/is-like/index.js","webpack://@hyurl/utils/./src/count.ts","webpack://@hyurl/utils/./src/define.ts","webpack://@hyurl/utils/./src/diff.ts","webpack://@hyurl/utils/./src/ensureType.ts","webpack://@hyurl/utils/./src/flatObject.ts","webpack://@hyurl/utils/./src/getGlobal.ts","webpack://@hyurl/utils/./src/isBetween.ts","webpack://@hyurl/utils/./src/isEmpty.ts","webpack://@hyurl/utils/./src/isFloat.ts","webpack://@hyurl/utils/./src/isInteger.ts","webpack://@hyurl/utils/./src/isNumeric.ts","webpack://@hyurl/utils/./src/isOwnKey.ts","webpack://@hyurl/utils/./src/isOwnMethod.ts","webpack://@hyurl/utils/./src/isSubClassOf.ts","webpack://@hyurl/utils/./src/isVoid.ts","webpack://@hyurl/utils/./src/keysOf.ts","webpack://@hyurl/utils/./src/omit.ts","webpack://@hyurl/utils/./src/omitVoid.ts","webpack://@hyurl/utils/./src/patch.ts","webpack://@hyurl/utils/./src/pick.ts","webpack://@hyurl/utils/./src/rand.ts","webpack://@hyurl/utils/./src/randStr.ts","webpack://@hyurl/utils/./src/sleep.ts","webpack://@hyurl/utils/./src/sort.ts","webpack://@hyurl/utils/./src/split.ts","webpack://@hyurl/utils/./src/timestamp.ts","webpack://@hyurl/utils/./src/trim.ts","webpack://@hyurl/utils/./src/typeAs.ts","webpack://@hyurl/utils/./src/typeOf.ts","webpack://@hyurl/utils/./src/until.ts","webpack://@hyurl/utils/./src/useThrottle.ts","webpack://@hyurl/utils/./src/wrap.ts","webpack://@hyurl/utils/./node_modules/utf8-length/index.js","webpack://@hyurl/utils/external node-commonjs \"child_process\"","webpack://@hyurl/utils/external node-commonjs \"events\"","webpack://@hyurl/utils/external node-commonjs \"fs\"","webpack://@hyurl/utils/external node-commonjs \"os\"","webpack://@hyurl/utils/external node-commonjs \"path\"","webpack://@hyurl/utils/external node-commonjs \"util\"","webpack://@hyurl/utils/external node-commonjs \"worker_threads\"","webpack://@hyurl/utils/webpack/bootstrap","webpack://@hyurl/utils/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@hyurl/utils\"] = factory();\n\telse\n\t\troot[\"@hyurl/utils\"] = factory();\n})(this, () => {\nreturn ","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst check_iterable_1 = require(\"check-iterable\");\nconst number_1 = require(\"./number\");\nconst isNode = typeof process === \"object\" && !!((_a = process.versions) === null || _a === void 0 ? void 0 : _a.node);\nconst throttleCaches = new Map();\n/**\n * The maximum number of workers is set to 4 times of the CPU core numbers.\n *\n * The primary purpose of the workers is not mean to run tasks in parallel, but run them in separate\n * from the main thread, so that aborting tasks can be achieved by terminating the worker thread and\n * it will not affect the main thread.\n *\n * That said, the worker thread can still be used to achieve parallelism, but it should be noticed\n * that only the numbers of tasks that equals to the CPU core numbers will be run at the same time.\n */\nconst maxWorkerNum = (() => {\n    if (isNode) {\n        return require(\"os\").cpus().length * 4;\n    }\n    else {\n        return 16;\n    }\n})();\nconst workerIdCounter = (0, number_1.sequence)(1, Number.MAX_SAFE_INTEGER, 1, true);\nlet workerPool = [];\n// The worker consumer queue is nothing but a callback list, once a worker is available, the runner\n// pop a consumer and run the callback, which will retry gaining the worker and retry the task.\nconst workerConsumerQueue = [];\n/**\n * Merges properties and methods only if they're missing in the class.\n */\nfunction mergeIfNotExists(proto, source, mergeSuper = false) {\n    let props = Reflect.ownKeys(source);\n    for (let prop of props) {\n        if (prop == \"constructor\") {\n            continue;\n        }\n        else if (mergeSuper) {\n            // When merging properties from super classes, the properties in the\n            // base class has the first priority and shall not be overwrite.\n            if (!(prop in proto)) {\n                setProp(proto, source, prop);\n            }\n        }\n        else if (!proto.hasOwnProperty(prop)) {\n            setProp(proto, source, prop);\n        }\n    }\n    return proto;\n}\n/**\n * Merges properties and methods across the prototype chain.\n */\nfunction mergeHierarchy(ctor, mixin, mergeSuper = false) {\n    mergeIfNotExists(ctor.prototype, mixin.prototype, mergeSuper);\n    let _super = Object.getPrototypeOf(mixin);\n    // Every user defined class or functions that can be instantiated have their\n    // own names, if no name appears, that means the function has traveled to \n    // the root of the hierarchical tree.\n    if (_super.name) {\n        mergeHierarchy(ctor, _super, true);\n    }\n}\n/**\n * Sets property for prototype based on the given source and prop name properly.\n */\nfunction setProp(proto, source, prop) {\n    let desc = Object.getOwnPropertyDescriptor(source, prop);\n    if (desc) {\n        Object.defineProperty(proto, prop, desc);\n    }\n    else {\n        proto[prop] = source[prop];\n    }\n}\nconst jsext = {\n    try(fn, ...args) {\n        if (typeof fn === \"function\") {\n            try {\n                return jsext.try(fn.apply(void 0, args));\n            }\n            catch (err) {\n                return [err, undefined];\n            }\n        }\n        let returns = fn;\n        // Implementation details should be ordered from complex to simple.\n        if ((0, check_iterable_1.isAsyncGenerator)(returns)) {\n            return (async function* () {\n                let input;\n                let result;\n                // Use `while` loop instead of `for...of...` in order to\n                // retrieve the return value of a generator function.\n                while (true) {\n                    try {\n                        let { done, value } = await returns.next(input);\n                        if (done) {\n                            result = value;\n                            break;\n                        }\n                        else {\n                            // Receive any potential input value that passed\n                            // to the outer `next()` call, and pass them to\n                            // `res.next()` in the next call.\n                            input = yield Promise.resolve([null, value]);\n                        }\n                    }\n                    catch (err) {\n                        // If any error occurs, yield that error as resolved\n                        // and break the loop immediately, indicating the\n                        // process is forced broken.\n                        yield Promise.resolve([err, undefined]);\n                        break;\n                    }\n                }\n                return Promise.resolve([null, result]);\n            })();\n        }\n        else if ((0, check_iterable_1.isGenerator)(returns)) {\n            return (function* () {\n                let input;\n                let result;\n                while (true) {\n                    try {\n                        let { done, value } = returns.next(input);\n                        if (done) {\n                            result = value;\n                            break;\n                        }\n                        else {\n                            input = yield [null, value];\n                        }\n                    }\n                    catch (err) {\n                        yield [err, undefined];\n                        break;\n                    }\n                }\n                return [null, result];\n            })();\n        }\n        else if (typeof (returns === null || returns === void 0 ? void 0 : returns.then) === \"function\") {\n            returns = returns.then((value) => [null, value]);\n            return Promise.resolve(returns).catch((err) => [err, undefined]);\n        }\n        else {\n            return [null, returns];\n        }\n    },\n    func(fn) {\n        return function (...args) {\n            var _a;\n            const callbacks = [];\n            const defer = (cb) => void callbacks.push(cb);\n            let result;\n            try {\n                const returns = fn.call(this, defer, ...args);\n                if ((0, check_iterable_1.isAsyncGenerator)(returns)) {\n                    const gen = (async function* () {\n                        var _a;\n                        let input;\n                        // Use `while` loop instead of `for...of...` in order to\n                        // retrieve the return value of a generator function.\n                        while (true) {\n                            try {\n                                let { done, value } = await returns.next(input);\n                                if (done) {\n                                    result = { value, error: null };\n                                    break;\n                                }\n                                else {\n                                    // Receive any potential input value that passed\n                                    // to the outer `next()` call, and pass them to\n                                    // `res.next()` in the next call.\n                                    input = yield Promise.resolve(value);\n                                }\n                            }\n                            catch (error) {\n                                // If any error occurs, capture that error and break\n                                // the loop immediately, indicating the process is\n                                // forced broken.\n                                result = { value: void 0, error };\n                                break;\n                            }\n                        }\n                        for (let i = callbacks.length - 1; i >= 0; i--) {\n                            await ((_a = callbacks[i]) === null || _a === void 0 ? void 0 : _a.call(callbacks));\n                        }\n                        if (result.error) {\n                            throw result.error;\n                        }\n                        else {\n                            return Promise.resolve(result.value);\n                        }\n                    })();\n                    return gen;\n                }\n                else if ((0, check_iterable_1.isGenerator)(returns)) {\n                    const gen = (function* () {\n                        var _a;\n                        let input;\n                        while (true) {\n                            try {\n                                let { done, value } = returns.next(input);\n                                if (done) {\n                                    result = { value, error: null };\n                                    break;\n                                }\n                                else {\n                                    input = yield value;\n                                }\n                            }\n                            catch (error) {\n                                result = { value: void 0, error };\n                                break;\n                            }\n                        }\n                        for (let i = callbacks.length - 1; i >= 0; i--) {\n                            (_a = callbacks[i]) === null || _a === void 0 ? void 0 : _a.call(callbacks);\n                        }\n                        if (result.error) {\n                            throw result.error;\n                        }\n                        else {\n                            return result.value;\n                        }\n                    })();\n                    return gen;\n                }\n                else if (typeof (returns === null || returns === void 0 ? void 0 : returns.then) === \"function\") {\n                    return Promise.resolve(returns).then(value => ({\n                        value,\n                        error: null,\n                    })).catch((error) => ({\n                        value: void 0,\n                        error,\n                    })).then(async (result) => {\n                        var _a;\n                        for (let i = callbacks.length - 1; i >= 0; i--) {\n                            await ((_a = callbacks[i]) === null || _a === void 0 ? void 0 : _a.call(callbacks));\n                        }\n                        if (result.error) {\n                            throw result.error;\n                        }\n                        else {\n                            return result.value;\n                        }\n                    });\n                }\n                else {\n                    result = { value: returns, error: null };\n                }\n            }\n            catch (error) {\n                result = { value: void 0, error };\n            }\n            for (let i = callbacks.length - 1; i >= 0; i--) {\n                (_a = callbacks[i]) === null || _a === void 0 ? void 0 : _a.call(callbacks);\n            }\n            if (result.error) {\n                throw result.error;\n            }\n            else {\n                return result.value;\n            }\n        };\n    },\n    wrap(fn, wrapper) {\n        const wrapped = function (...args) {\n            return wrapper.call(this, fn, ...args);\n        };\n        Object.defineProperty(wrapped, \"name\", Object.getOwnPropertyDescriptor(fn, \"name\"));\n        Object.defineProperty(wrapped, \"length\", Object.getOwnPropertyDescriptor(fn, \"length\"));\n        Object.defineProperty(wrapped, \"toString\", {\n            configurable: true,\n            enumerable: false,\n            writable: true,\n            value: fn.toString.bind(fn),\n        });\n        return wrapped;\n    },\n    throttle(handler, options) {\n        const key = typeof options === \"number\" ? null : options.for;\n        const duration = typeof options === \"number\" ? options : options.duration;\n        const handleCall = function (cache, ...args) {\n            var _a;\n            if (cache.result && Date.now() < ((_a = cache.expires) !== null && _a !== void 0 ? _a : 0)) {\n                if (cache.result.error) {\n                    throw cache.result.error;\n                }\n                else {\n                    return cache.result.value;\n                }\n            }\n            try {\n                const returns = handler.call(this, ...args);\n                cache.result = { value: returns };\n                cache.expires = Date.now() + duration;\n                return returns;\n            }\n            catch (error) {\n                cache.result = { error };\n                cache.expires = Date.now() + duration;\n                throw error;\n            }\n        };\n        if (!key) {\n            const cache = { for: null };\n            return function (...args) {\n                return handleCall.call(this, cache, ...args);\n            };\n        }\n        else {\n            let cache = throttleCaches.get(key);\n            if (!cache) {\n                cache = { for: key };\n                throttleCaches.set(key, cache);\n            }\n            return function (...args) {\n                return handleCall.call(this, cache, ...args);\n            };\n        }\n    },\n    mixins(base, ...mixins) {\n        const obj = { ctor: null };\n        obj.ctor = class extends base {\n        }; // make sure this class has no name\n        for (let mixin of mixins) {\n            if (typeof mixin == \"function\") {\n                mergeHierarchy(obj.ctor, mixin);\n            }\n            else if (mixin && typeof mixin == \"object\") {\n                mergeIfNotExists(obj.ctor.prototype, mixin);\n            }\n            else {\n                throw new TypeError(\"mixin must be a constructor or an object\");\n            }\n        }\n        return obj.ctor;\n    },\n    read(source, eventMap = undefined) {\n        var _a;\n        if (typeof source[Symbol.asyncIterator] === \"function\") {\n            return source;\n        }\n        const iterable = {\n            ended: false,\n            error: null,\n            queue: [],\n            consumers: [],\n            next() {\n                return new Promise((resolve, reject) => {\n                    if (this.error && !this.ended) {\n                        // If there is error occurred during the last transmission and the iterator\n                        // hasn't been closed, reject that error and stop the iterator immediately.\n                        reject(this.error);\n                        this.ended = true;\n                    }\n                    else if (this.ended && !this.queue.length) {\n                        // If the iterator has is closed, resolve the pending consumer with void\n                        // value.\n                        resolve({ value: void 0, done: true });\n                    }\n                    else if (this.queue.length > 0) {\n                        // If there are data in the queue, resolve the the first piece immediately.\n                        resolve({ value: this.queue.shift(), done: false });\n                    }\n                    else {\n                        // If there are no queued data, push the consumer to a waiting queue.\n                        this.consumers.push({ resolve, reject });\n                    }\n                });\n            }\n        };\n        const handleMessage = (data) => {\n            var _a;\n            if (iterable.consumers.length > 0) {\n                (_a = iterable.consumers.shift()) === null || _a === void 0 ? void 0 : _a.resolve({ value: data, done: false });\n            }\n            else {\n                iterable.queue.push(data);\n            }\n        };\n        const handleClose = () => {\n            iterable.ended = true;\n            let consumer;\n            while (consumer = iterable.consumers.shift()) {\n                consumer.resolve({ value: undefined, done: true });\n            }\n        };\n        const handleError = (err) => {\n            iterable.error = err;\n            if (iterable.consumers.length > 0) {\n                iterable.consumers.forEach(item => {\n                    item.reject(err);\n                });\n                iterable.consumers = [];\n            }\n        };\n        const handleBrowserErrorEvent = (ev) => {\n            let err;\n            if (ev instanceof ErrorEvent) {\n                err = ev.error || new Error(ev.message);\n            }\n            else {\n                // @ts-ignore\n                err = new Error(\"something went wrong\", { cause: ev });\n            }\n            handleError(err);\n        };\n        const proto = Object.getPrototypeOf(source);\n        const msgDesc = Object.getOwnPropertyDescriptor(proto, \"onmessage\");\n        if ((msgDesc === null || msgDesc === void 0 ? void 0 : msgDesc.set) && typeof source.close === \"function\") { // WebSocket or EventSource\n            const errDesc = Object.getOwnPropertyDescriptor(proto, \"onerror\");\n            const closeDesc = Object.getOwnPropertyDescriptor(proto, \"onclose\");\n            let cleanup;\n            if ((eventMap === null || eventMap === void 0 ? void 0 : eventMap.event) &&\n                (eventMap === null || eventMap === void 0 ? void 0 : eventMap.event) !== \"message\" &&\n                typeof source[\"addEventListener\"] === \"function\") { // for EventSource listening on custom events\n                const es = source;\n                const eventName = eventMap.event;\n                const msgListener = (ev) => {\n                    handleMessage(ev.data);\n                };\n                es.addEventListener(eventName, msgListener);\n                cleanup = () => {\n                    es.removeEventListener(eventName, msgListener);\n                };\n            }\n            else {\n                msgDesc.set.call(source, (ev) => {\n                    handleMessage(ev.data);\n                });\n                cleanup = () => {\n                    var _a;\n                    (_a = msgDesc.set) === null || _a === void 0 ? void 0 : _a.call(source, null);\n                };\n            }\n            (_a = errDesc === null || errDesc === void 0 ? void 0 : errDesc.set) === null || _a === void 0 ? void 0 : _a.call(source, handleBrowserErrorEvent);\n            if (closeDesc === null || closeDesc === void 0 ? void 0 : closeDesc.set) { // WebSocket\n                closeDesc.set.call(source, () => {\n                    var _a, _b;\n                    handleClose();\n                    (_a = closeDesc.set) === null || _a === void 0 ? void 0 : _a.call(source, null);\n                    (_b = errDesc === null || errDesc === void 0 ? void 0 : errDesc.set) === null || _b === void 0 ? void 0 : _b.call(source, null);\n                    cleanup === null || cleanup === void 0 ? void 0 : cleanup();\n                });\n            }\n            else if (!(closeDesc === null || closeDesc === void 0 ? void 0 : closeDesc.set) && typeof source.close === \"function\") { // EventSource\n                // EventSource by default does not trigger close event, we need to make sure when\n                // it calls the close() function, the iterator is automatically closed.\n                const es = source;\n                const _close = es.close;\n                es.close = function close() {\n                    var _a;\n                    _close.call(es);\n                    handleClose();\n                    es.close = _close;\n                    (_a = errDesc === null || errDesc === void 0 ? void 0 : errDesc.set) === null || _a === void 0 ? void 0 : _a.call(source, null);\n                    cleanup === null || cleanup === void 0 ? void 0 : cleanup();\n                };\n            }\n        }\n        else if (typeof source.send === \"function\" && typeof source.close === \"function\") {\n            // non-standard WebSocket implementation\n            const ws = source;\n            ws.onmessage = (ev) => {\n                handleMessage(ev.data);\n            };\n            ws.onerror = handleBrowserErrorEvent;\n            ws.onclose = () => {\n                handleClose();\n                ws.onclose = null;\n                ws.onerror = null;\n                ws.onmessage = null;\n            };\n        }\n        else if (typeof source[\"addEventListener\"] === \"function\") { // EventTarget\n            const target = source;\n            const msgEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.message) || \"message\";\n            const errEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.error) || \"error\";\n            const closeEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.close) || \"close\";\n            const msgListener = (ev) => {\n                if (ev instanceof MessageEvent) {\n                    handleMessage(ev.data);\n                }\n            };\n            target.addEventListener(msgEvent, msgListener);\n            target.addEventListener(errEvent, handleBrowserErrorEvent);\n            target.addEventListener(closeEvent, function closeListener() {\n                handleClose();\n                target.removeEventListener(closeEvent, closeListener);\n                target.removeEventListener(msgEvent, msgListener);\n                target.removeEventListener(errEvent, handleBrowserErrorEvent);\n            });\n        }\n        else if (typeof source[\"on\"] === \"function\") { // EventEmitter\n            const target = source;\n            const dataEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.data) || \"data\";\n            const errEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.error) || \"error\";\n            const endEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.close) || \"close\";\n            target.on(dataEvent, handleMessage);\n            target.once(errEvent, handleError);\n            target.once(endEvent, () => {\n                handleClose();\n                target.off(dataEvent, handleMessage);\n                target.off(dataEvent, handleError);\n            });\n        }\n        else {\n            throw new TypeError(\"the input source cannot be read as an AsyncIterable object\");\n        }\n        return {\n            [Symbol.asyncIterator]() {\n                return iterable;\n            }\n        };\n    },\n    async run(script, args = undefined, options = undefined) {\n        var _a;\n        const msg = {\n            type: \"ffi\",\n            script,\n            baseUrl: \"\",\n            fn: (options === null || options === void 0 ? void 0 : options.fn) || \"default\",\n            args: args !== null && args !== void 0 ? args : [],\n        };\n        if (typeof Deno === \"object\") {\n            msg.baseUrl = \"file://\" + Deno.cwd() + \"/\";\n        }\n        else if (isNode) {\n            msg.baseUrl = \"file://\" + process.cwd() + \"/\";\n        }\n        else if (typeof location === \"object\") {\n            msg.baseUrl = location.href;\n        }\n        // `buffer` is used to store data pieces yielded by generator functions before they are\n        // consumed. `error` and `result` serves similar purposes for function results.\n        const buffer = [];\n        let error = null;\n        let result;\n        let resolver;\n        let iterator;\n        let workerId;\n        let poolRecord;\n        let release;\n        let terminate = () => Promise.resolve(void 0);\n        let timeout = (options === null || options === void 0 ? void 0 : options.timeout) ? setTimeout(() => {\n            const err = new Error(`operation timeout after ${options.timeout}ms`);\n            if (resolver) {\n                resolver.reject(err);\n            }\n            else {\n                error = err;\n            }\n            terminate();\n        }, options.timeout) : null;\n        const handleMessage = (msg) => {\n            var _a;\n            if (msg && typeof msg === \"object\" && typeof msg.type === \"string\") {\n                if (msg.type === \"error\") {\n                    return handleError(msg.error);\n                }\n                else if (msg.type === \"return\") {\n                    if (options === null || options === void 0 ? void 0 : options.keepAlive) {\n                        // Release before resolve.\n                        release === null || release === void 0 ? void 0 : release();\n                        if (workerConsumerQueue.length) {\n                            // Queued consumer now has chance to gain the worker.\n                            (_a = workerConsumerQueue.shift()) === null || _a === void 0 ? void 0 : _a();\n                        }\n                    }\n                    else {\n                        terminate();\n                    }\n                    if (resolver) {\n                        resolver.resolve(msg.value);\n                    }\n                    else {\n                        result = { value: msg.value };\n                    }\n                }\n                else if (msg.type === \"yield\") {\n                    if (msg.done) {\n                        // The final message of yield event is the return value.\n                        handleMessage({ type: \"return\", value: msg.value });\n                    }\n                    else {\n                        if (iterator) {\n                            iterator.emit(\"data\", msg.value);\n                        }\n                        else {\n                            buffer.push(msg.value);\n                        }\n                    }\n                }\n            }\n        };\n        const handleError = (err) => {\n            if (resolver) {\n                resolver.reject(err);\n            }\n            else if (iterator) {\n                iterator.emit(\"error\", err);\n            }\n            else {\n                error = err;\n            }\n        };\n        const handleExit = () => {\n            var _a;\n            if (poolRecord) {\n                // Clean the pool before resolve.\n                workerPool = workerPool.filter(record => record !== poolRecord);\n                if (workerConsumerQueue.length) {\n                    // Queued consumer now has chance to create new worker.\n                    (_a = workerConsumerQueue.shift()) === null || _a === void 0 ? void 0 : _a();\n                }\n            }\n            if (resolver) {\n                resolver.resolve(void 0);\n            }\n            else if (iterator) {\n                iterator.emit(\"close\");\n            }\n            else if (!error && !result) {\n                result = { value: void 0 };\n            }\n        };\n        if (isNode) {\n            const path = await Promise.resolve().then(() => require(\"path\"));\n            const util = await Promise.resolve().then(() => require(\"util\"));\n            const fs = await Promise.resolve().then(() => require(\"fs\"));\n            const stat = util.promisify(fs.stat);\n            let _filename;\n            let _dirname;\n            let entry;\n            if (typeof __filename === \"string\") {\n                _filename = __filename;\n                _dirname = __dirname;\n            }\n            else {\n                // Using the ES module in Node.js is very unlikely, so we just check the module\n                // filename in a simple manner, and report error if not found.\n                let [err] = await jsext.try(stat(\"package.json\"));\n                if (err) {\n                    throw new Error(\"the current working directory is not a Node.js module\");\n                }\n                _filename = process.cwd() + \"/node_modules/@ayonli/jsext/esm/index.mjs\";\n                [err] = await jsext.try(stat(_filename));\n                if (err) {\n                    // Assuming this is @ayonli/jsext itself.\n                    _filename = process.cwd() + \"/esm/index.mjs\";\n                    [err] = await jsext.try(stat(_filename));\n                    if (err) {\n                        throw new Error(\"can not locate the worker entry\");\n                    }\n                }\n                _dirname = path.dirname(_filename);\n            }\n            if (_filename.endsWith(\".js\")) { // compiled\n                entry = path.join(_dirname, \"esm\", \"worker.mjs\");\n            }\n            else {\n                entry = path.join(path.dirname(_dirname), \"esm\", \"worker.mjs\");\n            }\n            if ((options === null || options === void 0 ? void 0 : options.adapter) === \"child_process\") {\n                let worker;\n                let ok = true;\n                poolRecord = workerPool.find(item => {\n                    return item.adapter === \"child_process\" && !item.busy;\n                });\n                if (poolRecord) {\n                    worker = poolRecord.worker;\n                    workerId = poolRecord.workerId;\n                    poolRecord.busy = true;\n                }\n                else if (workerPool.length < maxWorkerNum) {\n                    const { fork } = await Promise.resolve().then(() => require(\"child_process\"));\n                    const isPrior14 = parseInt(process.version.slice(1)) < 14;\n                    worker = fork(entry, {\n                        stdio: \"inherit\",\n                        serialization: isPrior14 ? \"advanced\" : \"json\",\n                    });\n                    workerId = worker.pid;\n                    ok = await new Promise((resolve) => {\n                        worker.once(\"exit\", () => {\n                            if (error) {\n                                // The child process took too long to start and cause timeout error.\n                                resolve(false);\n                            }\n                        });\n                        worker.once(\"message\", () => {\n                            worker.removeAllListeners(\"exit\");\n                            resolve(true);\n                        });\n                    });\n                    // Fill the worker pool regardless the current call should keep-alive or not,\n                    // this will make sure that the total number of workers will not exceed the\n                    // maxWorkerNum. If the the call doesn't keep-alive the worker, it will be\n                    // cleaned after the call.\n                    ok && workerPool.push(poolRecord = {\n                        workerId,\n                        worker,\n                        adapter: \"child_process\",\n                        busy: true,\n                    });\n                }\n                else {\n                    // Put the current call in the consumer queue if there are no workers available,\n                    // once an existing call finishes, the queue will pop the its head consumer and\n                    // retry.\n                    return new Promise((resolve) => {\n                        workerConsumerQueue.push(resolve);\n                    }).then(() => jsext.run(script, args, options));\n                }\n                release = () => {\n                    // Remove the event listener so that later calls will not mess up.\n                    worker.off(\"message\", handleMessage);\n                    poolRecord && (poolRecord.busy = false);\n                };\n                terminate = () => Promise.resolve(void worker.kill(1));\n                if (ok) {\n                    worker.send(msg);\n                    worker.on(\"message\", handleMessage);\n                    worker.once(\"error\", handleError);\n                    worker.once(\"exit\", handleExit);\n                }\n            }\n            else {\n                let worker;\n                let ok = true;\n                poolRecord = workerPool.find(item => {\n                    return item.adapter === \"worker_threads\" && !item.busy;\n                });\n                if (poolRecord) {\n                    worker = poolRecord.worker;\n                    workerId = poolRecord.workerId;\n                    poolRecord.busy = true;\n                }\n                else if (workerPool.length < maxWorkerNum) {\n                    const { Worker } = await Promise.resolve().then(() => require(\"worker_threads\"));\n                    worker = new Worker(entry);\n                    workerId = worker.threadId;\n                    ok = await new Promise((resolve) => {\n                        worker.once(\"exit\", () => {\n                            if (error) {\n                                // The child process took too long to start and cause timeout error.\n                                resolve(false);\n                            }\n                        });\n                        worker.once(\"online\", () => {\n                            worker.removeAllListeners(\"exit\");\n                            resolve(true);\n                        });\n                    });\n                    ok && workerPool.push(poolRecord = {\n                        workerId,\n                        worker,\n                        adapter: \"worker_threads\",\n                        busy: true,\n                    });\n                }\n                else {\n                    return new Promise((resolve) => {\n                        workerConsumerQueue.push(resolve);\n                    }).then(() => jsext.run(script, args, options));\n                }\n                release = () => {\n                    worker.off(\"message\", handleMessage);\n                    poolRecord && (poolRecord.busy = false);\n                };\n                terminate = async () => void (await worker.terminate());\n                if (ok) {\n                    worker.postMessage(msg);\n                    worker.on(\"message\", handleMessage);\n                    worker.once(\"error\", handleError);\n                    worker.once(\"messageerror\", handleError);\n                    worker.once(\"exit\", handleExit);\n                }\n            }\n        }\n        else {\n            let worker;\n            poolRecord = workerPool.find(item => {\n                return item.adapter === \"worker_threads\" && !item.busy;\n            });\n            if (poolRecord) {\n                worker = poolRecord.worker;\n                workerId = poolRecord.workerId;\n                poolRecord.busy = true;\n            }\n            else if (workerPool.length < maxWorkerNum) {\n                const _url = (options === null || options === void 0 ? void 0 : options.webWorkerEntry)\n                    || \"https://raw.githubusercontent.com/ayonli/jsext/main/esm/worker-web.mjs\";\n                let url;\n                if (typeof Deno === \"object\") {\n                    // Deno can load the module regardless of MINE type.\n                    url = new URL(_url, msg.baseUrl).href;\n                }\n                else {\n                    const res = await fetch(_url);\n                    let blob;\n                    if ((_a = res.headers.get(\"content-type\")) === null || _a === void 0 ? void 0 : _a.startsWith(\"application/javascript\")) {\n                        blob = await res.blob();\n                    }\n                    else {\n                        const buf = await res.arrayBuffer();\n                        blob = new Blob([new Uint8Array(buf)], {\n                            type: \"application/javascript\",\n                        });\n                    }\n                    url = URL.createObjectURL(blob);\n                }\n                worker = new Worker(url, { type: \"module\" });\n                workerId = workerIdCounter.next().value;\n                workerPool.push(poolRecord = {\n                    workerId,\n                    worker,\n                    adapter: \"worker_threads\",\n                    busy: true,\n                });\n            }\n            else {\n                return new Promise((resolve) => {\n                    workerConsumerQueue.push(resolve);\n                }).then(() => jsext.run(script, args, options));\n            }\n            release = () => {\n                worker.onmessage = null;\n                poolRecord && (poolRecord.busy = false);\n            };\n            terminate = async () => {\n                await Promise.resolve(worker.terminate());\n                handleExit();\n            };\n            worker.postMessage(msg);\n            worker.onmessage = (ev) => handleMessage(ev.data);\n            worker.onerror = (ev) => handleMessage(ev.error || new Error(ev.message));\n            worker.onmessageerror = () => {\n                handleError(new Error(\"unable to deserialize the message\"));\n            };\n        }\n        return {\n            workerId,\n            async abort() {\n                timeout && clearTimeout(timeout);\n                await terminate();\n            },\n            async result() {\n                return await new Promise((resolve, reject) => {\n                    if (error) {\n                        reject(error);\n                    }\n                    else if (result) {\n                        resolve(result.value);\n                    }\n                    else {\n                        resolver = { resolve, reject };\n                    }\n                });\n            },\n            async *iterate() {\n                if (resolver) {\n                    throw new Error(\"result() has been called\");\n                }\n                else if (result) {\n                    throw new TypeError(\"the response is not iterable\");\n                }\n                const { EventEmitter } = await Promise.resolve().then(() => require(\"events\"));\n                iterator = new EventEmitter();\n                if (buffer.length) {\n                    (async () => {\n                        await Promise.resolve(null);\n                        let msg;\n                        while (msg = buffer.shift()) {\n                            iterator.emit(\"data\", msg);\n                        }\n                    })().catch(console.error);\n                }\n                for await (const msg of jsext.read(iterator)) {\n                    yield msg;\n                }\n            },\n        };\n    }\n};\nexports.default = jsext;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sequence = exports.random = exports.isFloat = void 0;\n/** Returns true if the given value is a float, false otherwise. */\nfunction isFloat(value) {\n    return typeof value === \"number\"\n        && !Number.isNaN(value)\n        && (!Number.isFinite(value) || value % 1 !== 0);\n}\nexports.isFloat = isFloat;\n/** Returns a random integer ranged from `min` to `max`. */\nfunction random(min, max) {\n    return min + Math.floor(Math.random() * (max - min + 1));\n}\nexports.random = random;\n/** Creates a generator that produces sequential numbers from `min` to `max` (inclusive). */\nfunction* sequence(min, max, step = 1, loop = false) {\n    let id = min;\n    while (true) {\n        yield id;\n        if (id >= max) {\n            if (loop) {\n                id = min;\n            }\n            else {\n                break;\n            }\n        }\n        else {\n            id += step;\n        }\n    }\n}\nexports.sequence = sequence;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.as = exports.omit = exports.pick = exports.patch = exports.hasOwnMethod = exports.hasOwn = void 0;\nfunction hasOwn(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n}\nexports.hasOwn = hasOwn;\n;\n/**\n * Returns `true` if the specified object has the indicated method as its own method (in its own\n * prototype). If the method is inherited, or is not in the prototype, or does not exist, this\n * function returns `false`.\n */\nfunction hasOwnMethod(obj, method) {\n    var _a;\n    let proto = Object.getPrototypeOf(obj);\n    if (!proto || !hasOwn(proto, method)) {\n        return false;\n    }\n    return typeof ((_a = Object.getOwnPropertyDescriptor(proto, method)) === null || _a === void 0 ? void 0 : _a.value) === \"function\";\n}\nexports.hasOwnMethod = hasOwnMethod;\nfunction patch(target, ...sources) {\n    for (const source of sources) {\n        for (const key of Reflect.ownKeys(source)) {\n            if (!hasOwn(target, key) || target[key] === undefined) {\n                target[key] = source[key];\n            }\n        }\n    }\n    return target;\n}\nexports.patch = patch;\n;\nfunction pick(obj, keys) {\n    return keys.reduce((result, key) => {\n        if (key in obj && obj[key] !== undefined) {\n            result[key] = obj[key];\n        }\n        return result;\n    }, {});\n}\nexports.pick = pick;\nfunction omit(obj, keys) {\n    const allKeys = Reflect.ownKeys(obj);\n    const keptKeys = allKeys.filter(key => !keys.includes(key));\n    const result = pick(obj, keptKeys);\n    // special treatment for Error types\n    if (obj instanceof Error) {\n        [\"name\", \"message\", \"cause\"].forEach(key => {\n            if (!keys.includes(key) &&\n                obj[key] !== undefined &&\n                !hasOwn(result, key)) {\n                result[key] = obj[key];\n            }\n        });\n    }\n    return result;\n}\nexports.omit = omit;\nfunction as(obj, type) {\n    if (typeof type !== \"function\") {\n        throw new TypeError(\"type must be a valid constructor\");\n    }\n    let _type;\n    let primitiveMap = {\n        \"string\": String,\n        \"number\": Number,\n        \"bigint\": BigInt,\n        \"boolean\": Boolean,\n        \"symbol\": Symbol\n    };\n    if (obj instanceof type) {\n        if ([String, Number, Boolean].includes(type)) {\n            return obj.valueOf(); // make sure the primitives are returned.\n        }\n        else {\n            return obj;\n        }\n    }\n    else if ((_type = typeof obj) && primitiveMap[_type] === type) {\n        return obj;\n    }\n    return null;\n}\nexports.as = as;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.until = exports.sleep = exports.after = exports.timeout = void 0;\n/** Try to resolve a promise with a timeout limit. */\nasync function timeout(value, ms) {\n    const result = await Promise.race([\n        value,\n        new Promise((_, reject) => setTimeout(() => {\n            reject(new Error(`operation timeout after ${ms}ms`));\n        }, ms))\n    ]);\n    return result;\n}\nexports.timeout = timeout;\n/** Resolves a promise only after the given duration. */\nasync function after(value, ms) {\n    const [result] = await Promise.allSettled([\n        value,\n        new Promise(resolve => setTimeout(resolve, ms))\n    ]);\n    if (result.status === \"fulfilled\") {\n        return result.value;\n    }\n    else {\n        throw result.reason;\n    }\n}\nexports.after = after;\n/** Blocks the context for a given time. */\nasync function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\nexports.sleep = sleep;\n/** Blocks the context until the test is passed. */\nasync function until(test) {\n    if (typeof globalThis.setImmediate === \"undefined\") {\n        // @ts-ignore\n        globalThis.setImmediate = (cb) => setTimeout(cb, 0);\n    }\n    do {\n        await new Promise(globalThis.setImmediate);\n    } while ((await test()) == false);\n}\nexports.until = until;\n//# sourceMappingURL=index.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isIterable = isIterable;\nexports.isAsyncIterable = isAsyncIterable;\nexports.isIteratorLike = isIteratorLike;\nexports.isIterableIterator = isIterableIterator;\nexports.isAsyncIterableIterator = isAsyncIterableIterator;\nexports.isGenerator = isGenerator;\nexports.isAsyncGenerator = isAsyncGenerator;\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nif (!Symbol.asyncIterator) {\n  Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\");\n}\n\n/**\n * Checks if the given object is an Iterable (implemented `@@iterator`).\n * @returns {obj is Iterable<any>}\n */\nfunction isIterable(obj) {\n  return obj !== null && obj !== undefined && typeof obj[Symbol.iterator] === \"function\";\n}\n\n/**\n * Checks if the given object is an AsyncIterable (implemented `@@asyncIterator`).\n * @returns {obj is AsyncIterable<any>}\n */\nfunction isAsyncIterable(obj) {\n  return obj !== null && obj !== undefined && typeof obj[Symbol.asyncIterator] === \"function\";\n}\n\n/**\n * Checks if the given object is an IteratorLike (implemented `next`).\n * @returns {obj is { next: Function }}\n */\nfunction isIteratorLike(obj) {\n  // An iterable object has a 'next' method, however including a 'next' method\n  // doesn't ensure the object is an iterator, it is only iterator-like.\n  return _typeof(obj) === \"object\" && obj !== null && typeof obj.next === \"function\";\n}\n\n/**\n * Checks if the given object is an IterableIterator (implemented both\n * `@@iterator` and `next`).\n */\nfunction isIterableIterator(obj) {\n  return isIteratorLike(obj) && typeof obj[Symbol.iterator] === \"function\";\n}\n\n/**\n * Checks if the given object is an AsyncIterableIterator (implemented\n * both `@@asyncIterator` and `next`).\n * @returns {obj is AsyncIterableIterator<any>}\n */\nfunction isAsyncIterableIterator(obj) {\n  return isIteratorLike(obj) && typeof obj[Symbol.asyncIterator] === \"function\";\n}\n\n/**\n * Checks if the given object is a Generator.\n * @returns {obj is Generator}\n */\nfunction isGenerator(obj) {\n  return isIterableIterator(obj) && hasGeneratorSpecials(obj);\n}\n\n/**\n * Checks if the given object is an AsyncGenerator.\n * @returns {obj is AsyncGenerator}\n */\nfunction isAsyncGenerator(obj) {\n  return isAsyncIterableIterator(obj) && hasGeneratorSpecials(obj);\n}\nfunction hasGeneratorSpecials(obj) {\n  return typeof obj[\"return\"] === \"function\" && typeof obj[\"throw\"] === \"function\";\n}\n","\"use strict\";\n\n/**\n * Checks if an object could be an instantiable class.\n * @param {any} obj\n * @returns {obj is new (...args: any[]) => any}\n */\nfunction couldBeClass(obj) {\n    if (typeof obj != \"function\") return false;\n\n    // async function or arrow function\n    if (obj.prototype === undefined)\n        return false;\n\n    // generator function and malformed inheritance\n    if (obj.prototype.constructor !== obj)\n        return false;\n\n    // has own prototype properties\n    if (Object.getOwnPropertyNames(obj.prototype).length >= 2)\n        return true;\n\n    var str = String(obj);\n\n    // ES6 class\n    if (str.slice(0, 5) == \"class\")\n        return true;\n\n    // anonymous function\n    if (/^function\\s*\\(|^function anonymous\\(/.test(str))\n        return false;\n\n    var hasThis = /(call|apply|_classCallCheck)\\(this(, arguments)?\\)|\\bthis(.\\S+|\\[.+?\\])\\s*(=|\\()|=\\s*this[,;]/.test(str);\n\n    // Upper-cased first char of the name and has `this` in the body, or it's\n    // a native class in ES5 style.\n    if (/^function\\s+[A-Z]/.test(str) && (hasThis ||\n        (/\\[native code\\]/.test(str) &&\n            obj.name !== \"BigInt\" && // ES6 BigInt and Symbol is not class\n            obj.name !== \"Symbol\"\n        )\n    )) {\n        return true;\n    }\n\n    // TypeScript anonymous class to ES5 with default export\n    if (hasThis && obj.name === \"default_1\")\n        return true;\n\n    return false;\n}\n\nexports.couldBeClass = couldBeClass;\nexports.default = couldBeClass;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isArrayLike = isArrayLike;\nexports.isBufferLike = void 0;\nexports.isCollectionLike = isCollectionLike;\nexports.isDictLike = isDictLike;\nexports.isErrorLike = isErrorLike;\nexports.isObjectIdLike = isObjectIdLike;\nexports.isPromiseLike = isPromiseLike;\nexports.isTypedArrayLike = isTypedArrayLike;\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0) { ; } } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n/**\n * @param {any} value \n * @param {Array<[string|symbol, string]>} props \n * @param {Array<string>} types\n */\nfunction isObjectWith(value) {\n  var isObj = _typeof(value) === \"object\" && value !== null;\n  for (var _len = arguments.length, props = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    props[_key - 1] = arguments[_key];\n  }\n  return isObj && props.every(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      p = _ref2[0],\n      t = _ref2[1];\n    return p in value && _typeof(value[p]) === t;\n  });\n}\nfunction isEmptyDict(obj) {\n  try {\n    var str = JSON.stringify(obj);\n    return str === \"{}\" || str === \"[]\";\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Checks if the input value is a dict `object`, which includes key-value pairs.\n * @returns {value is { [x: string | symbol]: any; }}\n */\nfunction isDictLike(value) {\n  return _typeof(value) === \"object\" && value !== null && (value.constructor === Object || !(value instanceof Date) && !(value instanceof RegExp) && !isArrayLike(value, true) && !isObjectIdLike(value) && !isEmptyDict(value) && !isTypedArrayLike(value) && !isCollectionLike(value) && !isPromiseLike(value));\n}\n\n/**\n * Checks if the input value is an `object` with `length` property or a string.\n * @returns {value is ArrayLike<any>}\n */\nfunction isArrayLike(value) {\n  var strict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (Array.isArray(value)) {\n    return true;\n  } else if (!strict) {\n    return isObjectWith(value, [\"length\", \"number\"]) || typeof value === \"string\";\n  } else if (isObjectWith(value, [\"length\", \"number\"])) {\n    var keys = Object.keys(value);\n    var isNonEnumLength = !keys.includes(\"length\");\n    var indexes;\n    if (value.length === 0 || (indexes = keys.map(Number).filter(isFinite)).length === 0) {\n      return isNonEnumLength;\n    } else {\n      var hasIterator = typeof value[Symbol.iterator] === \"function\";\n      for (var i = value.length; i--;) {\n        if (!indexes.includes(i) && !(isNonEnumLength || hasIterator)) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Checks if the input value is an `object` with `size` property and\n * `[Symbol.iterator]()` method, or is an instance of **WeakMap** or\n * **WeakSet** if `excludeWeakOnes` is not set.\n */\nfunction isCollectionLike(value) {\n  var excludeWeakOnes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return isObjectWith(value, [\"size\", \"number\"], [Symbol.iterator, \"function\"]) || !excludeWeakOnes && (value instanceof WeakMap || value instanceof WeakSet);\n}\n\n/**\n * \n * @returns {value is ArrayLike<number> & Pick<Uint8Array, \"byteLength\" | \"slice\">}\n */\nfunction isTypedArrayLike(value) {\n  return isObjectWith(value, [\"byteLength\", \"number\"], [\"slice\", \"function\"]);\n}\n\n/** @deprecated An alias of `isTypedArrayLike`. */\nvar isBufferLike = isTypedArrayLike;\n\n/**\n * Checks if the input value is an `object` with `name`, `message` and `stack`\n * properties.\n * @returns {value is Error}\n */\nexports.isBufferLike = isBufferLike;\nfunction isErrorLike(value) {\n  return isObjectWith(value, [\"name\", \"string\"], [\"message\", \"string\"], [\"stack\", \"string\"]);\n}\n\n/**\n * Checks if the input is an `object` with `then()` method.\n * @returns {value is PromiseLike<any>}\n */\nfunction isPromiseLike(value) {\n  return isObjectWith(value, [\"then\", \"function\"]);\n}\nfunction isObjectIdLike(value) {\n  return _typeof(value) === \"object\" && value !== null && (value.constructor.name === \"ObjectId\" || value.constructor.name === \"ObjectID\");\n}\n","import { isArrayLike, isBufferLike, isCollectionLike } from \"is-like\";\n\nconst bytes: (str: string) => number = require(\"utf8-length\");\nconst encoder = typeof TextEncoder === \"function\" ? new TextEncoder() : null;\n\nexport default count;\n\n/** Counts the length of a string. */\nfunction count(str: string, byteLength?: boolean): number;\n/** Counts how many times a substring appeared in the given string. */\nfunction count(str: string, substr: string): number;\n/** Counts the length of an array-like object. */\nfunction count<T>(arr: ArrayLike<T>): number;\n/** Counts how many times an element appeared in the given array-like object. */\nfunction count<T>(arr: ArrayLike<T>, ele: T): number;\n/** Counts the size of a collection. */\nfunction count(collection: Map<any, any> | Set<any>): number;\n/** Counts the capacity of an object (of how many properties it has). */\nfunction count(obj: any): number;\nfunction count(target: any, option: any = void 0) {\n    if (typeof target === \"string\") {\n        if (typeof option === \"string\") {\n            if (!option) {\n                return target.length + 1;\n            } else if (!target) {\n                return 0;\n            }\n\n            return target.split(option).length - 1;\n        } else if (option === true) {\n            if (typeof Buffer === \"function\" &&\n                typeof Buffer.byteLength === \"function\"\n            ) {\n                return Buffer.byteLength(target);\n            } else if (encoder) {\n                return encoder.encode(target).byteLength;\n            } else {\n                return bytes(target);\n            }\n        } else {\n            return target.length;\n        }\n    } else if (isArrayLike(target, true)) {\n        if (arguments.length === 2) {\n            let times = 0;\n\n            for (let i = target.length; i--;) {\n                // treat 0 equals -0 and NaN equals NaN\n                if (target[i] === option || Object.is(target[i], option)) {\n                    times++;\n                }\n            }\n\n            return times;\n        } else {\n            return target.length;\n        }\n    } else if (isBufferLike(target)) {\n        return target.byteLength;\n    } else if (isCollectionLike(target, true)) {\n        return target.size;\n    } else {\n        return Object.keys(target).length;\n    }\n}\n","import typeOf from './typeOf';\n\n/**\n * Sets a property on the target object.\n * @param value Normally this is the value bound to the property, however, it\n *  could be used to set the getter and the setter using the signature\n *  `{ get: Function, set?: Function }`.\n * @param enumerable By default, the property is non-enumerable and can't be\n *  seen by the console, use this option to make it enumerable and visible to\n *  the console.\n * @param writable By default, the property is readonly once set, use this\n *  option to allow it being writable.\n *  **This property doesn't work with setter.**\n */\nexport default function define(\n    obj: any,\n    prop: string | symbol,\n    value: any,\n    enumerable = false,\n    writable = false,\n): void {\n    if ((typeOf(value) as any) === Object) {\n        if (isGetter(value) || isGetterAndSetter(value)) {\n            Object.defineProperty(obj, prop, {\n                configurable: true,\n                enumerable,\n                ...value\n            });\n            return;\n        }\n    }\n\n    Object.defineProperty(obj, <string | symbol>prop, {\n        configurable: true,\n        enumerable,\n        writable,\n        value\n    });\n}\n\nfunction isGetter(obj: any) {\n    return String(Object.keys(obj)) === \"get\"\n        && typeof obj[\"get\"] === \"function\";\n}\n\nfunction isGetterAndSetter(obj: any) {\n    let sign = String(Object.keys(obj));\n    return (sign === \"get,set\" || sign === \"set,get\")\n        && typeof obj[\"get\"] === \"function\"\n        && typeof obj[\"set\"] === \"function\";\n}\n","import { isDictLike } from \"is-like\";\nimport isEmpty from './isEmpty';\nimport isVoid from './isVoid';\n\n\n/**\n * Creates an array that contains the difference set between `origin` and\n * `input`;\n */\nexport default function diff<T>(origin: T[], input: T[]): T[];\n/**\n * Evaluates the differences between `origin` and `input`, if a property exists\n * in both objects and the values are not equal, the `input` one will be taken.\n * \n * NOTE: This function treats all void values equal and will not differ them.\n */\nexport default function diff<T, U>(origin: T, input: U): Diff<T, U>;\nexport default function diff<T, U>(origin: T, input: U, deep: true): DeepPartial<T & U>;\nexport default function diff(origin: any, input: any, deep = false) {\n    if (Array.isArray(origin) && Array.isArray(input)) {\n        return [\n            ...input.filter(value => !origin.includes(value)),\n            ...origin.filter(value => !input.includes(value))\n        ];\n    } else if (isDictLike(origin) && isDictLike(input)) {\n        let keys = Reflect.ownKeys(input);\n        let _keys = Reflect.ownKeys(origin);\n        let result: any = {};\n\n        keys.forEach(key => {\n            if (origin[key] !== input[key] &&\n                !(isVoid(origin[key]) && isVoid(input[key])) // ignore void values\n            ) {\n                if (deep &&\n                    typeof origin[key] === \"object\" && origin[key] !== null &&\n                    typeof input[key] === \"object\" && input[key] !== null\n                ) {\n                    let _result = diff(origin[key], input[key], deep);\n\n                    if (!isEmpty(_result)) {\n                        result[key] = _result;\n                    }\n                } else {\n                    result[key] = input[key];\n                }\n            }\n        });\n\n        _keys.forEach(key => {\n            keys.includes(key) || (result[key] = origin[key]);\n        });\n\n        return result;\n    } else {\n        return input;\n    }\n}\n","import { isArrayLike, isDictLike } from 'is-like';\nimport isBetween from './isBetween';\nimport keysOf from './keysOf';\n\nconst truePattern = /^\\s*(true|yes|on)\\s*$/i;\nconst falsePattern = /^\\s*(false|no|off)\\s*$/i;\nconst nullPattern = /^\\s*(null|nil|none|void|undefined)\\s*$/i;\nconst nanPattern = /^\\s*NaN\\s*$/;\nconst infinityPattern = /^\\s*-?Infinity\\s*/;\nconst regexPattern = /^\\s*\\/(.+)\\/([gimuys]*)\\s*$/;\nconst numberInterval: [number, number] = [\n    Number.MIN_SAFE_INTEGER,\n    Number.MAX_SAFE_INTEGER\n];\n\n/**\n * Casts the target object or its contents to the closest types automatically.\n * This function is useful when reading config from a file or fetching data from\n * the web.\n */\nexport default function ensureType(target: any): any {\n    switch (typeof target) {\n        case \"string\": {\n            let re: RegExpMatchArray | null;\n\n            if (truePattern.test(target)) {\n                return true;\n            } else if (falsePattern.test(target)) {\n                return false;\n            } else if (nullPattern.test(target)) {\n                return null;\n            } else if (nanPattern.test(target)) {\n                return NaN;\n            } else if (infinityPattern.test(target)) {\n                return Number(target);\n            } else if (re = target.match(regexPattern)) {\n                return new RegExp(re[1] as string, re[2]);\n            } else {\n                let num = Number(target);\n\n                if (!isNaN(num) &&\n                    isBetween(num, numberInterval) &&\n                    target[0] !== \"+\" // Most likely a telephone number.\n                ) {\n                    return num;\n                } else {\n                    return target;\n                }\n            }\n        }\n\n        case \"object\": {\n            if (target === null) {\n                return null;\n            } else if (isArrayLike(target, true)) {\n                return ensureArray(target).map(ensureType);\n            } else if (isDictLike(target)) {\n                return keysOf(target).reduce((result, key) => {\n                    result[key] = ensureType(target[key]);\n                    return result;\n                }, <Record<string | symbol, any>>{});\n            } else {\n                return target;\n            }\n        }\n\n        default:\n            return target;\n    }\n}\n\nexport function ensureArray<T>(value: ArrayLike<T>): T[] {\n    return Array.isArray(value) ? value : Array.from(value);\n}\n","import isVoid from './isVoid';\nimport type { Constructor, TypedArray } from \"@ayonli/jsext\";\nimport { isDictLike, isArrayLike, isBufferLike } from 'is-like';\n\ntype OmitChildrenNodes<T> = Pick<T, {\n    [K in keyof T]: T[K] extends TypedArray\n    ? K\n    : T[K] extends (any[] | ArrayLike<any> | Function | Constructor<any> | Map<any, any> | Set<any> | Promise<any> | TypedArray)\n    ? K\n    : T[K] extends object\n    ? never\n    : K;\n}[keyof T]>;\n\ntype OmitChildrenElements<T> = Pick<T, {\n    [K in keyof T]: T[K] extends TypedArray\n    ? K\n    : T[K] extends (Function | Constructor<any> | Map<any, any> | Set<any> | Promise<any> | TypedArray)\n    ? K\n    : T[K] extends (object | any[] | ArrayLike<any>)\n    ? never\n    : K;\n}[keyof T]>;\n\n/**\n * Create an object with flatted properties of the original object, the children\n * nodes' properties will be transformed to a string-represented path.\n * NOTE: this function also flat array/array-like nodes (except for TypedArray).\n * @param depth Default value: `1`.\n * @example\n *  flatObject({ foo: { bar: \"Hello, World!\" } }) === { \"foo.bar\": \"Hello, World!\" }\n */\nexport default function flatObject<T extends object>(\n    obj: T,\n    depth?: number\n): OmitChildrenNodes<T> & Record<string | symbol, any>;\nexport default function flatObject<T extends object>(\n    obj: T,\n    depth: number,\n    flatArray: true\n): OmitChildrenElements<T> & Record<string | symbol, any>;\nexport default function flatObject(obj: any, depth = 1, flatArray = false) {\n    return flatDeep({}, obj, \"\", 0, depth, flatArray);\n}\n\nfunction flatDeep(\n    carrier: any,\n    source: any,\n    field: string,\n    depth: number,\n    maxDepth: number,\n    flatArray: boolean\n) {\n    let isArr: boolean | undefined;\n    let isDict: boolean | undefined;\n    let isContent = !isVoid(field) && field !== \"\";\n\n    if (depth === maxDepth || (\n        !(isArr = isArrayLike(source, true) && !isBufferLike(source)) &&\n        !(isDict = isDictLike(source))\n    )) {\n        carrier[field] = source;\n    } else if (isDict) {\n        Reflect.ownKeys(<object>source).forEach(key => {\n            let value = (<any>source)[key];\n\n            if (typeof key === \"symbol\") {\n                if (depth === 0) { // only allow top-level symbol properties\n                    carrier[key] = value;\n                }\n            } else {\n                flatDeep(\n                    carrier,\n                    value,\n                    isContent ? `${field}.${key}` : key,\n                    isContent ? depth + 1 : depth,\n                    maxDepth,\n                    flatArray\n                );\n            }\n        });\n    } else if (isArr) {\n        if (flatArray) {\n            for (let i = 0, len = (<any[]>source).length; i < len; ++i) {\n                flatDeep(\n                    carrier,\n                    (<any[]>source)[i],\n                    isContent ? `${field}.${i}` : String(i),\n                    isContent ? depth + 1 : depth,\n                    maxDepth,\n                    flatArray\n                );\n            }\n        } else {\n            carrier[field] = source;\n        }\n    }\n\n    return carrier;\n}\n","import type { Ensured } from \"@ayonli/jsext\";\n\nexport type Global = Ensured<Partial<Window & typeof globalThis>, keyof Window & typeof globalThis>;\n\n/** Gets the global object of the host environment. */\nexport default function getGlobal(): Global;\n/** Returns a property from the global object. */\nexport default function getGlobal<P extends keyof Global>(prop: P): Global[P];\n/** Returns a property from the global object. */\nexport default function getGlobal(prop: string): any;\nexport default function getGlobal(prop: string | undefined = void 0): any {\n    let _global: Global & { [prop: string]: any; } | undefined;\n\n    if (typeof globalThis === \"object\") {\n        _global = <any>globalThis;\n    } else if (typeof self === \"object\") {\n        _global = self;\n    } else if (typeof global === \"object\") {\n        _global = <any>global;\n    } else if (typeof window === \"object\") {\n        _global = window;\n    }\n\n    return _global && (prop ? _global[prop] : _global);\n}\n","/**\n * Checks if a number is between two numbers (gte than the minimal value and lte\n * than the maximum value).\n */\nexport default function isBetween(value: number, [min, max]: [number, number]) {\n    return value >= min && value <= max;\n}","import { isArrayLike, isBufferLike, isCollectionLike } from \"is-like\";\n\nconst BaseEmptyPrimitives: any[] = [\"\", NaN, null, void 0];\nconst EmptyPrimitives: any[] = [...BaseEmptyPrimitives, 0, false];\n\nif (typeof BigInt === \"function\")\n    EmptyPrimitives.push(BigInt(\"0\"));\n\n/**\n * Checks if the value resolves to an empty object or a falsy value.\n */\nexport default function isEmpty(value: any, deep = false): boolean {\n    return test(value, Boolean(deep), EmptyPrimitives);\n}\n\nfunction test(\n    value: any,\n    deep: boolean,\n    emptyPrimitives: any[]\n): boolean {\n    if (emptyPrimitives.includes(value))\n        return true;\n\n    if (typeof value === \"object\") {\n        if (value instanceof RegExp) {\n            return false;\n        } else if (value instanceof Date) {\n            return String(value) === \"Invalid Date\";\n        } else if (value instanceof Error) {\n            return value.message.length === 0;\n        } else if (isBufferLike(value)) {\n            return value.byteLength === 0;\n        } else if (isArrayLike(value, true)) {\n            if (value.length === 0) {\n                return true;\n            } else if (!deep) {\n                return false;\n            } else {\n                for (let i = 0, len = value.length; i < len; ++i) {\n                    if (!test(value[i], deep, BaseEmptyPrimitives)) {\n                        return false;\n                    }\n                }\n\n                return true;\n            }\n        } else if (isCollectionLike(value, true)) {\n            if (value.size === 0) {\n                return true;\n            } else if (!deep) {\n                return false;\n            } else {\n                if (value instanceof Map) {\n                    for (let v of value.values()) {\n                        if (!test(v, deep, BaseEmptyPrimitives)) {\n                            return false;\n                        }\n                    }\n\n                    return true;\n                } else if (value instanceof Set) {\n                    for (let v of value) {\n                        if (!test(v, deep, BaseEmptyPrimitives)) {\n                            return false;\n                        }\n                    }\n\n                    return true;\n                }\n\n                return false;\n            }\n        } else {\n            let keys = Reflect.ownKeys(value);\n\n            if (keys.length === 0) {\n                return true;\n            } else if (!deep) {\n                return false;\n            } else {\n                return keys.every(\n                    k => test(value[k], deep, BaseEmptyPrimitives)\n                );\n            }\n        }\n    }\n\n    return false;\n}\n","import { isFloat as _isFloat } from \"@ayonli/jsext/number\";\n\n/** @deprecated use `Number.isFloat` from `@ayonli/jsext/number/augment` instead. */\nconst isFloat = _isFloat as (value: any) => value is number;\nexport default isFloat;\n","/**\n * Checks if the value is an integer number (or bigint).\n * \n * @deprecated use `Number.isInteger` instead.\n */\nexport default function isInteger(value: any): value is (number | bigint) {\n    return typeof value === \"bigint\" || Number.isInteger(value);\n}\n","/**\n * Checks if the value is a number or numeric string.\n */\nexport default function isNumeric(value: any): value is (number | bigint | string) {\n    let type = typeof value;\n    return type === \"number\"\n        || type === \"bigint\"\n        || (type === \"string\" && !Number.isNaN(value));\n}\n","import { hasOwn } from \"@ayonli/jsext/object\";\n\n/** @deprecated use `Object.hasOwn` from `@ayonli/jsext/object/augment` instead. */\nconst isOwnKey = hasOwn;\nexport default isOwnKey;\n","import { hasOwnMethod } from \"@ayonli/jsext/object\";\n\n/** @deprecated use `Object.hasOwnMethod` from `@ayonli/jsext/object/augment` instead. */\nconst isOwnMethod = hasOwnMethod;\nexport default isOwnMethod;\n","import type { Constructor } from \"@ayonli/jsext\";\n\n/** Checks if a class is a sub-class of (inherited from) the base class. */\nexport default function isSubClassOf<T, B>(\n    target: Constructor<T>,\n    base: Constructor<B>\n) {\n    return typeof target === \"function\"\n        && typeof base === \"function\"\n        && target.prototype instanceof base;\n}\n","/**\n * Checks if a value is resolved to void (`null`, `undefined` or `NaN`).\n */\nexport default function isVoid(value: any): value is void {\n    return value === null || value === undefined || Object.is(value, NaN);\n}","/** Returns the indexes of the given array. */\nexport default function keysOf<T extends any[]>(arr: T): number[];\n/** Returns an array of the given function's own properties. */\nexport default function keysOf<T extends Function>(fn: T): (string | symbol)[];\n/** Returns an array of the given object's own properties. */\nexport default function keysOf<T extends object>(obj: T): (keyof T | symbol)[];\nexport default function keysOf(obj: object): (string | number | symbol)[] {\n    if (Array.isArray(obj)) {\n        return Object.keys(obj).map(Number);\n    } else {\n        return Reflect.ownKeys(obj);\n    }\n}","import { omit as _omit } from \"@ayonli/jsext/object\";\n\n/** Creates an array composed without the picked items. */\nexport default function omit<T extends any>(arr: T[], items: T[]): T[];\n/**\n * Creates an object composed without the picked properties.\n * NOTE: this function will collect both the own keys and the enumerable\n * properties from the prototype chain.\n */\nexport default function omit<T extends object, U extends keyof T>(obj: T, props: U[]): Omit<T, U>;\nexport default function omit<T>(obj: T, props: (string | symbol)[]): Partial<T>;\nexport default function omit(obj: any, props: (string | number | symbol)[]) {\n    if (Array.isArray(obj)) {\n        return obj.filter(i => !props.includes(i));\n    } else {\n        return _omit(obj, props);\n    }\n}\n","import isVoid from \"./isVoid\";\nimport isEmpty from \"./isEmpty\";\nimport { isArrayLike, isBufferLike } from 'is-like';\n\n/**\n * Creates an object composed with only the non-void properties.\n * @param omitEmptyObjects If set, empty properties of type `object` will be\n *  removed as well.\n * @param omitEmptyStrings If set, empty properties of type `string` will be\n *  removed as well.\n */\nexport default function omitVoid<T>(\n    target: T,\n    deep = false,\n    omitEmptyObjects = false,\n    omitEmptyStrings = false\n): T {\n    return doOmit(target, deep, omitEmptyObjects, omitEmptyStrings, 0) as T;\n}\n\nexport function doOmit<T extends any>(\n    target: T,\n    deep: boolean,\n    omitEmptyObjects: boolean,\n    omitEmptyStrings: boolean,\n    depth: number\n): T | undefined {\n    if (typeof target === \"string\") {\n        return omitEmptyStrings && target.trim() === \"\"\n            ? (depth > 0 ? void 0 : \"\" as T)\n            : target;\n    } else if (target === null\n        || typeof target !== \"object\"\n        || target instanceof Date\n        || target instanceof Error\n        || target instanceof RegExp\n        || isBufferLike(target)\n    ) {\n        return target;\n    } else if (omitEmptyObjects && isEmpty(target)) {\n        return depth > 0 ? void 0 : (isArrayLike(target, true) ? [] : {}) as any;\n    }\n\n    if (isArrayLike(target, true)) {\n        let arr: any[] = [];\n\n        for (let i = 0, len = (<ArrayLike<any>>target).length; i < len; ++i) {\n            let value = target[i];\n\n            if (!isVoid(value)) {\n                if (deep) {\n                    value = doOmit(\n                        value,\n                        deep,\n                        omitEmptyObjects,\n                        omitEmptyStrings,\n                        depth + 1);\n                    isVoid(value) || arr.push(value);\n                } else {\n                    arr.push(value);\n                }\n            }\n        }\n\n        if (depth > 0 && omitEmptyObjects && isEmpty(arr)) {\n            return void 0;\n        } else {\n            return arr as any;\n        }\n    } else {\n        let obj = Reflect.ownKeys(target as object).reduce((obj, key) => {\n            let value = (target as any)[key];\n\n            if (!isVoid(value)) {\n                if (deep) {\n                    value = doOmit(\n                        value,\n                        deep,\n                        omitEmptyObjects,\n                        omitEmptyStrings,\n                        depth + 1);\n                    isVoid(value) || ((obj as any)[key] = value);\n                } else {\n                    (obj as any)[key] = value;\n                }\n            }\n\n            return obj;\n        }, <T>{});\n\n        if (depth > 0 && omitEmptyObjects && isEmpty(obj)) {\n            return void 0;\n        } else {\n            return obj;\n        }\n    }\n}\n","import { isDictLike } from 'is-like';\nimport isEmpty from './isEmpty';\nimport isVoid from './isVoid';\n\n\n/**\n * Patches the differences onto the `origin` object from the `input` object. If\n * a property exists in both objects and the values are not equal, the `input`\n * one will be taken. However, those properties that are only presents in the\n * `origin` object will remain untouched.\n * \n * NOTE: This function mutates the `origin` object and returns the patched\n * differences, when patching, any void value in the `input` object will be\n * ignored.\n * \n * This function is very useful, for example, a client issued a patch of the\n * resource and the server wants to know what properties has been modified by\n * this update so that it can perform some extra operations to provide a better\n * user experience.\n */\nexport default function patch<T, U>(\n    origin: T,\n    input: U,\n    deep = false,\n    ignoreEmptyStrings = false,\n): T & Partial<U> {\n    return doPatch(origin, input, deep, ignoreEmptyStrings, false);\n}\n\nfunction doPatch(\n    origin: any,\n    input: any,\n    deep: boolean,\n    ignoreEmptyStrings: boolean,\n    isChildNode: boolean\n) {\n    if (isDictLike(origin) && isDictLike(input)) {\n        let keys = Reflect.ownKeys(input);\n        let result: any = {};\n\n        keys.forEach(key => {\n            if (origin[key] !== input[key] &&\n                !isVoid(input[key]) && // ignore invalid values\n                (!ignoreEmptyStrings || input[key] !== \"\")\n            ) {\n                if (deep && isDictLike(origin[key]) && isDictLike(input[key])) {\n                    let _result = doPatch(\n                        origin[key],\n                        input[key],\n                        deep,\n                        ignoreEmptyStrings,\n                        true\n                    );\n\n                    if (!isEmpty(_result)) {\n                        result[key] = _result;\n                        Object.assign(origin[key], input[key]);\n                    }\n                } else {\n                    result[key] = origin[key] = input[key];\n                }\n            }\n        });\n\n        return result;\n    } else if (isChildNode) {\n        return input;\n    } else {\n        return {};\n    }\n}\n","import { pick as _pick } from \"@ayonli/jsext/object\";\n\n/** Creates an array composed of the picked elements. */\nexport default function pick<T extends any[]>(arr: T, indexes: number[]): T;\n/** Creates an object composed of the picked properties. */\nexport default function pick<T extends object, U extends keyof T>(obj: T, props: U[]): Pick<T, U>;\nexport default function pick<T>(obj: T, props: (string | symbol)[]): Partial<T>;\nexport default function pick(obj: any, props: (string | number | symbol)[]) {\n    if (Array.isArray(obj)) {\n        return (<number[]>props).map(i => obj[i]);\n    } else {\n        return _pick(obj, props);\n    }\n}\n","import { random } from \"@ayonli/jsext/number\";\n\n/** @deprecated use `Number.random` from `@ayonli/jsext/number/augment` instead. */\nconst rand = random;\nexport default rand;\n","import rand from './rand';\n\n/** \n * Generates a random string.\n * @param chars The possible characters.\n * @deprecated use `String.random` from `@ayonli/jsext/string/augment` instead.\n */\nexport default function randStr(\n    length: number,\n    chars = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n) {\n    let str = \"\";\n    let max = chars.length - 1;\n\n    while (0 < length--) {\n        str += chars[rand(0, max)];\n    }\n\n    return str;\n}\n","import { sleep as _sleep } from \"@ayonli/jsext/promise\";\n\n/** @deprecated use `Promise.sleep` from `@ayonli/jsext/promise/augment` instead. */\nconst sleep = _sleep;\nexport default sleep;\n","import { isArrayLike, isDictLike } from 'is-like';\nimport { ensureArray } from \"./ensureType\";\n\ndeclare var Deno: any;\n\n/**\n * Creates a new array with sorted elements of the original array, the sorted\n * array is in ascending order by default, unless providing a `compare` function\n * to determine how should the elements be ordered.\n * Unlike `Array.prototype.sort()`, this function always guarantees a stable\n * sort; and if all elements are numbers, they're sorted by their values instead\n * of converting to strings for sorting.\n */\nexport default function sort<T>(arr: ArrayLike<T>, compare?: (a: T, b: T) => number): T[];\n/**\n * Creates a new object with sorted keys (in ascending order) of the original\n * object, if `deep` is set, the children nodes will be sorted as well.\n * Note: symbol keys are not sorted and remain their original order.\n */\nexport default function sort<T extends object>(obj: T, deep?: boolean): T;\nexport default function sort(\n    target: any | any[],\n    method: ((a: any, b: any) => number) | boolean | undefined = void 0\n) {\n    if (isArrayLike(target, true)) {\n        let arr = ensureArray(target);\n        let compare = <(a: any, b: any) => number>method;\n\n        // If the compare function is omitted and all the elements are numbers\n        // (or of bigint), sort them by their values.\n        if (!compare && (onlyNumbers(arr) || onlyNumbers(arr, \"bigint\"))) {\n            compare = (a: number, b: number) => a - b;\n        }\n\n        if (shouldUseNativeSort(arr)) {\n            return arr.sort(compare);\n        }\n\n        // Emulate stable sort.\n        // Reference: http://blog.vjeux.com/2010/javascript/javascript-sorting-table.html\n        return arr\n            .map((value, index) => ({ value, index }))\n            .sort((a, b) => compare(a.value, b.value) || a.index - b.index)\n            .map(({ value }) => value);\n    } else if (isDictLike(target)) {\n        let deep = Boolean(method);\n        let keys = [\n            ...sort(Object.getOwnPropertyNames(target)), // sort the string keys\n            ...Object.getOwnPropertySymbols(target)\n        ];\n\n        return keys.reduce((result, key) => {\n            let value = target[key];\n\n            if (deep) {\n                if (isArrayLike(value, true)) {\n                    value = ensureArray(value).map(item => {\n                        return isDictLike(item) ? sort(item, deep) : item;\n                    });\n                } else if (isDictLike(value)) {\n                    value = sort(value, deep);\n                }\n            }\n\n            result[key] = value;\n            return result;\n        }, {} as any);\n    } else {\n        if (typeof method === \"function\") {\n            throw new TypeError(\"The target to sort is not an array\");\n        } else if (typeof method === \"boolean\") {\n            throw new TypeError(\"The target to sort is not a pure object\");\n        } else {\n            throw new TypeError(\n                \"The target to sort is not an array or a pure object\"\n            );\n        }\n    }\n}\n\nfunction onlyNumbers(arr: any[], type: \"number\" | \"bigint\" = \"number\") {\n    return arr.every(ele => typeof ele === type);\n}\n\nfunction shouldUseNativeSort(arr: any[]) {\n    if (typeof process === \"object\" && typeof process.versions === \"object\") {\n        return arr.length <= 10\n            || parseFloat(process.versions.v8 || \"0\") >= 7.0;\n    } else if (typeof Deno === \"object\") {\n        return true;\n    } else if (typeof navigator === \"object\"\n        && typeof navigator.userAgent === \"string\"\n    ) {\n        let match = navigator.userAgent.match(\n            /(Chrome|Firefox|Safari|Edge|OPR)\\/(\\d+)/\n        );\n\n        if (match) {\n            let name = match[1];\n            let version = parseFloat(match[2] as string);\n\n            if ((name === \"Edge\" && arr.length <= 512) ||\n                (name === \"Chrome\" && (version >= 70) || arr.length <= 10) ||\n                (name === \"Firefox\" && version >= 3) ||\n                (name === \"Safari\" && version >= 10.1) ||\n                (name === \"OPR\" && version >= 54)\n            ) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n","import { isArrayLike, isBufferLike, isCollectionLike } from \"is-like\";\nimport type { RealArrayLike } from \"@ayonli/jsext/array\";\nimport type { TypedArray } from \"@ayonli/jsext\";\n\nfunction checkNumberArgument(name: string, value: any) {\n    if (typeof value !== \"number\") {\n        throw new TypeError(`argument '${name}' must be a number`);\n    } else if (value < 1) {\n        throw new RangeError(`argument '${name}' must be 1 or higher`);\n    }\n}\n\nfunction splitArrayLike(arr: ArrayLike<any>, length: number, total: number | undefined = void 0) {\n    let result: any[] = [];\n\n    for (let i = 0, j = (total || arr.length); i < j; i += length) {\n        if (typeof (arr as RealArrayLike<any>).slice === \"function\") {\n            result.push((arr as RealArrayLike<any>).slice(i, i + length));\n        } else {\n            result.push(Array.prototype.slice.call(arr, i, i + length));\n        }\n    }\n\n    return result;\n}\n\nfunction splitBuffer(buf: Buffer, sep: string | Buffer) {\n    let result: Buffer[] = [];\n    let offset = 0;\n    let length = sep.length;\n    let total = buf.byteLength;\n\n    while (offset < total) {\n        let index = buf.indexOf(sep, offset);\n\n        if (index !== -1) {\n            result.push(buf.slice(offset, index));\n            offset = index + length;\n        } else {\n            result.push(buf.slice(offset));\n            offset = total;\n        }\n    }\n\n    return result;\n}\n\nfunction splitObject(obj: any, size: number) {\n    let proto = Object.getPrototypeOf(obj);\n    let keyChunks = splitArrayLike(Object.keys(obj), size);\n    let result = [];\n\n    for (let keys of keyChunks) {\n        let chunk = Object.create(proto);\n        result.push(chunk);\n\n        for (let key of keys) {\n            chunk[key] = obj[key];\n        }\n    }\n\n    return result;\n}\n\nfunction splitNumber(num: number, step: number) {\n    let result: number[] = [];\n    let offset = 0;\n\n    while ((offset += step) <= num) {\n        result.push(offset);\n    }\n\n    if (num > offset - step) {\n        result.push(num);\n    }\n\n    return result;\n}\n\n/** Splits a string into chunks by the given separator. */\nexport default function split(str: string, separator: string | RegExp): string[];\n/** Splits a string into chunks with the given length. */\nexport default function split(str: string, length: number): string[];\n/** Splits a number into serials with the given step. */\nexport default function split(num: number, step: number): number[];\n/** Splits a Buffer into chunks by the given separator. */\nexport default function split<T extends Buffer>(buf: T, separator: string | Buffer): T[];\n/** Splits a Buffer, an ArrayBuffer, or a TypedArray into chunks with the given byteLength. */\nexport default function split<T extends Buffer | ArrayBufferLike | TypedArray>(buf: T, byteLength: number): T[];\n/** Splits an array into chunks of arrays with the given length. */\nexport default function split<T extends Array<any>>(arr: T, length: number): T[];\n/** Splits an array-like object into chunks of arrays with the given length. */\nexport default function split<T>(list: ArrayLike<T>, length: number): T[][];\n/** Splits a collection into chunks with the given size. */\nexport default function split<T extends Set<any> | Map<any, any>>(collection: T, size: number): T[];\n/** Splits an object into multiple objects with partial properties. */\nexport default function split<T extends object>(obj: T extends Function ? never : T, size: number): Partial<T>[];\nexport default function split(obj: any, sep: any) {\n    if (arguments.length < 2) {\n        throw new SyntaxError(`2 arguments required, received ${arguments.length}`);\n    } else if (typeof obj === \"string\") {\n        if (typeof sep === \"string\" || sep instanceof RegExp) {\n            return obj.split(sep);\n        } else {\n            checkNumberArgument(\"length\", sep);\n            return splitArrayLike(obj, sep);\n        }\n    } else if (typeof obj === \"number\") {\n        checkNumberArgument(\"step\", sep);\n        return splitNumber(obj, sep);\n    } else if (typeof Buffer === \"function\"\n        && Buffer.isBuffer(obj)\n        && (typeof sep === \"string\" || Buffer.isBuffer(sep))\n    ) {\n        return splitBuffer(obj, sep);\n    } else if (isBufferLike(obj)) {\n        checkNumberArgument(\"byteLength\", sep);\n        return splitArrayLike(obj, sep, obj.byteLength);\n    } else if (isArrayLike(obj, true)) {\n        checkNumberArgument(\"length\", sep);\n        return splitArrayLike(obj, sep);\n    } else if (isCollectionLike(obj)) {\n        let ctor = obj[\"constructor\"];\n        checkNumberArgument(\"size\", sep);\n        return splitArrayLike([...obj], sep).map(list => new ctor(list));\n    } else if (typeof obj === \"object\" && obj !== null) {\n        checkNumberArgument(\"size\", sep);\n        return splitObject(obj, sep);\n    } else {\n        throw new TypeError(\"argument 'obj' must be a string, a number or an object\");\n    }\n}\n","import isNumeric from './isNumeric';\nimport isVoid from './isVoid';\n\nexport default timestamp;\n\n/** Returns the current UNIX timestamp. */\nfunction timestamp(ms?: boolean): number;\n/**\n * Returns the UNIX timestamp according the input date or time.\n * \n * TIP: since v0.2.3, this function supports the date string format in\n * `<year>,<monthIndex>,[date],[hours],[minutes],[seconds],[milliseconds]`,\n * which segments is used as arguments for `Date` constructor.\n * \n * NOTE: if the input value is a number, it must be of milliseconds.\n */\nfunction timestamp(input: string | number | Date, ms?: boolean): number;\nfunction timestamp(input: any, ms = false) {\n    if (typeof input === \"boolean\") {\n        ms = input;\n        input = void 0;\n    }\n\n    input = input || new Date();\n\n    if (input instanceof Date) {\n        return ms ? input.valueOf() : Math.floor(input.valueOf() / 1000);\n    } else if (typeof input === \"number\") {\n        return ms ? input : Math.floor(input / 1000);\n    } else {\n        let date: Date;\n        let dateTime = String(input).trim();\n\n        if (dateTime.includes(\",\") && dateTime.split(\",\").every(isNumeric)) {\n            date = parseDateRawArgs(dateTime);\n        } else {\n            if (/^\\d{1,2}:\\d{2}(:\\d{2})?/.test(dateTime)) { // time only\n                date = new Date();\n                dateTime = date.getFullYear()\n                    + \"-\" + (date.getMonth() + 1)\n                    + \"-\" + date.getDate()\n                    + \" \" + dateTime;\n            }\n\n            date = new Date(dateTime);\n        }\n\n        if (String(date) !== \"Invalid Date\") {\n            return ms ? date.valueOf() : Math.floor(date.valueOf() / 1000);\n        } else {\n            throw new Error(\"The input argument is not a valid date-time string\");\n        }\n    }\n}\n\nfunction parseDateRawArgs(str: string) {\n    let [Y, M, D, H, m, s, ms] = str.split(\",\").map(Number);\n    let date = new Date();\n\n    isVoid(Y) || date.setFullYear(Y);\n    isVoid(M) || date.setMonth(M);\n    isVoid(D) || date.setDate(D);\n    isVoid(H) || date.setHours(H);\n    isVoid(m) || date.setMinutes(m);\n    isVoid(s) || date.setSeconds(s);\n    isVoid(ms) || date.setMilliseconds(ms);\n\n    return date;\n}","import { isArrayLike, isDictLike } from \"is-like\";\nimport { ensureArray } from \"./ensureType\";\n\n/**\n * Trims the leading and tailing spaces of a string, the string properties of\n * an object, or the string and object elements in an array.\n */\nexport default function trim<T extends any>(target: T, deep = false): T extends string ? string : T {\n    if (typeof target === \"string\") {\n        return target.trim() as any;\n    } else if (isArrayLike(target, true)) {\n        return ensureArray(target).map(item => trim(item, deep)) as any;\n    } else if (isDictLike(target)) {\n        const keys = [\n            ...Object.getOwnPropertyNames(target),\n            ...Object.getOwnPropertySymbols(target)\n        ];\n\n        return keys.reduce((result, key) => {\n            let value = target[key];\n\n            if (typeof value === \"string\") {\n                value = value.trim();\n            } else if (deep) {\n                if (isArrayLike(value, true)) {\n                    value = ensureArray(value).map(item => {\n                        return isDictLike(item) ? trim(item, deep) : item;\n                    });\n                } else if (isDictLike(value)) {\n                    value = trim(value, deep);\n                }\n            }\n\n            result[key] = value;\n            return result;\n        }, {} as any);\n    } else {\n        return target as any;\n    }\n}\n","import { as } from \"@ayonli/jsext/object\";\n\n/** @deprecated use `Object.as` from `@ayonli/jsext/object/augment` instead. */\nconst typeAs = as;\nexport default typeAs;\n","import isVoid from './isVoid';\nimport isClass from \"could-be-class\";\nimport type { Constructor } from \"@ayonli/jsext\";\n\nexport type TypeNames = \"string\"\n    | \"number\"\n    | \"bigint\"\n    | \"boolean\"\n    | \"symbol\"\n    | \"function\"\n    | \"class\"\n    | \"arguments\"\n    | \"void\";\n\n/**\n * Returns a string representation or the constructor of the value's type.\n * NOTE: this function also returns `'void'` when testing `NaN`.\n */\nexport default function typeOf<T extends any>(\n    target: T\n): TypeNames | Constructor<T> {\n    if (arguments.length === 0)\n        throw new TypeError(\"1 argument is required, 0 given\");\n    else if (isVoid(target))\n        return \"void\";\n\n    let type = typeof target;\n\n    if (type === \"function\") {\n        if (isClass(<any>target)) {\n            return \"class\";\n        } else {\n            return \"function\";\n        }\n    } else if (type === \"object\") {\n        if (Object.prototype.toString.call(target) === \"[object Arguments]\") {\n            return \"arguments\";\n        } else {\n            return (<any>target).constructor || Object;\n        }\n    } else {\n        return <any>type;\n    }\n}\n","import { until as _until } from \"@ayonli/jsext/promise\";\n\n/** @deprecated use `Promise.until` from `@ayonli/jsext/promise/augment` instead. */\nconst until = _until;\nexport default until;\n","import isEmpty from './isEmpty';\n\n// @ts-ignore\nif (typeof setImmediate === \"undefined\") {\n    // compatible with browsers\n    var setImmediate = (cb: () => void) => setTimeout(cb, 0);\n}\n\nexport default useThrottle;\n\n/**\n * Uses throttle strategy on the given resource and returns a throttle function,\n * if a subsequent call happens within the `interval` time, the previous result\n * will be returned and the current `handle` function will not be invoked.\n * \n * If `backgroundUpdate` is set, when reaching the `interval` time, the `handle`\n * function will be called in background and updates the result the when it's\n * done, the current call and any calls before the update will return the\n * previous result instead.\n * \n * NOTE: this function only creates the throttle function once and uses\n * `interval` only once, any later calls on the same `resource` will return the\n * initial throttle function.\n * \n * @deprecated this implementation is too complicated and redundant, use\n *  `jsext.throttle` from `@ayonli/jsext` instead.\n */\nfunction useThrottle(resource: any, interval: number, backgroundUpdate = false) {\n    if (interval < 1) {\n        throw new RangeError(\n            \"The 'interval' time for throttle must not be smaller than 1\"\n        );\n    } else if (!useThrottle.gcTimer) {\n        let { gcInterval, tasks: jobs } = useThrottle;\n\n        useThrottle.gcTimer = setInterval(() => {\n            let now = Date.now();\n\n            jobs.forEach(({ interval, lastActive }, key) => {\n                if (now - lastActive > Math.max(interval + 5, gcInterval)) {\n                    jobs.delete(key);\n                }\n            });\n        }, gcInterval);\n\n        if (typeof useThrottle.gcTimer.unref === \"function\") {\n            useThrottle.gcTimer.unref();\n        }\n    }\n\n    let task = useThrottle.tasks.get(resource);\n\n    if (!task) {\n        useThrottle.tasks.set(\n            resource,\n            task = createThrottleTask(interval, backgroundUpdate)\n        );\n    }\n\n    return task.func;\n}\n\nnamespace useThrottle {\n    export var gcInterval = 30000;\n    export let gcTimer: any = void 0;\n    export const tasks = new Map<any, ThrottleTask>();\n}\n\ntype ThrottleTask = {\n    interval: number;\n    lastActive: number;\n    cache: { value: any, error: any; } | undefined;\n    queue: Set<{ resolve: (value: any) => void, reject: (err: any) => void; }>;\n    func: (<T, A extends any[]>(\n        handle: (...args: A) => T | Promise<T>,\n        ...args: A\n    ) => Promise<T>) | undefined;\n    daemon?: any;\n};\n\nfunction createThrottleTask(\n    interval: number,\n    backgroundUpdate = false\n): ThrottleTask {\n    let task: ThrottleTask = {\n        interval,\n        lastActive: 0,\n        cache: void 0,\n        queue: new Set(),\n        func: void 0,\n        daemon: null,\n    };\n\n    async function throttle<T, A extends any[]>(\n        this: ThrottleTask,\n        handle: (...args: A) => T | Promise<T>,\n        ...args: A\n    ): Promise<T> {\n        if (backgroundUpdate && !this.daemon) {\n            this.daemon = setInterval(() => this.func?.(handle, ...args), interval);\n\n            if (typeof this.daemon.unref === \"function\") {\n                this.daemon.unref();\n            }\n        }\n\n        let now = Date.now();\n\n        if ((now - this.lastActive) >= interval) {\n            this.lastActive = now;\n\n            if (backgroundUpdate && this.cache) {\n                Promise.resolve(handle(...args)).then(result => {\n                    this.cache = { value: result, error: null };\n                }).catch(err => {\n                    this.cache = { value: void 0, error: err };\n                });\n\n                if (this.cache.error)\n                    throw this.cache.error;\n                else\n                    return this.cache.value as T;\n            } else {\n                // Clear cache before dispatching the new job.\n                this.cache = void 0;\n\n                let result: T | undefined;\n                let error: any;\n\n                try {\n                    result = await handle(...args);\n                    this.cache = { value: result, error: null };\n                } catch (err) {\n                    this.cache = { value: void 0, error: error = err };\n                }\n\n                // Resolve or reject subsequent jobs once the result is ready,\n                // and make the procedure asynchronous so that they will be\n                // performed after the current job.\n                setImmediate(() => {\n                    if (!isEmpty(this.queue)) {\n                        this.queue.forEach((job) => {\n                            error ? job.reject(error) : job.resolve(result);\n                            this.queue.delete(job);\n                        });\n                    }\n                });\n\n                if (error)\n                    throw error;\n                else\n                    return result as T;\n            }\n        } else if (this.cache) {\n            if (this.cache.error)\n                throw this.cache.error;\n            else\n                return this.cache.value as T;\n        } else {\n            return new Promise<T>((resolve, reject) => {\n                this.queue.add({ resolve, reject });\n            });\n        }\n    }\n\n    task.func = throttle.bind(task) as any;\n    return task;\n}\n","import jsext from \"@ayonli/jsext\";\n\n/** @deprecated use `jsext.wrap` from `@ayonli/jsext` instead. */\nconst wrap = jsext.wrap;\nexport default wrap;\n","module.exports = function(s) {\n  return ~-encodeURI(s).split(/%..|./).length\n}\n","module.exports = require(\"child_process\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"util\");","module.exports = require(\"worker_threads\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import \"./types\";\nexport { default as count } from \"./count\";\nexport { default as define } from \"./define\";\nexport { default as diff } from \"./diff\";\nexport { default as ensureType } from \"./ensureType\";\nexport { default as flatObject } from \"./flatObject\";\nexport { default as getGlobal } from \"./getGlobal\";\nexport { default as isBetween } from \"./isBetween\";\nexport { default as isEmpty } from \"./isEmpty\";\nexport { default as isFloat } from \"./isFloat\";\nexport { default as isInteger } from \"./isInteger\";\nexport { default as isNumeric } from \"./isNumeric\";\nexport { default as isOwnKey } from \"./isOwnKey\";\nexport { default as isOwnMethod } from \"./isOwnMethod\";\nexport { default as isSubClassOf } from \"./isSubClassOf\";\nexport { default as isVoid } from \"./isVoid\";\nexport { default as keysOf } from \"./keysOf\";\nexport { default as omit } from \"./omit\";\nexport { default as omitVoid } from \"./omitVoid\";\nexport { default as patch } from \"./patch\";\nexport { default as pick } from \"./pick\";\nexport { default as rand } from \"./rand\";\nexport { default as randStr } from \"./randStr\";\nexport { default as sleep } from \"./sleep\";\nexport { default as sort } from \"./sort\";\nexport { default as split } from \"./split\";\nexport { default as timestamp } from \"./timestamp\";\nexport { default as trim } from \"./trim\";\nexport { default as typeAs } from \"./typeAs\";\nexport { default as typeOf } from \"./typeOf\";\nexport { default as until } from \"./until\";\nexport { default as useThrottle } from \"./useThrottle\";\nexport { default as wrap } from \"./wrap\";\n"],"names":["root","factory","exports","module","define","amd","this","_a","Object","defineProperty","value","check_iterable_1","number_1","isNode","process","versions","node","throttleCaches","Map","maxWorkerNum","length","workerIdCounter","sequence","Number","MAX_SAFE_INTEGER","workerPool","workerConsumerQueue","mergeIfNotExists","proto","source","mergeSuper","props","Reflect","ownKeys","prop","setProp","hasOwnProperty","mergeHierarchy","ctor","mixin","prototype","_super","getPrototypeOf","name","desc","getOwnPropertyDescriptor","jsext","fn","args","try","apply","err","undefined","returns","isAsyncGenerator","input","result","done","next","Promise","resolve","isGenerator","then","catch","func","callbacks","defer","cb","push","call","gen","error","i","async","wrap","wrapper","wrapped","configurable","enumerable","writable","toString","bind","throttle","handler","options","key","for","duration","handleCall","cache","Date","now","expires","get","set","mixins","base","obj","TypeError","read","eventMap","Symbol","asyncIterator","iterable","ended","queue","consumers","reject","shift","handleMessage","data","handleClose","consumer","handleError","forEach","item","handleBrowserErrorEvent","ev","ErrorEvent","Error","message","cause","msgDesc","close","errDesc","closeDesc","cleanup","event","es","eventName","msgListener","addEventListener","removeEventListener","_b","_close","send","ws","onmessage","onerror","onclose","target","msgEvent","errEvent","closeEvent","MessageEvent","closeListener","dataEvent","endEvent","on","once","off","run","script","msg","type","baseUrl","Deno","cwd","location","href","buffer","resolver","iterator","workerId","poolRecord","release","terminate","timeout","setTimeout","keepAlive","emit","handleExit","filter","record","path","util","fs","_filename","_dirname","entry","promisify","stat","__filename","__dirname","endsWith","join","dirname","adapter","worker","ok","find","busy","fork","isPrior14","parseInt","version","slice","stdio","serialization","pid","removeAllListeners","kill","Worker","threadId","postMessage","_url","webWorkerEntry","url","URL","res","fetch","blob","headers","startsWith","buf","arrayBuffer","Blob","Uint8Array","createObjectURL","onmessageerror","abort","clearTimeout","iterate","EventEmitter","console","random","isFloat","isNaN","isFinite","min","max","Math","floor","step","loop","id","hasOwn","pick","keys","reduce","as","omit","patch","hasOwnMethod","method","sources","keptKeys","includes","_type","primitiveMap","String","BigInt","Boolean","valueOf","until","sleep","after","ms","race","_","allSettled","status","reason","test","globalThis","setImmediate","_typeof","constructor","isIteratorLike","isIterableIterator","isAsyncIterableIterator","hasGeneratorSpecials","isIterable","isAsyncIterable","couldBeClass","getOwnPropertyNames","str","hasThis","_arrayLikeToArray","arr","len","arr2","Array","isObjectWith","isObj","_len","arguments","_key","every","_ref","_ref2","isArray","_arrayWithHoles","_i","_s","_e","_x","_r","_arr","_n","_d","_iterableToArrayLimit","o","minLen","n","from","_unsupportedIterableToArray","_nonIterableRest","p","t","isArrayLike","strict","indexes","isNonEnumLength","map","hasIterator","isCollectionLike","excludeWeakOnes","WeakMap","WeakSet","isTypedArrayLike","isBufferLike","isDictLike","RegExp","isObjectIdLike","JSON","stringify","e","isEmptyDict","isPromiseLike","isErrorLike","bytes","encoder","TextEncoder","option","split","Buffer","byteLength","encode","times","is","size","isGetter","sign","isGetterAndSetter","diff","origin","deep","_keys","_result","truePattern","falsePattern","nullPattern","nanPattern","infinityPattern","regexPattern","numberInterval","MIN_SAFE_INTEGER","ensureArray","ensureType","re","NaN","match","num","flatDeep","carrier","field","depth","maxDepth","flatArray","isArr","isDict","isContent","_global","self","global","window","BaseEmptyPrimitives","EmptyPrimitives","emptyPrimitives","v","values","Set","k","isInteger","isOwnKey","isOwnMethod","doOmit","omitEmptyObjects","omitEmptyStrings","trim","doPatch","ignoreEmptyStrings","isChildNode","assign","rand","chars","onlyNumbers","ele","sort","compare","a","b","parseFloat","v8","navigator","userAgent","shouldUseNativeSort","index","getOwnPropertySymbols","checkNumberArgument","RangeError","splitArrayLike","total","j","sep","SyntaxError","offset","splitNumber","isBuffer","indexOf","splitBuffer","list","keyChunks","chunk","create","splitObject","date","dateTime","Y","M","D","H","m","s","setFullYear","setMonth","setDate","setHours","setMinutes","setSeconds","setMilliseconds","parseDateRawArgs","getFullYear","getMonth","getDate","typeAs","useThrottle","resource","interval","backgroundUpdate","gcTimer","gcInterval","tasks","jobs","setInterval","lastActive","delete","unref","task","daemon","handle","job","add","createThrottleTask","encodeURI","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","default"],"sourceRoot":""}