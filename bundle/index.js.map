{"version":3,"file":"index.js","sources":["../node_modules/is-like/index.js","../count.ts","../isVoid.ts","../node_modules/could-be-class/index.js","../typeOf.ts","../isEmpty.ts","../node_modules/@ayonli/jsext/number/index.ts","../ensureType.ts","../flatObject.ts","../isBetween.ts","../isFloat.ts","../isNumeric.ts","../node_modules/@ayonli/jsext/object/index.ts","../isOwnKey.ts","../isOwnMethod.ts","../node_modules/@ayonli/jsext/external/check-iterable/index.mjs","../node_modules/@ayonli/jsext/throttle.ts","../node_modules/@ayonli/jsext/chan.ts","../node_modules/@ayonli/jsext/run.ts","../node_modules/@ayonli/jsext/index.ts","../node_modules/@ayonli/jsext/wrap.ts","../isSubClassOf.ts","../node_modules/@ayonli/jsext/isSubclassOf.ts","../omitInvalid.ts","../omitVoid.ts","../patch.ts","../rand.ts","../sleep.ts","../node_modules/@ayonli/jsext/promise/index.ts","../sort.ts","../split.ts","../typeAs.ts","../until.ts","../useThrottle.ts","../wrap.ts","../define.ts","../diff.ts","../getGlobal.ts","../isInteger.ts","../keysOf.ts","../omit.ts","../pick.ts","../randStr.ts","../timestamp.ts","../trim.ts"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isArrayLike = isArrayLike;\nexports.isBufferLike = void 0;\nexports.isCollectionLike = isCollectionLike;\nexports.isDictLike = isDictLike;\nexports.isErrorLike = isErrorLike;\nexports.isObjectIdLike = isObjectIdLike;\nexports.isPromiseLike = isPromiseLike;\nexports.isTypedArrayLike = isTypedArrayLike;\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0) { ; } } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n/**\n * @param {any} value \n * @param {Array<[string|symbol, string]>} props \n * @param {Array<string>} types\n */\nfunction isObjectWith(value) {\n  var isObj = _typeof(value) === \"object\" && value !== null;\n  for (var _len = arguments.length, props = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    props[_key - 1] = arguments[_key];\n  }\n  return isObj && props.every(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      p = _ref2[0],\n      t = _ref2[1];\n    return p in value && _typeof(value[p]) === t;\n  });\n}\nfunction isEmptyDict(obj) {\n  try {\n    var str = JSON.stringify(obj);\n    return str === \"{}\" || str === \"[]\";\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Checks if the input value is a dict `object`, which includes key-value pairs.\n * @returns {value is { [x: string | symbol]: any; }}\n */\nfunction isDictLike(value) {\n  return _typeof(value) === \"object\" && value !== null && (value.constructor === Object || !(value instanceof Date) && !(value instanceof RegExp) && !isArrayLike(value, true) && !isObjectIdLike(value) && !isEmptyDict(value) && !isTypedArrayLike(value) && !isCollectionLike(value) && !isPromiseLike(value));\n}\n\n/**\n * Checks if the input value is an `object` with `length` property or a string.\n * @returns {value is ArrayLike<any>}\n */\nfunction isArrayLike(value) {\n  var strict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (Array.isArray(value)) {\n    return true;\n  } else if (!strict) {\n    return isObjectWith(value, [\"length\", \"number\"]) || typeof value === \"string\";\n  } else if (isObjectWith(value, [\"length\", \"number\"])) {\n    var keys = Object.keys(value);\n    var isNonEnumLength = !keys.includes(\"length\");\n    var indexes;\n    if (value.length === 0 || (indexes = keys.map(Number).filter(isFinite)).length === 0) {\n      return isNonEnumLength;\n    } else {\n      var hasIterator = typeof value[Symbol.iterator] === \"function\";\n      for (var i = value.length; i--;) {\n        if (!indexes.includes(i) && !(isNonEnumLength || hasIterator)) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Checks if the input value is an `object` with `size` property and\n * `[Symbol.iterator]()` method, or is an instance of **WeakMap** or\n * **WeakSet** if `excludeWeakOnes` is not set.\n */\nfunction isCollectionLike(value) {\n  var excludeWeakOnes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return isObjectWith(value, [\"size\", \"number\"], [Symbol.iterator, \"function\"]) || !excludeWeakOnes && (value instanceof WeakMap || value instanceof WeakSet);\n}\n\n/**\n * \n * @returns {value is ArrayLike<number> & Pick<Uint8Array, \"byteLength\" | \"slice\">}\n */\nfunction isTypedArrayLike(value) {\n  return isObjectWith(value, [\"byteLength\", \"number\"], [\"slice\", \"function\"]);\n}\n\n/** @deprecated An alias of `isTypedArrayLike`. */\nvar isBufferLike = isTypedArrayLike;\n\n/**\n * Checks if the input value is an `object` with `name`, `message` and `stack`\n * properties.\n * @returns {value is Error}\n */\nexports.isBufferLike = isBufferLike;\nfunction isErrorLike(value) {\n  return isObjectWith(value, [\"name\", \"string\"], [\"message\", \"string\"], [\"stack\", \"string\"]);\n}\n\n/**\n * Checks if the input is an `object` with `then()` method.\n * @returns {value is PromiseLike<any>}\n */\nfunction isPromiseLike(value) {\n  return isObjectWith(value, [\"then\", \"function\"]);\n}\nfunction isObjectIdLike(value) {\n  return _typeof(value) === \"object\" && value !== null && (value.constructor.name === \"ObjectId\" || value.constructor.name === \"ObjectID\");\n}\n","import { isArrayLike, isBufferLike, isCollectionLike } from \"is-like\";\nconst encoder = new TextEncoder();\nexport default count;\nfunction count(target, option = void 0) {\n    if (typeof target === \"string\") {\n        if (typeof option === \"string\") {\n            if (!option) {\n                return target.length + 1;\n            }\n            else if (!target) {\n                return 0;\n            }\n            return target.split(option).length - 1;\n        }\n        else if (option === true) {\n            if (typeof Buffer === \"function\" &&\n                typeof Buffer.byteLength === \"function\") {\n                return Buffer.byteLength(target);\n            }\n            else {\n                return encoder.encode(target).byteLength;\n            }\n        }\n        else {\n            return target.length;\n        }\n    }\n    else if (isArrayLike(target, true)) {\n        if (arguments.length === 2) {\n            let times = 0;\n            for (let i = target.length; i--;) {\n                // treat 0 equals -0 and NaN equals NaN\n                if (target[i] === option || Object.is(target[i], option)) {\n                    times++;\n                }\n            }\n            return times;\n        }\n        else {\n            return target.length;\n        }\n    }\n    else if (isBufferLike(target)) {\n        return target.byteLength;\n    }\n    else if (isCollectionLike(target, true)) {\n        return target.size;\n    }\n    else {\n        return Object.keys(target).length;\n    }\n}\n//# sourceMappingURL=count.js.map","/**\n * Checks if a value is resolved to void (`null`, `undefined` or `NaN`).\n *\n * @deprecated use `!Object.isValid` from `@ayonli/jsext/object/augment` instead.\n */\nexport default function isVoid(value) {\n    return value === null || value === undefined || Object.is(value, NaN);\n}\n//# sourceMappingURL=isVoid.js.map","\"use strict\";\n\n/**\n * Checks if an object could be an instantiable class.\n * @param {any} obj\n * @returns {obj is new (...args: any[]) => any}\n */\nfunction couldBeClass(obj) {\n    if (typeof obj != \"function\") return false;\n\n    // async function or arrow function\n    if (obj.prototype === undefined)\n        return false;\n\n    // generator function and malformed inheritance\n    if (obj.prototype.constructor !== obj)\n        return false;\n\n    // has own prototype properties\n    if (Object.getOwnPropertyNames(obj.prototype).length >= 2)\n        return true;\n\n    var str = String(obj);\n\n    // ES6 class\n    if (str.slice(0, 5) == \"class\")\n        return true;\n\n    // anonymous function\n    if (/^function\\s*\\(|^function anonymous\\(/.test(str))\n        return false;\n\n    var hasThis = /(call|apply|_classCallCheck)\\(this(, arguments)?\\)|\\bthis(.\\S+|\\[.+?\\])\\s*(=|\\()|=\\s*this[,;]/.test(str);\n\n    // Upper-cased first char of the name and has `this` in the body, or it's\n    // a native class in ES5 style.\n    if (/^function\\s+[A-Z]/.test(str) && (hasThis ||\n        (/\\[native code\\]/.test(str) &&\n            obj.name !== \"BigInt\" && // ES6 BigInt and Symbol is not class\n            obj.name !== \"Symbol\"\n        )\n    )) {\n        return true;\n    }\n\n    // TypeScript anonymous class to ES5 with default export\n    if (hasThis && obj.name === \"default_1\")\n        return true;\n\n    return false;\n}\n\nexports.couldBeClass = couldBeClass;\nexports.default = couldBeClass;","import isVoid from \"./isVoid.ts\";\nimport { couldBeClass as isClass } from \"could-be-class\";\n/**\n * Returns a string representation or the constructor of the value's type.\n * NOTE: this function also returns `'void'` when testing `NaN`.\n */\nexport default function typeOf(target) {\n    if (arguments.length === 0)\n        throw new TypeError(\"1 argument is required, 0 given\");\n    else if (isVoid(target))\n        return \"void\";\n    let type = typeof target;\n    if (type === \"function\") {\n        if (isClass(target)) {\n            return \"class\";\n        }\n        else {\n            return \"function\";\n        }\n    }\n    else if (type === \"object\") {\n        if (Object.prototype.toString.call(target) === \"[object Arguments]\") {\n            return \"arguments\";\n        }\n        else {\n            return target.constructor || Object;\n        }\n    }\n    else {\n        return type;\n    }\n}\n//# sourceMappingURL=typeOf.js.map","import { isArrayLike, isBufferLike, isCollectionLike } from \"is-like\";\nconst BaseEmptyPrimitives = [\"\", NaN, null, void 0];\nconst EmptyPrimitives = [...BaseEmptyPrimitives, 0, false];\nif (typeof BigInt === \"function\")\n    EmptyPrimitives.push(BigInt(\"0\"));\n/**\n * Checks if the value resolves to an empty object or a falsy value.\n */\nexport default function isEmpty(value, deep = false) {\n    return test(value, Boolean(deep), EmptyPrimitives);\n}\nfunction test(value, deep, emptyPrimitives) {\n    if (emptyPrimitives.includes(value))\n        return true;\n    if (typeof value === \"object\") {\n        if (value instanceof RegExp) {\n            return false;\n        }\n        else if (value instanceof Date) {\n            return String(value) === \"Invalid Date\";\n        }\n        else if (value instanceof Error) {\n            return value.message.length === 0;\n        }\n        else if (isBufferLike(value)) {\n            return value.byteLength === 0;\n        }\n        else if (isArrayLike(value, true)) {\n            if (value.length === 0) {\n                return true;\n            }\n            else if (!deep) {\n                return false;\n            }\n            else {\n                for (let i = 0, len = value.length; i < len; ++i) {\n                    if (!test(value[i], deep, BaseEmptyPrimitives)) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        }\n        else if (isCollectionLike(value, true)) {\n            if (value.size === 0) {\n                return true;\n            }\n            else if (!deep) {\n                return false;\n            }\n            else {\n                if (value instanceof Map) {\n                    for (let v of value.values()) {\n                        if (!test(v, deep, BaseEmptyPrimitives)) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                else if (value instanceof Set) {\n                    for (let v of value) {\n                        if (!test(v, deep, BaseEmptyPrimitives)) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                return false;\n            }\n        }\n        else {\n            let keys = Reflect.ownKeys(value);\n            if (keys.length === 0) {\n                return true;\n            }\n            else if (!deep) {\n                return false;\n            }\n            else {\n                return keys.every(k => test(value[k], deep, BaseEmptyPrimitives));\n            }\n        }\n    }\n    return false;\n}\n//# sourceMappingURL=isEmpty.js.map","/** Returns `true` if the given value is a float number, `false` otherwise. */\nexport function isFloat(value) {\n    return typeof value === \"number\"\n        && !Number.isNaN(value)\n        && (!Number.isFinite(value) || value % 1 !== 0);\n}\n/**\n * Returns `true` if the given value is a numeric value, `false` otherwise. A numeric value is a\n * number, a bigint, or a string that can be converted to a number or bigint.\n */\nexport function isNumeric(value) {\n    const type = typeof value;\n    if (type === \"number\" || type === \"bigint\") {\n        return true;\n    }\n    else if (type === \"string\") {\n        if (!Number.isNaN(value)) {\n            return true;\n        }\n        else {\n            try {\n                BigInt(value);\n                return true;\n            }\n            catch (_a) {\n                return false;\n            }\n        }\n    }\n    return false;\n}\n/** Return `true` if a number is between the given range (inclusive). */\nexport function isBetween(value, [min, max]) {\n    return value >= min && value <= max;\n}\n/** Returns a random integer ranged from `min` to `max`. */\nexport function random(min, max) {\n    return min + Math.floor(Math.random() * (max - min + 1));\n}\n/** Creates a generator that produces sequential numbers from `min` to `max` (inclusive). */\nexport function* sequence(min, max, step = 1, loop = false) {\n    let id = min;\n    while (true) {\n        yield id;\n        if (id >= max) {\n            if (loop) {\n                id = min;\n            }\n            else {\n                break;\n            }\n        }\n        else {\n            id += step;\n        }\n    }\n}\n//# sourceMappingURL=index.js.map","import { isArrayLike, isDictLike } from \"is-like\";\nimport { isBetween } from \"@ayonli/jsext/number\";\nconst truePattern = /^\\s*(true|yes|on)\\s*$/i;\nconst falsePattern = /^\\s*(false|no|off)\\s*$/i;\nconst nullPattern = /^\\s*(null|nil|none|void|undefined)\\s*$/i;\nconst nanPattern = /^\\s*NaN\\s*$/;\nconst infinityPattern = /^\\s*-?Infinity\\s*/;\nconst regexPattern = /^\\s*\\/(.+)\\/([gimuys]*)\\s*$/;\nconst numberInterval = [\n    Number.MIN_SAFE_INTEGER,\n    Number.MAX_SAFE_INTEGER\n];\n/**\n * Casts the target object or its contents to the closest types automatically.\n * This function is useful when reading config from a file or fetching data from\n * the web.\n */\nexport default function ensureType(target) {\n    switch (typeof target) {\n        case \"string\": {\n            let re;\n            if (truePattern.test(target)) {\n                return true;\n            }\n            else if (falsePattern.test(target)) {\n                return false;\n            }\n            else if (nullPattern.test(target)) {\n                return null;\n            }\n            else if (nanPattern.test(target)) {\n                return NaN;\n            }\n            else if (infinityPattern.test(target)) {\n                return Number(target);\n            }\n            else if (re = target.match(regexPattern)) {\n                return new RegExp(re[1], re[2]);\n            }\n            else {\n                let num = Number(target);\n                if (!isNaN(num) &&\n                    isBetween(num, numberInterval) &&\n                    target[0] !== \"+\" // Most likely a telephone number.\n                ) {\n                    return num;\n                }\n                else {\n                    return target;\n                }\n            }\n        }\n        case \"object\": {\n            if (target === null) {\n                return null;\n            }\n            else if (isArrayLike(target, true)) {\n                return ensureArray(target).map(ensureType);\n            }\n            else if (isDictLike(target)) {\n                return Reflect.ownKeys(target).reduce((result, key) => {\n                    result[key] = ensureType(target[key]);\n                    return result;\n                }, {});\n            }\n            else {\n                return target;\n            }\n        }\n        default:\n            return target;\n    }\n}\nexport function ensureArray(value) {\n    return Array.isArray(value) ? value : Array.from(value);\n}\n//# sourceMappingURL=ensureType.js.map","import { isDictLike, isArrayLike, isBufferLike } from \"is-like\";\nimport isVoid from \"./isVoid.ts\";\nexport default function flatObject(obj, depth = 1, flatArray = false) {\n    return flatDeep({}, obj, \"\", 0, depth, flatArray);\n}\nfunction flatDeep(carrier, source, field, depth, maxDepth, flatArray) {\n    let isArr;\n    let isDict;\n    let isContent = !isVoid(field) && field !== \"\";\n    if (depth === maxDepth || (!(isArr = isArrayLike(source, true) && !isBufferLike(source)) &&\n        !(isDict = isDictLike(source)))) {\n        carrier[field] = source;\n    }\n    else if (isDict) {\n        Reflect.ownKeys(source).forEach(key => {\n            let value = source[key];\n            if (typeof key === \"symbol\") {\n                if (depth === 0) { // only allow top-level symbol properties\n                    carrier[key] = value;\n                }\n            }\n            else {\n                flatDeep(carrier, value, isContent ? `${field}.${key}` : key, isContent ? depth + 1 : depth, maxDepth, flatArray);\n            }\n        });\n    }\n    else if (isArr) {\n        if (flatArray) {\n            for (let i = 0, len = source.length; i < len; ++i) {\n                flatDeep(carrier, source[i], isContent ? `${field}.${i}` : String(i), isContent ? depth + 1 : depth, maxDepth, flatArray);\n            }\n        }\n        else {\n            carrier[field] = source;\n        }\n    }\n    return carrier;\n}\n//# sourceMappingURL=flatObject.js.map","import { isBetween as _isBetween } from \"@ayonli/jsext/number\";\n/** @deprecated use `Number.isBetween` from `@ayonli/jsext/number/augment` instead. */\nconst isBetween = _isBetween;\nexport default isBetween;\n//# sourceMappingURL=isBetween.js.map","import { isFloat as _isFloat } from \"@ayonli/jsext/number\";\n/** @deprecated use `Number.isFloat` from `@ayonli/jsext/number/augment` instead. */\nconst isFloat = _isFloat;\nexport default isFloat;\n//# sourceMappingURL=isFloat.js.map","import { isNumeric as _isNumeric } from \"@ayonli/jsext/number\";\n/** @deprecated use `Number.isNumeric` from `@ayonli/jsext/number/augment` instead. */\nconst isNumeric = _isNumeric;\nexport default isNumeric;\n//# sourceMappingURL=isNumeric.js.map","export function hasOwn(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n}\n;\n/**\n * Returns `true` if the specified object has the indicated method as its own method (in its own\n * prototype). If the method is inherited, or is not in the prototype, or does not exist, this\n * function returns `false`.\n */\nexport function hasOwnMethod(obj, method) {\n    var _a;\n    const proto = Object.getPrototypeOf(obj);\n    if (!proto || !hasOwn(proto, method)) {\n        return false;\n    }\n    return typeof ((_a = Object.getOwnPropertyDescriptor(proto, method)) === null || _a === void 0 ? void 0 : _a.value) === \"function\";\n}\nexport function patch(target, ...sources) {\n    for (const source of sources) {\n        for (const key of Reflect.ownKeys(source)) {\n            if (!hasOwn(target, key) || target[key] === undefined) {\n                target[key] = source[key];\n            }\n        }\n    }\n    return target;\n}\n;\nexport function pick(obj, keys) {\n    return keys.reduce((result, key) => {\n        if (key in obj && obj[key] !== undefined) {\n            result[key] = obj[key];\n        }\n        return result;\n    }, {});\n}\nexport function omit(obj, keys) {\n    const allKeys = Reflect.ownKeys(obj);\n    const keptKeys = allKeys.filter(key => !keys.includes(key));\n    const result = pick(obj, keptKeys);\n    // special treatment for Error types\n    if (obj instanceof Error) {\n        [\"name\", \"message\", \"cause\"].forEach(key => {\n            if (!keys.includes(key) &&\n                obj[key] !== undefined &&\n                !hasOwn(result, key)) {\n                result[key] = obj[key];\n            }\n        });\n    }\n    return result;\n}\nexport function as(value, type) {\n    if (typeof type !== \"function\") {\n        throw new TypeError(\"type must be a valid constructor\");\n    }\n    let _type;\n    const primitiveMap = {\n        \"string\": String,\n        \"number\": Number,\n        \"bigint\": BigInt,\n        \"boolean\": Boolean,\n        \"symbol\": Symbol\n    };\n    if (value instanceof type) {\n        if ([String, Number, Boolean].includes(type)) {\n            return value.valueOf(); // make sure the primitives are returned.\n        }\n        else {\n            return value;\n        }\n    }\n    else if ((_type = typeof value) && primitiveMap[_type] === type) {\n        return value;\n    }\n    return null;\n}\n/**\n * Returns `true` if the given value is valid. Thee following values are considered invalid:\n *\n * - `undefined`\n * - `null`\n * - `NaN`\n * - `Invalid Date`\n */\nexport function isValid(value) {\n    return value !== undefined\n        && value !== null\n        && !Object.is(value, NaN)\n        && !(value instanceof Date && value.toString() === \"Invalid Date\");\n}\n//# sourceMappingURL=index.js.map","import { hasOwn } from \"@ayonli/jsext/object\";\n/** @deprecated use `Object.hasOwn` from `@ayonli/jsext/object/augment` instead. */\nconst isOwnKey = hasOwn;\nexport default isOwnKey;\n//# sourceMappingURL=isOwnKey.js.map","import { hasOwnMethod } from \"@ayonli/jsext/object\";\n/** @deprecated use `Object.hasOwnMethod` from `@ayonli/jsext/object/augment` instead. */\nconst isOwnMethod = hasOwnMethod;\nexport default isOwnMethod;\n//# sourceMappingURL=isOwnMethod.js.map","if (!Symbol.asyncIterator) {\n    Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\");\n}\n\n/**\n * Checks if the given object is an Iterable (implemented `@@iterator`).\n * @returns {obj is Iterable<any>}\n */\nexport function isIterable(obj) {\n    return obj !== null\n        && obj !== undefined\n        && typeof obj[Symbol.iterator] === \"function\";\n}\n\n/**\n * Checks if the given object is an AsyncIterable (implemented `@@asyncIterator`).\n * @returns {obj is AsyncIterable<any>}\n */\nexport function isAsyncIterable(obj) {\n    return obj !== null\n        && obj !== undefined\n        && typeof obj[Symbol.asyncIterator] === \"function\";\n}\n\n/**\n * Checks if the given object is an IteratorLike (implemented `next`).\n * @returns {obj is { next: Function }}\n */\nexport function isIteratorLike(obj) {\n    // An iterable object has a 'next' method, however including a 'next' method\n    // doesn't ensure the object is an iterator, it is only iterator-like.\n    return typeof obj === \"object\"\n        && obj !== null\n        && typeof obj.next === \"function\";\n}\n\n/**\n * Checks if the given object is an IterableIterator (implemented both\n * `@@iterator` and `next`).\n */\nexport function isIterableIterator(obj) {\n    return isIteratorLike(obj)\n        && typeof obj[Symbol.iterator] === \"function\";\n}\n\n/**\n * Checks if the given object is an AsyncIterableIterator (implemented\n * both `@@asyncIterator` and `next`).\n * @returns {obj is AsyncIterableIterator<any>}\n */\nexport function isAsyncIterableIterator(obj) {\n    return isIteratorLike(obj)\n        && typeof obj[Symbol.asyncIterator] === \"function\";\n}\n\n/**\n * Checks if the given object is a Generator.\n * @returns {obj is Generator}\n */\nexport function isGenerator(obj) {\n    return isIterableIterator(obj)\n        && hasGeneratorSpecials(obj);\n}\n\n/**\n * Checks if the given object is an AsyncGenerator.\n * @returns {obj is AsyncGenerator}\n */\nexport function isAsyncGenerator(obj) {\n    return isAsyncIterableIterator(obj)\n        && hasGeneratorSpecials(obj);\n}\n\nfunction hasGeneratorSpecials(obj) {\n    return typeof obj.return === \"function\"\n        && typeof obj.throw === \"function\";\n}\n","const throttleCaches = new Map();\nexport default function throttle(handler, options) {\n    const key = typeof options === \"number\" ? null : options.for;\n    const duration = typeof options === \"number\" ? options : options.duration;\n    const handleCall = function (cache, ...args) {\n        var _a;\n        if (cache.result && Date.now() < ((_a = cache.expires) !== null && _a !== void 0 ? _a : 0)) {\n            if (cache.result.error) {\n                throw cache.result.error;\n            }\n            else {\n                return cache.result.value;\n            }\n        }\n        try {\n            const returns = handler.call(this, ...args);\n            cache.result = { value: returns };\n            cache.expires = Date.now() + duration;\n            return returns;\n        }\n        catch (error) {\n            cache.result = { error };\n            cache.expires = Date.now() + duration;\n            throw error;\n        }\n    };\n    if (!key) {\n        const cache = { for: null };\n        return function (...args) {\n            return handleCall.call(this, cache, ...args);\n        };\n    }\n    else {\n        let cache = throttleCaches.get(key);\n        if (!cache) {\n            cache = { for: key };\n            throttleCaches.set(key, cache);\n        }\n        return function (...args) {\n            return handleCall.call(this, cache, ...args);\n        };\n    }\n}\n//# sourceMappingURL=throttle.js.map","export class Channel {\n    constructor(capacity = 0) {\n        this.buffer = [];\n        this.state = 1;\n        if (capacity < 0) {\n            throw new RangeError(\"the capacity of a channel must not be negative\");\n        }\n        this.capacity = capacity;\n    }\n    /**\n     * Pushes data to the channel.\n     *\n     * If there is a receiver, the data will be consumed immediately. Otherwise:\n     *\n     * - If this is an non-buffered channel, this function will block until a receiver is\n     *  available and the data is consumed.\n     *\n     * - If this is a buffered channel, then:\n     *      - If the buffer size is within the capacity, the data will be pushed to the buffer.\n     *      - Otherwise, this function will block until there is new room for the data in the\n     *          buffer.\n     */\n    push(data) {\n        if (this.state !== 1) {\n            throw new Error(\"the channel is closed\");\n        }\n        else if (this.sub) {\n            return Promise.resolve(this.sub(null, data));\n        }\n        else if (this.capacity && this.buffer.length < this.capacity) {\n            this.buffer.push(data);\n            return Promise.resolve(undefined);\n        }\n        else {\n            return new Promise(resolve => {\n                this.pub = () => {\n                    if (this.capacity) {\n                        const _data = this.buffer.shift();\n                        this.buffer.push(data);\n                        this.pub = undefined;\n                        resolve();\n                        return _data;\n                    }\n                    else {\n                        this.pub = undefined;\n                        resolve();\n                        return data;\n                    }\n                };\n            });\n        }\n    }\n    /**\n     * Retrieves data from the channel.\n     *\n     * If there isn't data available at the moment, this function will block until new data is\n     * available.\n     *\n     * If the channel is closed, then:\n     *\n     * - If there is error set in the channel, this function throws that error immediately.\n     * - Otherwise, this function returns `undefined` immediately.\n     */\n    pop() {\n        if (this.buffer.length) {\n            return Promise.resolve(this.buffer.shift());\n        }\n        else if (this.pub) {\n            return Promise.resolve(this.pub());\n        }\n        else if (this.state === 0) {\n            return Promise.resolve(undefined);\n        }\n        else if (this.error) {\n            // Error can only be consumed once, after that, that closure will be complete.\n            const { error } = this;\n            this.state = 0;\n            this.error = undefined;\n            return Promise.reject(error);\n        }\n        else {\n            return new Promise((resolve, reject) => {\n                this.sub = (err, data) => {\n                    this.sub = undefined;\n                    err ? reject(err) : resolve(data);\n                };\n            });\n        }\n    }\n    /**\n     * Closes the channel. If `err` is supplied, it will be captured by the receiver.\n     *\n     * No more data shall be sent once the channel is closed.\n     *\n     * Explicitly closing the channel is not required, if the channel is no longer used, it\n     * will be automatically released by the GC. However, if the channel is used in a\n     * `for await...of...` loop, closing the channel will allow the loop to break automatically.\n     */\n    close(err = null) {\n        this.state = 2;\n        this.error = err;\n        // Delay the closure till the next event loop so that `sub` can be bound in the\n        // `for await...of...` loop and the last message can be delivered.\n        setTimeout(() => {\n            var _a;\n            this.state = 0;\n            (_a = this.sub) === null || _a === void 0 ? void 0 : _a.call(this, err, undefined);\n        });\n    }\n    [Symbol.asyncIterator]() {\n        const channel = this;\n        return {\n            async next() {\n                const bufSize = channel.buffer.length;\n                const value = await channel.pop();\n                return { value: value, done: channel.state === 0 && !bufSize };\n            }\n        };\n    }\n}\n/**\n * Inspired by Golang, cerates a channel that can be used to transfer data within the program.\n *\n * Unlike `EventEmitter` or `EventTarget`, `Channel` guarantees the data will always be delivered,\n * even if there is no receiver at the moment.\n *\n * If `capacity` is not set, a non-buffered channel will be created. For a non-buffered channel,\n * the sender and receiver must be present at the same time (theoretically), otherwise, the\n * channel will block (non-IO aspect).\n *\n * If `capacity` is set, a buffered channel will be created. For a buffered channel, data will\n * be queued in the buffer first and then consumed by the receiver in FIFO order. Once the\n * buffer size reaches the capacity limit, no more data will be sent unless there is new room\n * available.\n *\n * It is possible to set the `capacity` to `Infinity` to allow the channel to never block and\n * behave like a message queue.\n *\n * @example\n * ```ts\n * const channel = chan<number>();\n *\n * (async () => {\n *     await channel.push(123);\n * })();\n *\n * const num = await channel.pop();\n * console.log(num);\n * // output:\n * // 123\n * ```\n *\n * @example\n * ```ts\n * const channel = chan<number>(3);\n *\n * await channel.push(123);\n * await channel.push(456);\n * await channel.push(789);\n *\n * const num1 = await channel.pop();\n * const num2 = await channel.pop();\n * const num3 = await channel.pop();\n *\n * console.log(num1);\n * console.log(num2);\n * console.log(num3);\n * // output:\n * // 123\n * // 456\n * // 789\n * ```\n *\n * @example\n * ```ts\n * const channel = chan<number>();\n *\n * (async () => {\n *     for (const num of Number.sequence(1, 5)) {\n *         await channel.push(num);\n *     }\n *\n *     channel.close();\n * })();\n *\n * for await (const num of channel) {\n *     console.log(num);\n * }\n * // output:\n * // 1\n * // 2\n * // 3\n * // 4\n * // 5\n * ```\n */\nexport default function chan(capacity = 0) {\n    return new Channel(capacity);\n}\n//# sourceMappingURL=chan.js.map","var _a;\nimport { sequence } from \"./number/index.ts\";\nimport chan from \"./chan.ts\";\nconst isNode = typeof process === \"object\" && !!((_a = process.versions) === null || _a === void 0 ? void 0 : _a.node);\n/**\n * The maximum number of workers allowed to exist at the same time.\n *\n * The primary purpose of the workers is not mean to run tasks in parallel, but run them in separate\n * from the main thread, so that aborting tasks can be achieved by terminating the worker thread and\n * it will not affect the main thread.\n *\n * That said, the worker thread can still be used to achieve parallelism, but it should be noticed\n * that only the numbers of tasks that equals to the CPU core numbers will be run at the same time.\n */\nconst maxWorkerNum = 16;\nconst workerIdCounter = sequence(1, Number.MAX_SAFE_INTEGER, 1, true);\nlet workerPool = [];\n// The worker consumer queue is nothing but a callback list, once a worker is available, the runner\n// pop a consumer and run the callback, which will retry gaining the worker and retry the task.\nconst workerConsumerQueue = [];\n/**\n * Runs a `script` in a worker thread or child process that can be aborted during runtime.\n *\n * In Node.js and Bun, the `script` can be either a CommonJS module or an ES module, and is relative\n * to the current working directory if not absolute.\n *\n * In browser and Deno, the `script` can only be an ES module, and is relative to the current URL\n * (or working directory for Deno) if not absolute.\n *\n * @example\n * ```ts\n * const job1 = await run(\"./job-example.mjs\", [\"World\"]);\n * console.log(await job1.result()); // Hello, World\n * ```\n *\n * @example\n * ```ts\n * const job2 = await run<string, [string[]]>(\"./job-example.mjs\", [[\"foo\", \"bar\"]], {\n *     fn: \"sequence\",\n * });\n * for await (const word of job2.iterate()) {\n *     console.log(word);\n * }\n * // output:\n * // foo\n * // bar\n * ```\n *\n * @example\n * ```ts\n * const job3 = await run<string, [string]>(\"./job-example.mjs\", [\"foobar\"], {\n *    fn: \"takeTooLong\",\n * });\n * await job3.abort();\n * const [err, res] = await _try(job3.result());\n * console.assert(err === null);\n * console.assert(res === undefined);\n * ```\n */\nexport default async function run(script, args = undefined, options = undefined) {\n    var _a, _b;\n    const msg = {\n        type: \"ffi\",\n        script,\n        baseUrl: \"\",\n        fn: (options === null || options === void 0 ? void 0 : options.fn) || \"default\",\n        args: args !== null && args !== void 0 ? args : [],\n    };\n    if (typeof Deno === \"object\") {\n        msg.baseUrl = \"file://\" + Deno.cwd() + \"/\";\n    }\n    else if (isNode) {\n        msg.baseUrl = \"file://\" + process.cwd() + \"/\";\n    }\n    else if (typeof location === \"object\") {\n        msg.baseUrl = location.href;\n    }\n    let error = null;\n    let result;\n    let resolver;\n    let channel = undefined;\n    let workerId;\n    let poolRecord;\n    let release;\n    let terminate = () => Promise.resolve(void 0);\n    const timeout = (options === null || options === void 0 ? void 0 : options.timeout) ? setTimeout(() => {\n        const err = new Error(`operation timeout after ${options.timeout}ms`);\n        if (resolver) {\n            resolver.reject(err);\n        }\n        else {\n            error = err;\n        }\n        terminate();\n    }, options.timeout) : null;\n    const handleMessage = (msg) => {\n        var _a;\n        if (msg && typeof msg === \"object\" && typeof msg.type === \"string\") {\n            if (msg.type === \"error\") {\n                return handleError(msg.error);\n            }\n            else if (msg.type === \"return\") {\n                if (options === null || options === void 0 ? void 0 : options.keepAlive) {\n                    // Release before resolve.\n                    release === null || release === void 0 ? void 0 : release();\n                    if (workerConsumerQueue.length) {\n                        // Queued consumer now has chance to gain the worker.\n                        (_a = workerConsumerQueue.shift()) === null || _a === void 0 ? void 0 : _a();\n                    }\n                }\n                else {\n                    terminate();\n                }\n                if (resolver) {\n                    resolver.resolve(msg.value);\n                }\n                else {\n                    result = { value: msg.value };\n                }\n            }\n            else if (msg.type === \"yield\") {\n                if (msg.done) {\n                    // The final message of yield event is the return value.\n                    handleMessage({ type: \"return\", value: msg.value });\n                }\n                else {\n                    channel === null || channel === void 0 ? void 0 : channel.push(msg.value);\n                }\n            }\n        }\n    };\n    const handleError = (err) => {\n        if (resolver) {\n            resolver.reject(err);\n        }\n        else if (channel) {\n            channel.close(err);\n        }\n        else {\n            error = err;\n        }\n    };\n    const handleExit = () => {\n        var _a;\n        if (poolRecord) {\n            // Clean the pool before resolve.\n            workerPool = workerPool.filter(record => record !== poolRecord);\n            if (workerConsumerQueue.length) {\n                // Queued consumer now has chance to create new worker.\n                (_a = workerConsumerQueue.shift()) === null || _a === void 0 ? void 0 : _a();\n            }\n        }\n        if (resolver) {\n            resolver.resolve(void 0);\n        }\n        else if (channel) {\n            channel.close();\n        }\n        else if (!error && !result) {\n            result = { value: void 0 };\n        }\n    };\n    if (isNode) {\n        let entry = options === null || options === void 0 ? void 0 : options.workerEntry;\n        if (!entry) {\n            const path = await import(\"path\");\n            const { fileURLToPath } = await import(\"url\");\n            const dirname = path.dirname(fileURLToPath(import.meta.url));\n            if ([\"cjs\", \"esm\"].includes(path.basename(dirname))) { // compiled\n                entry = path.join(path.dirname(dirname), \"bundle\", \"worker.mjs\");\n            }\n            else {\n                entry = path.join(dirname, \"worker.mjs\");\n            }\n        }\n        if ((options === null || options === void 0 ? void 0 : options.adapter) === \"child_process\") {\n            let worker;\n            let ok = true;\n            poolRecord = workerPool.find(item => {\n                return item.adapter === \"child_process\" && !item.busy;\n            });\n            if (poolRecord) {\n                worker = poolRecord.worker;\n                workerId = poolRecord.workerId;\n                poolRecord.busy = true;\n            }\n            else if (workerPool.length < maxWorkerNum) {\n                const { fork } = await import(\"child_process\");\n                const isPrior14 = parseInt(process.version.slice(1)) < 14;\n                worker = fork(entry, {\n                    stdio: \"inherit\",\n                    serialization: isPrior14 ? \"advanced\" : \"json\",\n                });\n                workerId = worker.pid;\n                ok = await new Promise((resolve) => {\n                    worker.once(\"exit\", () => {\n                        if (error) {\n                            // The child process took too long to start and cause timeout error.\n                            resolve(false);\n                        }\n                    });\n                    worker.once(\"message\", () => {\n                        worker.removeAllListeners(\"exit\");\n                        resolve(true);\n                    });\n                });\n                // Fill the worker pool regardless the current call should keep-alive or not,\n                // this will make sure that the total number of workers will not exceed the\n                // maxWorkerNum. If the the call doesn't keep-alive the worker, it will be\n                // cleaned after the call.\n                ok && workerPool.push(poolRecord = {\n                    workerId,\n                    worker,\n                    adapter: \"child_process\",\n                    busy: true,\n                });\n            }\n            else {\n                // Put the current call in the consumer queue if there are no workers available,\n                // once an existing call finishes, the queue will pop the its head consumer and\n                // retry.\n                return new Promise((resolve) => {\n                    workerConsumerQueue.push(resolve);\n                }).then(() => run(script, args, options));\n            }\n            release = () => {\n                // Remove the event listener so that later calls will not mess up.\n                worker.off(\"message\", handleMessage);\n                poolRecord && (poolRecord.busy = false);\n            };\n            terminate = () => Promise.resolve(void worker.kill(1));\n            if (ok) {\n                worker.send(msg);\n                worker.on(\"message\", handleMessage);\n                worker.once(\"error\", handleError);\n                worker.once(\"exit\", handleExit);\n            }\n        }\n        else {\n            let worker;\n            let ok = true;\n            poolRecord = workerPool.find(item => {\n                return item.adapter === \"worker_threads\" && !item.busy;\n            });\n            if (poolRecord) {\n                worker = poolRecord.worker;\n                workerId = poolRecord.workerId;\n                poolRecord.busy = true;\n            }\n            else if (workerPool.length < maxWorkerNum) {\n                const { Worker } = await import(\"worker_threads\");\n                worker = new Worker(entry);\n                // `threadId` may not exist in Bun.\n                workerId = (_a = worker.threadId) !== null && _a !== void 0 ? _a : workerIdCounter.next().value;\n                ok = await new Promise((resolve) => {\n                    worker.once(\"exit\", () => {\n                        if (error) {\n                            // The child process took too long to start and cause timeout error.\n                            resolve(false);\n                        }\n                    });\n                    worker.once(\"online\", () => {\n                        worker.removeAllListeners(\"exit\");\n                        resolve(true);\n                    });\n                });\n                ok && workerPool.push(poolRecord = {\n                    workerId,\n                    worker,\n                    adapter: \"worker_threads\",\n                    busy: true,\n                });\n            }\n            else {\n                return new Promise((resolve) => {\n                    workerConsumerQueue.push(resolve);\n                }).then(() => run(script, args, options));\n            }\n            release = () => {\n                worker.off(\"message\", handleMessage);\n                poolRecord && (poolRecord.busy = false);\n            };\n            terminate = async () => void (await worker.terminate());\n            if (ok) {\n                worker.postMessage(msg);\n                worker.on(\"message\", handleMessage);\n                worker.once(\"error\", handleError);\n                worker.once(\"messageerror\", handleError);\n                worker.once(\"exit\", handleExit);\n            }\n        }\n    }\n    else {\n        let worker;\n        poolRecord = workerPool.find(item => {\n            return item.adapter === \"worker_threads\" && !item.busy;\n        });\n        if (poolRecord) {\n            worker = poolRecord.worker;\n            workerId = poolRecord.workerId;\n            poolRecord.busy = true;\n        }\n        else if (workerPool.length < maxWorkerNum) {\n            let url;\n            if (typeof Deno === \"object\") {\n                // Deno can load the module regardless of MINE type.\n                url = [\n                    ...(import.meta.url.split(\"/\").slice(0, -1)),\n                    \"worker-web.mjs\"\n                ].join(\"/\");\n            }\n            else {\n                const _url = (options === null || options === void 0 ? void 0 : options.workerEntry)\n                    || \"https://raw.githubusercontent.com/ayonli/jsext/main/bundle/worker-web.mjs\";\n                const res = await fetch(_url);\n                let blob;\n                if ((_b = res.headers.get(\"content-type\")) === null || _b === void 0 ? void 0 : _b.startsWith(\"application/javascript\")) {\n                    blob = await res.blob();\n                }\n                else {\n                    const buf = await res.arrayBuffer();\n                    blob = new Blob([new Uint8Array(buf)], {\n                        type: \"application/javascript\",\n                    });\n                }\n                url = URL.createObjectURL(blob);\n            }\n            worker = new Worker(url, { type: \"module\" });\n            workerId = workerIdCounter.next().value;\n            workerPool.push(poolRecord = {\n                workerId,\n                worker,\n                adapter: \"worker_threads\",\n                busy: true,\n            });\n        }\n        else {\n            return new Promise((resolve) => {\n                workerConsumerQueue.push(resolve);\n            }).then(() => run(script, args, options));\n        }\n        release = () => {\n            worker.onmessage = null;\n            poolRecord && (poolRecord.busy = false);\n        };\n        terminate = async () => {\n            await Promise.resolve(worker.terminate());\n            handleExit();\n        };\n        worker.postMessage(msg);\n        worker.onmessage = (ev) => handleMessage(ev.data);\n        worker.onerror = (ev) => handleMessage(ev.error || new Error(ev.message));\n        worker.onmessageerror = () => {\n            handleError(new Error(\"unable to deserialize the message\"));\n        };\n    }\n    return {\n        workerId,\n        async abort() {\n            timeout && clearTimeout(timeout);\n            await terminate();\n        },\n        async result() {\n            return await new Promise((resolve, reject) => {\n                if (error) {\n                    reject(error);\n                }\n                else if (result) {\n                    resolve(result.value);\n                }\n                else {\n                    resolver = { resolve, reject };\n                }\n            });\n        },\n        iterate() {\n            if (resolver) {\n                throw new Error(\"result() has been called\");\n            }\n            else if (result) {\n                throw new TypeError(\"the response is not iterable\");\n            }\n            channel = chan(Infinity);\n            return {\n                [Symbol.asyncIterator]: channel[Symbol.asyncIterator].bind(channel),\n            };\n        },\n    };\n}\n//# sourceMappingURL=run.js.map","import _try from \"./try.ts\";\nimport func from \"./func.ts\";\nimport wrap from \"./wrap.ts\";\nimport throttle from \"./throttle.ts\";\nimport mixins from \"./mixins.ts\";\nimport isSubclassOf from \"./isSubclassOf.ts\";\nimport chan, { Channel } from \"./chan.ts\";\nimport read from \"./read.ts\";\nimport run from \"./run.ts\";\nimport example from \"./example.ts\";\nexport { Channel };\nexport const AsyncFunction = (async function () { }).constructor;\nexport const AsyncGeneratorFunction = (async function* () { }).constructor;\n/**\n * The entry of jsext main functions.\n */\nconst jsext = {\n    try: _try,\n    func,\n    wrap,\n    throttle,\n    mixins,\n    isSubclassOf,\n    chan,\n    read,\n    run,\n    example,\n};\nexport default jsext;\nexport { _try, func, wrap, throttle, mixins, isSubclassOf, chan, read, run, example, };\n//# sourceMappingURL=index.js.map","/**\n * Wraps a function inside another function and returns a new function that copies the original\n * function's name and other properties.\n *\n * @example\n * ```ts\n * function log(text: string) {\n *     console.log(text);\n * }\n *\n * const show = wrap(log, function (fn, text) {\n *     return fn.call(this, new Date().toISOString() + \" \" + text);\n * });\n *\n * console.log(show.name); // log\n * console.log(show.length); // 1\n * console.assert(show.toString() === log.toString());\n * ```\n */\nexport default function wrap(fn, wrapper) {\n    const wrapped = function (...args) {\n        return wrapper.call(this, fn, ...args);\n    };\n    Object.defineProperty(wrapped, \"name\", Object.getOwnPropertyDescriptor(fn, \"name\"));\n    Object.defineProperty(wrapped, \"length\", Object.getOwnPropertyDescriptor(fn, \"length\"));\n    Object.defineProperty(wrapped, \"toString\", {\n        configurable: true,\n        enumerable: false,\n        writable: true,\n        value: fn.toString.bind(fn),\n    });\n    return wrapped;\n}\n//# sourceMappingURL=wrap.js.map","import jsext from \"@ayonli/jsext\";\n/** @deprecated use `jsext.jsSubclassOf` from `@ayonli/jsext` instead. */\nconst isSubClassOf = jsext.isSubclassOf;\nexport default isSubClassOf;\n//# sourceMappingURL=isSubClassOf.js.map","/**\n * Checks if a class is a subclass of another class.\n *\n * @example\n * ```ts\n * class Moment extends Date {}\n *\n * console.assert(isSubclassOf(Moment, Date));\n * console.assert(isSubclassOf(Moment, Object)); // all classes are subclasses of Object\n * ```\n */\nexport default function isSubclassOf(ctor1, ctor2) {\n    return typeof ctor1 === \"function\"\n        && typeof ctor2 === \"function\"\n        && ctor1.prototype instanceof ctor2;\n}\n//# sourceMappingURL=isSubclassOf.js.map","import { isArrayLike, isBufferLike } from \"is-like\";\nimport { isValid } from \"@ayonli/jsext/object\";\nimport isEmpty from \"./isEmpty.ts\";\n/**\n * Creates an object composed with only the valid properties and values.\n * @param omitEmptyObjects If set, empty properties of type `object` will be\n *  removed as well.\n * @param omitEmptyStrings If set, empty properties of type `string` will be\n *  removed as well.\n */\nexport default function omitInvalid(target, deep = false, omitEmptyObjects = false, omitEmptyStrings = false) {\n    return doOmit(target, deep, omitEmptyObjects, omitEmptyStrings, 0);\n}\nexport function doOmit(target, deep, omitEmptyObjects, omitEmptyStrings, depth) {\n    if (typeof target === \"string\") {\n        return omitEmptyStrings && target.trim() === \"\"\n            ? (depth > 0 ? void 0 : \"\")\n            : target;\n    }\n    else if (target === null\n        || typeof target !== \"object\"\n        || target instanceof Date\n        || target instanceof Error\n        || target instanceof RegExp\n        || isBufferLike(target)) {\n        return target;\n    }\n    else if (omitEmptyObjects && isEmpty(target)) {\n        return depth > 0 ? void 0 : (isArrayLike(target, true) ? [] : {});\n    }\n    if (isArrayLike(target, true)) {\n        let arr = [];\n        for (let i = 0, len = target.length; i < len; ++i) {\n            let value = target[i];\n            if (isValid(value)) {\n                if (deep) {\n                    value = doOmit(value, deep, omitEmptyObjects, omitEmptyStrings, depth + 1);\n                    !isValid(value) || arr.push(value);\n                }\n                else {\n                    arr.push(value);\n                }\n            }\n        }\n        if (depth > 0 && omitEmptyObjects && isEmpty(arr)) {\n            return void 0;\n        }\n        else {\n            return arr;\n        }\n    }\n    else {\n        let obj = Reflect.ownKeys(target).reduce((obj, key) => {\n            let value = target[key];\n            if (isValid(value)) {\n                if (deep) {\n                    value = doOmit(value, deep, omitEmptyObjects, omitEmptyStrings, depth + 1);\n                    !isValid(value) || (obj[key] = value);\n                }\n                else {\n                    obj[key] = value;\n                }\n            }\n            return obj;\n        }, {});\n        if (depth > 0 && omitEmptyObjects && isEmpty(obj)) {\n            return void 0;\n        }\n        else {\n            return obj;\n        }\n    }\n}\n//# sourceMappingURL=omitInvalid.js.map","import omitInvalid from \"./omitInvalid.ts\";\n/**\n * @deprecated use `omitInvalid` instead\n */\nconst omitVoid = omitInvalid;\nexport default omitVoid;\n//# sourceMappingURL=omitVoid.js.map","import { isDictLike } from \"is-like\";\nimport { isValid } from \"@ayonli/jsext/object\";\nimport isEmpty from \"./isEmpty.ts\";\n/**\n * Patches the differences onto the `origin` object from the `input` object. If\n * a property exists in both objects and the values are not equal, the `input`\n * one will be taken. However, those properties that are only presents in the\n * `origin` object will remain untouched.\n *\n * NOTE: This function mutates the `origin` object and returns the patched\n * differences, when patching, any void value in the `input` object will be\n * ignored.\n *\n * This function is very useful, for example, a client issued a patch of the\n * resource and the server wants to know what properties has been modified by\n * this update so that it can perform some extra operations to provide a better\n * user experience.\n */\nexport default function patch(origin, input, deep = false, ignoreEmptyStrings = false) {\n    return doPatch(origin, input, deep, ignoreEmptyStrings, false);\n}\nfunction doPatch(origin, input, deep, ignoreEmptyStrings, isChildNode) {\n    if (isDictLike(origin) && isDictLike(input)) {\n        let keys = Reflect.ownKeys(input);\n        let result = {};\n        keys.forEach(key => {\n            if (origin[key] !== input[key] &&\n                isValid(input[key]) && // ignore invalid values\n                (!ignoreEmptyStrings || input[key] !== \"\")) {\n                if (deep && isDictLike(origin[key]) && isDictLike(input[key])) {\n                    let _result = doPatch(origin[key], input[key], deep, ignoreEmptyStrings, true);\n                    if (!isEmpty(_result)) {\n                        result[key] = _result;\n                        Object.assign(origin[key], input[key]);\n                    }\n                }\n                else {\n                    result[key] = origin[key] = input[key];\n                }\n            }\n        });\n        return result;\n    }\n    else if (isChildNode) {\n        return input;\n    }\n    else {\n        return {};\n    }\n}\n//# sourceMappingURL=patch.js.map","import { random } from \"@ayonli/jsext/number\";\n/** @deprecated use `Number.random` from `@ayonli/jsext/number/augment` instead. */\nconst rand = random;\nexport default rand;\n//# sourceMappingURL=rand.js.map","import { sleep as _sleep } from \"@ayonli/jsext/promise\";\n/** @deprecated use `Promise.sleep` from `@ayonli/jsext/promise/augment` instead. */\nconst sleep = _sleep;\nexport default sleep;\n//# sourceMappingURL=sleep.js.map","/** Try to resolve a promise with a timeout limit. */\nexport async function timeout(value, ms) {\n    const result = await Promise.race([\n        value,\n        new Promise((_, reject) => setTimeout(() => {\n            reject(new Error(`operation timeout after ${ms}ms`));\n        }, ms))\n    ]);\n    return result;\n}\n/** Resolves a promise only after the given duration. */\nexport async function after(value, ms) {\n    const [result] = await Promise.allSettled([\n        value,\n        new Promise(resolve => setTimeout(resolve, ms))\n    ]);\n    if (result.status === \"fulfilled\") {\n        return result.value;\n    }\n    else {\n        throw result.reason;\n    }\n}\n/** Blocks the context for a given time. */\nexport async function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\n/** Blocks the context until the test is passed. */\nexport async function until(test) {\n    if (typeof globalThis.setImmediate === \"undefined\") {\n        // @ts-ignore\n        globalThis.setImmediate = (cb) => setTimeout(cb, 0);\n    }\n    do {\n        await new Promise(globalThis.setImmediate);\n    } while ((await test()) == false);\n}\n//# sourceMappingURL=index.js.map","import { isArrayLike, isDictLike } from \"is-like\";\nimport { ensureArray } from \"./ensureType.ts\";\nexport default function sort(target, method = void 0) {\n    if (isArrayLike(target, true)) {\n        let arr = ensureArray(target);\n        let compare = method;\n        // If the compare function is omitted and all the elements are numbers\n        // (or of bigint), sort them by their values.\n        if (!compare && (onlyNumbers(arr) || onlyNumbers(arr, \"bigint\"))) {\n            compare = (a, b) => a - b;\n        }\n        if (shouldUseNativeSort(arr)) {\n            return arr.sort(compare);\n        }\n        // Emulate stable sort.\n        // Reference: http://blog.vjeux.com/2010/javascript/javascript-sorting-table.html\n        return arr\n            .map((value, index) => ({ value, index }))\n            .sort((a, b) => compare(a.value, b.value) || a.index - b.index)\n            .map(({ value }) => value);\n    }\n    else if (isDictLike(target)) {\n        let deep = Boolean(method);\n        let keys = [\n            ...sort(Object.getOwnPropertyNames(target)),\n            ...Object.getOwnPropertySymbols(target)\n        ];\n        return keys.reduce((result, key) => {\n            let value = target[key];\n            if (deep) {\n                if (isArrayLike(value, true)) {\n                    value = ensureArray(value).map(item => {\n                        return isDictLike(item) ? sort(item, deep) : item;\n                    });\n                }\n                else if (isDictLike(value)) {\n                    value = sort(value, deep);\n                }\n            }\n            result[key] = value;\n            return result;\n        }, {});\n    }\n    else {\n        if (typeof method === \"function\") {\n            throw new TypeError(\"The target to sort is not an array\");\n        }\n        else if (typeof method === \"boolean\") {\n            throw new TypeError(\"The target to sort is not a pure object\");\n        }\n        else {\n            throw new TypeError(\"The target to sort is not an array or a pure object\");\n        }\n    }\n}\nfunction onlyNumbers(arr, type = \"number\") {\n    return arr.every(ele => typeof ele === type);\n}\nfunction shouldUseNativeSort(arr) {\n    if (typeof process === \"object\" && typeof process.versions === \"object\") {\n        return arr.length <= 10\n            || parseFloat(process.versions.v8 || \"0\") >= 7.0;\n    }\n    else if (typeof Deno === \"object\") {\n        return true;\n    }\n    else if (typeof navigator === \"object\"\n        && typeof navigator.userAgent === \"string\") {\n        let match = navigator.userAgent.match(/(Chrome|Firefox|Safari|Edge|OPR)\\/(\\d+)/);\n        if (match) {\n            let name = match[1];\n            let version = parseFloat(match[2]);\n            if ((name === \"Edge\" && arr.length <= 512) ||\n                (name === \"Chrome\" && (version >= 70) || arr.length <= 10) ||\n                (name === \"Firefox\" && version >= 3) ||\n                (name === \"Safari\" && version >= 10.1) ||\n                (name === \"OPR\" && version >= 54)) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n//# sourceMappingURL=sort.js.map","import { isArrayLike, isBufferLike, isCollectionLike } from \"is-like\";\nfunction checkNumberArgument(name, value) {\n    if (typeof value !== \"number\") {\n        throw new TypeError(`argument '${name}' must be a number`);\n    }\n    else if (value < 1) {\n        throw new RangeError(`argument '${name}' must be 1 or higher`);\n    }\n}\nfunction splitArrayLike(arr, length, total = void 0) {\n    let result = [];\n    for (let i = 0, j = (total || arr.length); i < j; i += length) {\n        if (typeof arr.slice === \"function\") {\n            result.push(arr.slice(i, i + length));\n        }\n        else {\n            result.push(Array.prototype.slice.call(arr, i, i + length));\n        }\n    }\n    return result;\n}\nfunction splitBuffer(buf, sep) {\n    let result = [];\n    let offset = 0;\n    let length = sep.length;\n    let total = buf.byteLength;\n    while (offset < total) {\n        let index = buf.indexOf(sep, offset);\n        if (index !== -1) {\n            result.push(buf.slice(offset, index));\n            offset = index + length;\n        }\n        else {\n            result.push(buf.slice(offset));\n            offset = total;\n        }\n    }\n    return result;\n}\nfunction splitObject(obj, size) {\n    let proto = Object.getPrototypeOf(obj);\n    let keyChunks = splitArrayLike(Object.keys(obj), size);\n    let result = [];\n    for (let keys of keyChunks) {\n        let chunk = Object.create(proto);\n        result.push(chunk);\n        for (let key of keys) {\n            chunk[key] = obj[key];\n        }\n    }\n    return result;\n}\nfunction splitNumber(num, step) {\n    let result = [];\n    let offset = 0;\n    while ((offset += step) <= num) {\n        result.push(offset);\n    }\n    if (num > offset - step) {\n        result.push(num);\n    }\n    return result;\n}\nexport default function split(obj, sep) {\n    if (arguments.length < 2) {\n        throw new SyntaxError(`2 arguments required, received ${arguments.length}`);\n    }\n    else if (typeof obj === \"string\") {\n        if (typeof sep === \"string\" || sep instanceof RegExp) {\n            return obj.split(sep);\n        }\n        else {\n            checkNumberArgument(\"length\", sep);\n            return splitArrayLike(obj, sep);\n        }\n    }\n    else if (typeof obj === \"number\") {\n        checkNumberArgument(\"step\", sep);\n        return splitNumber(obj, sep);\n    }\n    else if (typeof Buffer === \"function\"\n        && Buffer.isBuffer(obj)\n        && (typeof sep === \"string\" || Buffer.isBuffer(sep))) {\n        return splitBuffer(obj, sep);\n    }\n    else if (isBufferLike(obj)) {\n        checkNumberArgument(\"byteLength\", sep);\n        return splitArrayLike(obj, sep, obj.byteLength);\n    }\n    else if (isArrayLike(obj, true)) {\n        checkNumberArgument(\"length\", sep);\n        return splitArrayLike(obj, sep);\n    }\n    else if (isCollectionLike(obj)) {\n        let ctor = obj[\"constructor\"];\n        checkNumberArgument(\"size\", sep);\n        return splitArrayLike([...obj], sep).map(list => new ctor(list));\n    }\n    else if (typeof obj === \"object\" && obj !== null) {\n        checkNumberArgument(\"size\", sep);\n        return splitObject(obj, sep);\n    }\n    else {\n        throw new TypeError(\"argument 'obj' must be a string, a number or an object\");\n    }\n}\n//# sourceMappingURL=split.js.map","import { as } from \"@ayonli/jsext/object\";\n/** @deprecated use `Object.as` from `@ayonli/jsext/object/augment` instead. */\nconst typeAs = as;\nexport default typeAs;\n//# sourceMappingURL=typeAs.js.map","import { until as _until } from \"@ayonli/jsext/promise\";\n/** @deprecated use `Promise.until` from `@ayonli/jsext/promise/augment` instead. */\nconst until = _until;\nexport default until;\n//# sourceMappingURL=until.js.map","import isEmpty from \"./isEmpty.ts\";\n// @ts-ignore\nif (typeof setImmediate === \"undefined\") {\n    // compatible with browsers\n    var setImmediate = (cb) => setTimeout(cb, 0);\n}\nexport default useThrottle;\n/**\n * Uses throttle strategy on the given resource and returns a throttle function,\n * if a subsequent call happens within the `interval` time, the previous result\n * will be returned and the current `handle` function will not be invoked.\n *\n * If `backgroundUpdate` is set, when reaching the `interval` time, the `handle`\n * function will be called in background and updates the result the when it's\n * done, the current call and any calls before the update will return the\n * previous result instead.\n *\n * NOTE: this function only creates the throttle function once and uses\n * `interval` only once, any later calls on the same `resource` will return the\n * initial throttle function.\n *\n * @deprecated this implementation is too complicated and redundant, use\n *  `jsext.throttle` from `@ayonli/jsext` instead.\n */\nfunction useThrottle(resource, interval, backgroundUpdate = false) {\n    if (interval < 1) {\n        throw new RangeError(\"The 'interval' time for throttle must not be smaller than 1\");\n    }\n    else if (!useThrottle.gcTimer) {\n        let { gcInterval, tasks: jobs } = useThrottle;\n        useThrottle.gcTimer = setInterval(() => {\n            let now = Date.now();\n            jobs.forEach(({ interval, lastActive }, key) => {\n                if (now - lastActive > Math.max(interval + 5, gcInterval)) {\n                    jobs.delete(key);\n                }\n            });\n        }, gcInterval);\n        if (typeof useThrottle.gcTimer.unref === \"function\") {\n            useThrottle.gcTimer.unref();\n        }\n    }\n    let task = useThrottle.tasks.get(resource);\n    if (!task) {\n        useThrottle.tasks.set(resource, task = createThrottleTask(interval, backgroundUpdate));\n    }\n    return task.func;\n}\n(function (useThrottle) {\n    useThrottle.gcInterval = 30000;\n    useThrottle.gcTimer = void 0;\n    useThrottle.tasks = new Map();\n})(useThrottle || (useThrottle = {}));\nfunction createThrottleTask(interval, backgroundUpdate = false) {\n    let task = {\n        interval,\n        lastActive: 0,\n        cache: void 0,\n        queue: new Set(),\n        func: void 0,\n        daemon: null,\n    };\n    async function throttle(handle, ...args) {\n        if (backgroundUpdate && !this.daemon) {\n            this.daemon = setInterval(() => { var _a; return (_a = this.func) === null || _a === void 0 ? void 0 : _a.call(this, handle, ...args); }, interval);\n            if (typeof this.daemon.unref === \"function\") {\n                this.daemon.unref();\n            }\n        }\n        let now = Date.now();\n        if ((now - this.lastActive) >= interval) {\n            this.lastActive = now;\n            if (backgroundUpdate && this.cache) {\n                Promise.resolve(handle(...args)).then(result => {\n                    this.cache = { value: result, error: null };\n                }).catch(err => {\n                    this.cache = { value: void 0, error: err };\n                });\n                if (this.cache.error)\n                    throw this.cache.error;\n                else\n                    return this.cache.value;\n            }\n            else {\n                // Clear cache before dispatching the new job.\n                this.cache = void 0;\n                let result;\n                let error;\n                try {\n                    result = await handle(...args);\n                    this.cache = { value: result, error: null };\n                }\n                catch (err) {\n                    this.cache = { value: void 0, error: error = err };\n                }\n                // Resolve or reject subsequent jobs once the result is ready,\n                // and make the procedure asynchronous so that they will be\n                // performed after the current job.\n                setImmediate(() => {\n                    if (!isEmpty(this.queue)) {\n                        this.queue.forEach((job) => {\n                            error ? job.reject(error) : job.resolve(result);\n                            this.queue.delete(job);\n                        });\n                    }\n                });\n                if (error)\n                    throw error;\n                else\n                    return result;\n            }\n        }\n        else if (this.cache) {\n            if (this.cache.error)\n                throw this.cache.error;\n            else\n                return this.cache.value;\n        }\n        else {\n            return new Promise((resolve, reject) => {\n                this.queue.add({ resolve, reject });\n            });\n        }\n    }\n    task.func = throttle.bind(task);\n    return task;\n}\n//# sourceMappingURL=useThrottle.js.map","import jsext from \"@ayonli/jsext\";\n/** @deprecated use `jsext.wrap` from `@ayonli/jsext` instead. */\nconst wrap = jsext.wrap;\nexport default wrap;\n//# sourceMappingURL=wrap.js.map","import typeOf from \"./typeOf.ts\";\n/**\n * Sets a property on the target object.\n * @param value Normally this is the value bound to the property, however, it\n *  could be used to set the getter and the setter using the signature\n *  `{ get: Function, set?: Function }`.\n * @param enumerable By default, the property is non-enumerable and can't be\n *  seen by the console, use this option to make it enumerable and visible to\n *  the console.\n * @param writable By default, the property is readonly once set, use this\n *  option to allow it being writable.\n *  **This property doesn't work with setter.**\n */\nexport default function define(obj, prop, value, enumerable = false, writable = false) {\n    if (typeOf(value) === Object) {\n        if (isGetter(value) || isGetterAndSetter(value)) {\n            Object.defineProperty(obj, prop, {\n                configurable: true,\n                enumerable,\n                ...value\n            });\n            return;\n        }\n    }\n    Object.defineProperty(obj, prop, {\n        configurable: true,\n        enumerable,\n        writable,\n        value\n    });\n}\nfunction isGetter(obj) {\n    return String(Object.keys(obj)) === \"get\"\n        && typeof obj[\"get\"] === \"function\";\n}\nfunction isGetterAndSetter(obj) {\n    let sign = String(Object.keys(obj));\n    return (sign === \"get,set\" || sign === \"set,get\")\n        && typeof obj[\"get\"] === \"function\"\n        && typeof obj[\"set\"] === \"function\";\n}\n//# sourceMappingURL=define.js.map","import { isDictLike } from \"is-like\";\nimport isEmpty from \"./isEmpty.ts\";\nimport isVoid from \"./isVoid.ts\";\nexport default function diff(origin, input, deep = false) {\n    if (Array.isArray(origin) && Array.isArray(input)) {\n        return [\n            ...input.filter(value => !origin.includes(value)),\n            ...origin.filter(value => !input.includes(value))\n        ];\n    }\n    else if (isDictLike(origin) && isDictLike(input)) {\n        let keys = Reflect.ownKeys(input);\n        let _keys = Reflect.ownKeys(origin);\n        let result = {};\n        keys.forEach(key => {\n            if (origin[key] !== input[key] &&\n                !(isVoid(origin[key]) && isVoid(input[key])) // ignore void values\n            ) {\n                if (deep &&\n                    typeof origin[key] === \"object\" && origin[key] !== null &&\n                    typeof input[key] === \"object\" && input[key] !== null) {\n                    let _result = diff(origin[key], input[key], deep);\n                    if (!isEmpty(_result)) {\n                        result[key] = _result;\n                    }\n                }\n                else {\n                    result[key] = input[key];\n                }\n            }\n        });\n        _keys.forEach(key => {\n            keys.includes(key) || (result[key] = origin[key]);\n        });\n        return result;\n    }\n    else {\n        return input;\n    }\n}\n//# sourceMappingURL=diff.js.map","export default function getGlobal(prop = void 0) {\n    let _global;\n    if (typeof globalThis === \"object\") {\n        _global = globalThis;\n    }\n    else if (typeof self === \"object\") {\n        _global = self;\n    }\n    else if (typeof global === \"object\") {\n        _global = global;\n    }\n    else if (typeof window === \"object\") {\n        _global = window;\n    }\n    return _global && (prop ? _global[prop] : _global);\n}\n//# sourceMappingURL=getGlobal.js.map","/**\n * Checks if the value is an integer number (or bigint).\n *\n * @deprecated use `Number.isInteger` instead.\n */\nexport default function isInteger(value) {\n    return typeof value === \"bigint\" || Number.isInteger(value);\n}\n//# sourceMappingURL=isInteger.js.map","export default function keysOf(obj) {\n    if (Array.isArray(obj)) {\n        return obj.map((_, i) => i);\n    }\n    else {\n        return Reflect.ownKeys(obj);\n    }\n}\n//# sourceMappingURL=keysOf.js.map","import { omit as _omit } from \"@ayonli/jsext/object\";\nexport default function omit(obj, props) {\n    if (Array.isArray(obj)) {\n        return obj.filter(i => !props.includes(i));\n    }\n    else {\n        return _omit(obj, props);\n    }\n}\n//# sourceMappingURL=omit.js.map","import { pick as _pick } from \"@ayonli/jsext/object\";\nexport default function pick(obj, props) {\n    if (Array.isArray(obj)) {\n        return props.map(i => obj[i]);\n    }\n    else {\n        return _pick(obj, props);\n    }\n}\n//# sourceMappingURL=pick.js.map","import rand from \"./rand.ts\";\n/**\n * Generates a random string.\n * @param chars The possible characters.\n * @deprecated use `String.random` from `@ayonli/jsext/string/augment` instead.\n */\nexport default function randStr(length, chars = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\") {\n    let str = \"\";\n    let max = chars.length - 1;\n    while (0 < length--) {\n        str += chars[rand(0, max)];\n    }\n    return str;\n}\n//# sourceMappingURL=randStr.js.map","import { isValid } from \"@ayonli/jsext/object\";\nimport { isNumeric } from \"@ayonli/jsext/number\";\nexport default timestamp;\nfunction timestamp(input, ms = false) {\n    var _a;\n    if (typeof input === \"boolean\") {\n        ms = input;\n        input = void 0;\n    }\n    input = input || new Date();\n    if (input instanceof Date) {\n        return ms ? input.valueOf() : Math.floor(input.valueOf() / 1000);\n    }\n    else if (typeof input === \"number\") {\n        return ms ? input : Math.floor(input / 1000);\n    }\n    else {\n        let date;\n        let dateTime = String(input).trim();\n        if (dateTime.includes(\",\") && dateTime.split(\",\").every(isNumeric)) {\n            date = parseDateRawArgs(dateTime);\n        }\n        else {\n            let match = null;\n            if (match = dateTime.match(/^(\\d{1,2}):\\d{2}(:\\d{2})?/)) { // time only\n                if (((_a = match[1]) === null || _a === void 0 ? void 0 : _a.length) !== 2) {\n                    dateTime = \"0\" + dateTime;\n                }\n                if (!match[2]) {\n                    dateTime += \":00\";\n                }\n                date = new Date();\n                dateTime = date.getFullYear()\n                    + \"-\" + String(date.getMonth() + 1).padStart(2, \"0\")\n                    + \"-\" + String(date.getDate()).padStart(2, \"0\")\n                    + \" \" + dateTime;\n            }\n            date = new Date(dateTime);\n        }\n        if (String(date) !== \"Invalid Date\") {\n            return ms ? date.valueOf() : Math.floor(date.valueOf() / 1000);\n        }\n        else {\n            console.log(dateTime);\n            throw new Error(\"The input argument is not a valid date-time string\");\n        }\n    }\n}\nfunction parseDateRawArgs(str) {\n    let [Y, M, D, H, m, s, ms] = str.split(\",\").map(Number);\n    let date = new Date();\n    isValid(Y) && date.setFullYear(Y);\n    isValid(M) && date.setMonth(M);\n    isValid(D) && date.setDate(D);\n    isValid(H) && date.setHours(H);\n    isValid(m) && date.setMinutes(m);\n    isValid(s) && date.setSeconds(s);\n    isValid(ms) && date.setMilliseconds(ms);\n    return date;\n}\n//# sourceMappingURL=timestamp.js.map","import { isArrayLike, isDictLike } from \"is-like\";\nimport { ensureArray } from \"./ensureType.ts\";\n/**\n * Trims the leading and tailing spaces of a string, the string properties of\n * an object, or the string and object elements in an array.\n */\nexport default function trim(target, deep = false) {\n    if (typeof target === \"string\") {\n        return target.trim();\n    }\n    else if (isArrayLike(target, true)) {\n        return ensureArray(target).map(item => trim(item, deep));\n    }\n    else if (isDictLike(target)) {\n        const keys = [\n            ...Object.getOwnPropertyNames(target),\n            ...Object.getOwnPropertySymbols(target)\n        ];\n        return keys.reduce((result, key) => {\n            let value = target[key];\n            if (typeof value === \"string\") {\n                value = value.trim();\n            }\n            else if (deep) {\n                if (isArrayLike(value, true)) {\n                    value = ensureArray(value).map(item => {\n                        return isDictLike(item) ? trim(item, deep) : item;\n                    });\n                }\n                else if (isDictLike(value)) {\n                    value = trim(value, deep);\n                }\n            }\n            result[key] = value;\n            return result;\n        }, {});\n    }\n    else {\n        return target;\n    }\n}\n//# sourceMappingURL=trim.js.map"],"names":["Object","defineProperty","isLike","value","isArrayLike_1","isArrayLike","isBufferLike_1","isBufferLike","isCollectionLike_1","isCollectionLike","isDictLike_1","isDictLike","_typeof","constructor","Date","RegExp","isObjectIdLike","obj","str","JSON","stringify","e","isEmptyDict","isTypedArrayLike","isPromiseLike","_slicedToArray","arr","i","Array","isArray","_arrayWithHoles","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","call","next","done","push","length","err","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","prototype","toString","slice","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","isObjectWith","isObj","_len","arguments","props","_key","every","_ref","_ref2","p","t","strict","undefined","indexes","keys","isNonEnumLength","includes","map","Number","filter","isFinite","hasIterator","excludeWeakOnes","WeakMap","WeakSet","isErrorLike","encoder","TextEncoder","isVoid","is","NaN","couldBeClass_2","getOwnPropertyNames","String","hasThis","typeOf","target","type","isClass","BaseEmptyPrimitives","EmptyPrimitives","isEmpty","deep","Boolean","emptyPrimitives","Error","message","byteLength","size","Map","v","values","Set","Reflect","ownKeys","k","isNumeric","isNaN","BigInt","_a","isBetween","min","max","truePattern","falsePattern","nullPattern","nanPattern","infinityPattern","regexPattern","numberInterval","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","ensureArray","flatDeep","carrier","source","field","depth","maxDepth","flatArray","isArr","isDict","isContent","forEach","key","_isBetween","isFloat","_isNumeric","hasOwn","hasOwnProperty","pick","reduce","result","isValid","isOwnKey","isOwnMethod","method","proto","getPrototypeOf","getOwnPropertyDescriptor","asyncIterator","process","versions","node","step","loop","id","sequence","jsext","fn","wrapper","wrapped","args","this","configurable","enumerable","writable","bind","isSubClassOf","ctor1","ctor2","doOmit","omitEmptyObjects","omitEmptyStrings","trim","omitVoid","doPatch","origin","input","ignoreEmptyStrings","isChildNode","_result","assign","rand","Math","floor","random","sleep","async","ms","Promise","resolve","setTimeout","onlyNumbers","ele","checkNumberArgument","RangeError","splitArrayLike","total","j","typeAs","_type","primitiveMap","string","number","bigint","boolean","symbol","valueOf","until","globalThis","setImmediate","cb","useThrottle","resource","interval","backgroundUpdate","gcTimer","gcInterval","tasks","jobs","setInterval","now","lastActive","delete","unref","task","get","set","cache","queue","func","daemon","throttle","handle","then","error","catch","job","reject","add","createThrottleTask","wrap","option","split","Buffer","encode","times","prop","isGetter","sign","isGetterAndSetter","diff","_keys","ensureType","re","match","num","_global","self","global","window","isInteger","_","keptKeys","_omit","_pick","chars","sort","compare","a","b","parseFloat","v8","Deno","navigator","userAgent","version","shouldUseNativeSort","index","getOwnPropertySymbols","item","sep","SyntaxError","offset","splitNumber","isBuffer","buf","indexOf","splitBuffer","ctor","list","keyChunks","chunk","create","splitObject","date","dateTime","Y","M","D","H","m","s","setFullYear","setMonth","setDate","setHours","setMinutes","setSeconds","setMilliseconds","parseDateRawArgs","getFullYear","getMonth","padStart","getDate","console","log"],"mappings":"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","x_google_ignoreList":[0,3,6,12,15,16,17,18,19,20,22,28]}