{"version":3,"file":"index.js","mappings":"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","sources":["webpack://@hyurl/utils/webpack/universalModuleDefinition","webpack://@hyurl/utils/./node_modules/@ayonli/jsext/cjs/index.js","webpack://@hyurl/utils/./node_modules/@ayonli/jsext/cjs/number/index.js","webpack://@hyurl/utils/./node_modules/@ayonli/jsext/cjs/object/index.js","webpack://@hyurl/utils/./node_modules/@ayonli/jsext/cjs/promise/index.js","webpack://@hyurl/utils/./node_modules/check-iterable/index.js","webpack://@hyurl/utils/./node_modules/could-be-class/index.js","webpack://@hyurl/utils/./node_modules/is-like/index.js","webpack://@hyurl/utils/./count.ts","webpack://@hyurl/utils/./define.ts","webpack://@hyurl/utils/./diff.ts","webpack://@hyurl/utils/./ensureType.ts","webpack://@hyurl/utils/./flatObject.ts","webpack://@hyurl/utils/./getGlobal.ts","webpack://@hyurl/utils/./isBetween.ts","webpack://@hyurl/utils/./isEmpty.ts","webpack://@hyurl/utils/./isFloat.ts","webpack://@hyurl/utils/./isInteger.ts","webpack://@hyurl/utils/./isNumeric.ts","webpack://@hyurl/utils/./isOwnKey.ts","webpack://@hyurl/utils/./isOwnMethod.ts","webpack://@hyurl/utils/./isSubClassOf.ts","webpack://@hyurl/utils/./isVoid.ts","webpack://@hyurl/utils/./keysOf.ts","webpack://@hyurl/utils/./omit.ts","webpack://@hyurl/utils/./omitVoid.ts","webpack://@hyurl/utils/./patch.ts","webpack://@hyurl/utils/./pick.ts","webpack://@hyurl/utils/./rand.ts","webpack://@hyurl/utils/./randStr.ts","webpack://@hyurl/utils/./sleep.ts","webpack://@hyurl/utils/./sort.ts","webpack://@hyurl/utils/./split.ts","webpack://@hyurl/utils/./timestamp.ts","webpack://@hyurl/utils/./trim.ts","webpack://@hyurl/utils/./typeAs.ts","webpack://@hyurl/utils/./typeOf.ts","webpack://@hyurl/utils/./until.ts","webpack://@hyurl/utils/./useThrottle.ts","webpack://@hyurl/utils/./wrap.ts","webpack://@hyurl/utils/external node-commonjs \"child_process\"","webpack://@hyurl/utils/external node-commonjs \"events\"","webpack://@hyurl/utils/external node-commonjs \"path\"","webpack://@hyurl/utils/external node-commonjs \"url\"","webpack://@hyurl/utils/external node-commonjs \"worker_threads\"","webpack://@hyurl/utils/webpack/bootstrap","webpack://@hyurl/utils/./index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@hyurl/utils\"] = factory();\n\telse\n\t\troot[\"@hyurl/utils\"] = factory();\n})(this, () => {\nreturn ","\"use strict\";\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.run = exports.read = exports.isSubclassOf = exports.mixins = exports.throttle = exports.wrap = exports.func = exports._try = exports.AsyncGeneratorFunction = exports.AsyncFunction = void 0;\nconst check_iterable_1 = require(\"check-iterable\");\nconst number_1 = require(\"./number\");\nexports.AsyncFunction = (async function () { }).constructor;\nexports.AsyncGeneratorFunction = (async function* () { }).constructor;\nfunction _try(fn, ...args) {\n    if (typeof fn === \"function\") {\n        try {\n            return _try(fn.apply(void 0, args));\n        }\n        catch (err) {\n            return [err, undefined];\n        }\n    }\n    let returns = fn;\n    // Implementation details should be ordered from complex to simple.\n    if ((0, check_iterable_1.isAsyncGenerator)(returns)) {\n        return (async function* () {\n            let input;\n            let result;\n            // Use `while` loop instead of `for...of...` in order to\n            // retrieve the return value of a generator function.\n            while (true) {\n                try {\n                    const { done, value } = await returns.next(input);\n                    if (done) {\n                        result = value;\n                        break;\n                    }\n                    else {\n                        // Receive any potential input value that passed\n                        // to the outer `next()` call, and pass them to\n                        // `res.next()` in the next call.\n                        input = yield Promise.resolve([null, value]);\n                    }\n                }\n                catch (err) {\n                    // If any error occurs, yield that error as resolved\n                    // and break the loop immediately, indicating the\n                    // process is forced broken.\n                    yield Promise.resolve([err, undefined]);\n                    break;\n                }\n            }\n            return [null, result];\n        })();\n    }\n    else if ((0, check_iterable_1.isGenerator)(returns)) {\n        return (function* () {\n            let input;\n            let result;\n            while (true) {\n                try {\n                    const { done, value } = returns.next(input);\n                    if (done) {\n                        result = value;\n                        break;\n                    }\n                    else {\n                        input = yield [null, value];\n                    }\n                }\n                catch (err) {\n                    yield [err, undefined];\n                    break;\n                }\n            }\n            return [null, result];\n        })();\n    }\n    else if (typeof (returns === null || returns === void 0 ? void 0 : returns.then) === \"function\") {\n        returns = returns.then((value) => [null, value]);\n        return Promise.resolve(returns).catch((err) => [err, undefined]);\n    }\n    else {\n        return [null, returns];\n    }\n}\nexports._try = _try;\n/**\n * Inspired by Golang, creates a function that receives a `defer` function which can be used\n * to carry deferred jobs that will be run after the main function is complete.\n *\n * Multiple calls of the `defer` function is supported, and the callbacks are called in the\n * LIFO order. Callbacks can be async functions if the main function is an async function or\n * an async generator function, and all the running procedures will be awaited.\n *\n * @example\n *  const getVersion = await jsext.func(async (defer) => {\n *      const file = await fs.open(\"./package.json\", \"r\");\n *      defer(() => file.close());\n *\n *      const content = await file.readFile(\"utf8\");\n *      const pkg = JSON.parse(content);\n *\n *      return pkg.version as string;\n *  });\n */\nfunction func(fn) {\n    return function (...args) {\n        var _a;\n        const callbacks = [];\n        const defer = (cb) => void callbacks.push(cb);\n        let result;\n        try {\n            const returns = fn.call(this, defer, ...args);\n            if ((0, check_iterable_1.isAsyncGenerator)(returns)) {\n                const gen = (async function* () {\n                    var _a;\n                    let input;\n                    // Use `while` loop instead of `for...of...` in order to\n                    // retrieve the return value of a generator function.\n                    while (true) {\n                        try {\n                            const { done, value } = await returns.next(input);\n                            if (done) {\n                                result = { value, error: null };\n                                break;\n                            }\n                            else {\n                                // Receive any potential input value that passed\n                                // to the outer `next()` call, and pass them to\n                                // `res.next()` in the next call.\n                                input = yield Promise.resolve(value);\n                            }\n                        }\n                        catch (error) {\n                            // If any error occurs, capture that error and break\n                            // the loop immediately, indicating the process is\n                            // forced broken.\n                            result = { value: void 0, error };\n                            break;\n                        }\n                    }\n                    for (let i = callbacks.length - 1; i >= 0; i--) {\n                        await ((_a = callbacks[i]) === null || _a === void 0 ? void 0 : _a.call(callbacks));\n                    }\n                    if (result.error) {\n                        throw result.error;\n                    }\n                    else {\n                        return result.value;\n                    }\n                })();\n                return gen;\n            }\n            else if ((0, check_iterable_1.isGenerator)(returns)) {\n                const gen = (function* () {\n                    var _a;\n                    let input;\n                    while (true) {\n                        try {\n                            const { done, value } = returns.next(input);\n                            if (done) {\n                                result = { value, error: null };\n                                break;\n                            }\n                            else {\n                                input = yield value;\n                            }\n                        }\n                        catch (error) {\n                            result = { value: void 0, error };\n                            break;\n                        }\n                    }\n                    for (let i = callbacks.length - 1; i >= 0; i--) {\n                        (_a = callbacks[i]) === null || _a === void 0 ? void 0 : _a.call(callbacks);\n                    }\n                    if (result.error) {\n                        throw result.error;\n                    }\n                    else {\n                        return result.value;\n                    }\n                })();\n                return gen;\n            }\n            else if (typeof (returns === null || returns === void 0 ? void 0 : returns.then) === \"function\") {\n                return Promise.resolve(returns).then(value => ({\n                    value,\n                    error: null,\n                })).catch((error) => ({\n                    value: void 0,\n                    error,\n                })).then(async (result) => {\n                    var _a;\n                    for (let i = callbacks.length - 1; i >= 0; i--) {\n                        await ((_a = callbacks[i]) === null || _a === void 0 ? void 0 : _a.call(callbacks));\n                    }\n                    if (result.error) {\n                        throw result.error;\n                    }\n                    else {\n                        return result.value;\n                    }\n                });\n            }\n            else {\n                result = { value: returns, error: null };\n            }\n        }\n        catch (error) {\n            result = { value: void 0, error };\n        }\n        for (let i = callbacks.length - 1; i >= 0; i--) {\n            (_a = callbacks[i]) === null || _a === void 0 ? void 0 : _a.call(callbacks);\n        }\n        if (result.error) {\n            throw result.error;\n        }\n        else {\n            return result.value;\n        }\n    };\n}\nexports.func = func;\n/**\n * Wraps a function inside another function and returns a new function\n * that copies the original function's name and properties.\n */\nfunction wrap(fn, wrapper) {\n    const wrapped = function (...args) {\n        return wrapper.call(this, fn, ...args);\n    };\n    Object.defineProperty(wrapped, \"name\", Object.getOwnPropertyDescriptor(fn, \"name\"));\n    Object.defineProperty(wrapped, \"length\", Object.getOwnPropertyDescriptor(fn, \"length\"));\n    Object.defineProperty(wrapped, \"toString\", {\n        configurable: true,\n        enumerable: false,\n        writable: true,\n        value: fn.toString.bind(fn),\n    });\n    return wrapped;\n}\nexports.wrap = wrap;\nconst throttleCaches = new Map();\nfunction throttle(handler, options) {\n    const key = typeof options === \"number\" ? null : options.for;\n    const duration = typeof options === \"number\" ? options : options.duration;\n    const handleCall = function (cache, ...args) {\n        var _a;\n        if (cache.result && Date.now() < ((_a = cache.expires) !== null && _a !== void 0 ? _a : 0)) {\n            if (cache.result.error) {\n                throw cache.result.error;\n            }\n            else {\n                return cache.result.value;\n            }\n        }\n        try {\n            const returns = handler.call(this, ...args);\n            cache.result = { value: returns };\n            cache.expires = Date.now() + duration;\n            return returns;\n        }\n        catch (error) {\n            cache.result = { error };\n            cache.expires = Date.now() + duration;\n            throw error;\n        }\n    };\n    if (!key) {\n        const cache = { for: null };\n        return function (...args) {\n            return handleCall.call(this, cache, ...args);\n        };\n    }\n    else {\n        let cache = throttleCaches.get(key);\n        if (!cache) {\n            cache = { for: key };\n            throttleCaches.set(key, cache);\n        }\n        return function (...args) {\n            return handleCall.call(this, cache, ...args);\n        };\n    }\n}\nexports.throttle = throttle;\n/**\n * Merges properties and methods only if they're missing in the class.\n */\nfunction mergeIfNotExists(proto, source, mergeSuper = false) {\n    const props = Reflect.ownKeys(source);\n    for (const prop of props) {\n        if (prop == \"constructor\") {\n            continue;\n        }\n        else if (mergeSuper) {\n            // When merging properties from super classes, the properties in the\n            // base class has the first priority and shall not be overwrite.\n            if (!(prop in proto)) {\n                setProp(proto, source, prop);\n            }\n        }\n        else if (!proto.hasOwnProperty(prop)) {\n            setProp(proto, source, prop);\n        }\n    }\n    return proto;\n}\n/**\n * Merges properties and methods across the prototype chain.\n */\nfunction mergeHierarchy(ctor, mixin, mergeSuper = false) {\n    mergeIfNotExists(ctor.prototype, mixin.prototype, mergeSuper);\n    const _super = Object.getPrototypeOf(mixin);\n    // Every user defined class or functions that can be instantiated have their\n    // own names, if no name appears, that means the function has traveled to \n    // the root of the hierarchical tree.\n    if (_super.name) {\n        mergeHierarchy(ctor, _super, true);\n    }\n}\n/**\n * Sets property for prototype based on the given source and prop name properly.\n */\nfunction setProp(proto, source, prop) {\n    const desc = Object.getOwnPropertyDescriptor(source, prop);\n    if (desc) {\n        Object.defineProperty(proto, prop, desc);\n    }\n    else {\n        proto[prop] = source[prop];\n    }\n}\nfunction mixins(base, ...mixins) {\n    const obj = { ctor: null };\n    obj.ctor = class extends base {\n    }; // make sure this class has no name\n    for (const mixin of mixins) {\n        if (typeof mixin == \"function\") {\n            mergeHierarchy(obj.ctor, mixin);\n        }\n        else if (mixin && typeof mixin == \"object\") {\n            mergeIfNotExists(obj.ctor.prototype, mixin);\n        }\n        else {\n            throw new TypeError(\"mixin must be a constructor or an object\");\n        }\n    }\n    return obj.ctor;\n}\nexports.mixins = mixins;\n/** Checks if a class is a subclass of another class. */\nfunction isSubclassOf(ctor1, ctor2) {\n    return typeof ctor1 === \"function\"\n        && typeof ctor2 === \"function\"\n        && ctor1.prototype instanceof ctor2;\n}\nexports.isSubclassOf = isSubclassOf;\nfunction read(source, eventMap = undefined) {\n    var _a;\n    if (typeof source[Symbol.asyncIterator] === \"function\") {\n        return source;\n    }\n    const iterable = {\n        ended: false,\n        error: null,\n        queue: [],\n        consumers: [],\n        next() {\n            return new Promise((resolve, reject) => {\n                if (this.error && !this.ended) {\n                    // If there is error occurred during the last transmission and the iterator\n                    // hasn't been closed, reject that error and stop the iterator immediately.\n                    reject(this.error);\n                    this.ended = true;\n                }\n                else if (this.ended && !this.queue.length) {\n                    // If the iterator has is closed, resolve the pending consumer with void\n                    // value.\n                    resolve({ value: void 0, done: true });\n                }\n                else if (this.queue.length > 0) {\n                    // If there are data in the queue, resolve the the first piece immediately.\n                    resolve({ value: this.queue.shift(), done: false });\n                }\n                else {\n                    // If there are no queued data, push the consumer to a waiting queue.\n                    this.consumers.push({ resolve, reject });\n                }\n            });\n        }\n    };\n    const handleMessage = (data) => {\n        var _a;\n        if (iterable.consumers.length > 0) {\n            (_a = iterable.consumers.shift()) === null || _a === void 0 ? void 0 : _a.resolve({ value: data, done: false });\n        }\n        else {\n            iterable.queue.push(data);\n        }\n    };\n    const handleClose = () => {\n        iterable.ended = true;\n        let consumer;\n        while (consumer = iterable.consumers.shift()) {\n            consumer.resolve({ value: undefined, done: true });\n        }\n    };\n    const handleError = (err) => {\n        iterable.error = err;\n        if (iterable.consumers.length > 0) {\n            iterable.consumers.forEach(item => {\n                item.reject(err);\n            });\n            iterable.consumers = [];\n        }\n    };\n    const handleBrowserErrorEvent = (ev) => {\n        let err;\n        if (ev instanceof ErrorEvent) {\n            err = ev.error || new Error(ev.message);\n        }\n        else {\n            // @ts-ignore\n            err = new Error(\"something went wrong\", { cause: ev });\n        }\n        handleError(err);\n    };\n    const proto = Object.getPrototypeOf(source);\n    const msgDesc = Object.getOwnPropertyDescriptor(proto, \"onmessage\");\n    if ((msgDesc === null || msgDesc === void 0 ? void 0 : msgDesc.set) && typeof source.close === \"function\") { // WebSocket or EventSource\n        const errDesc = Object.getOwnPropertyDescriptor(proto, \"onerror\");\n        const closeDesc = Object.getOwnPropertyDescriptor(proto, \"onclose\");\n        let cleanup;\n        if ((eventMap === null || eventMap === void 0 ? void 0 : eventMap.event) &&\n            (eventMap === null || eventMap === void 0 ? void 0 : eventMap.event) !== \"message\" &&\n            typeof source[\"addEventListener\"] === \"function\") { // for EventSource listening on custom events\n            const es = source;\n            const eventName = eventMap.event;\n            const msgListener = (ev) => {\n                handleMessage(ev.data);\n            };\n            es.addEventListener(eventName, msgListener);\n            cleanup = () => {\n                es.removeEventListener(eventName, msgListener);\n            };\n        }\n        else {\n            msgDesc.set.call(source, (ev) => {\n                handleMessage(ev.data);\n            });\n            cleanup = () => {\n                var _a;\n                (_a = msgDesc.set) === null || _a === void 0 ? void 0 : _a.call(source, null);\n            };\n        }\n        (_a = errDesc === null || errDesc === void 0 ? void 0 : errDesc.set) === null || _a === void 0 ? void 0 : _a.call(source, handleBrowserErrorEvent);\n        if (closeDesc === null || closeDesc === void 0 ? void 0 : closeDesc.set) { // WebSocket\n            closeDesc.set.call(source, () => {\n                var _a, _b;\n                handleClose();\n                (_a = closeDesc.set) === null || _a === void 0 ? void 0 : _a.call(source, null);\n                (_b = errDesc === null || errDesc === void 0 ? void 0 : errDesc.set) === null || _b === void 0 ? void 0 : _b.call(source, null);\n                cleanup === null || cleanup === void 0 ? void 0 : cleanup();\n            });\n        }\n        else if (!(closeDesc === null || closeDesc === void 0 ? void 0 : closeDesc.set) && typeof source.close === \"function\") { // EventSource\n            // EventSource by default does not trigger close event, we need to make sure when\n            // it calls the close() function, the iterator is automatically closed.\n            const es = source;\n            const _close = es.close;\n            es.close = function close() {\n                var _a;\n                _close.call(es);\n                handleClose();\n                es.close = _close;\n                (_a = errDesc === null || errDesc === void 0 ? void 0 : errDesc.set) === null || _a === void 0 ? void 0 : _a.call(source, null);\n                cleanup === null || cleanup === void 0 ? void 0 : cleanup();\n            };\n        }\n    }\n    else if (typeof source.send === \"function\" && typeof source.close === \"function\") {\n        // non-standard WebSocket implementation\n        const ws = source;\n        ws.onmessage = (ev) => {\n            handleMessage(ev.data);\n        };\n        ws.onerror = handleBrowserErrorEvent;\n        ws.onclose = () => {\n            handleClose();\n            ws.onclose = null;\n            ws.onerror = null;\n            ws.onmessage = null;\n        };\n    }\n    else if (typeof source[\"addEventListener\"] === \"function\") { // EventTarget\n        const target = source;\n        const msgEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.message) || \"message\";\n        const errEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.error) || \"error\";\n        const closeEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.close) || \"close\";\n        const msgListener = (ev) => {\n            if (ev instanceof MessageEvent) {\n                handleMessage(ev.data);\n            }\n        };\n        target.addEventListener(msgEvent, msgListener);\n        target.addEventListener(errEvent, handleBrowserErrorEvent);\n        target.addEventListener(closeEvent, function closeListener() {\n            handleClose();\n            target.removeEventListener(closeEvent, closeListener);\n            target.removeEventListener(msgEvent, msgListener);\n            target.removeEventListener(errEvent, handleBrowserErrorEvent);\n        });\n    }\n    else if (typeof source[\"on\"] === \"function\") { // EventEmitter\n        const target = source;\n        const dataEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.data) || \"data\";\n        const errEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.error) || \"error\";\n        const endEvent = (eventMap === null || eventMap === void 0 ? void 0 : eventMap.close) || \"close\";\n        target.on(dataEvent, handleMessage);\n        target.once(errEvent, handleError);\n        target.once(endEvent, () => {\n            handleClose();\n            target.off(dataEvent, handleMessage);\n            target.off(dataEvent, handleError);\n        });\n    }\n    else {\n        throw new TypeError(\"the input source cannot be read as an AsyncIterable object\");\n    }\n    return {\n        [Symbol.asyncIterator]() {\n            return iterable;\n        }\n    };\n}\nexports.read = read;\nconst isNode = typeof process === \"object\" && !!((_a = process.versions) === null || _a === void 0 ? void 0 : _a.node);\n/**\n * The maximum number of workers allowed to exist at the same time.\n *\n * The primary purpose of the workers is not mean to run tasks in parallel, but run them in separate\n * from the main thread, so that aborting tasks can be achieved by terminating the worker thread and\n * it will not affect the main thread.\n *\n * That said, the worker thread can still be used to achieve parallelism, but it should be noticed\n * that only the numbers of tasks that equals to the CPU core numbers will be run at the same time.\n */\nconst maxWorkerNum = 16;\nconst workerIdCounter = (0, number_1.sequence)(1, Number.MAX_SAFE_INTEGER, 1, true);\nlet workerPool = [];\n// The worker consumer queue is nothing but a callback list, once a worker is available, the runner\n// pop a consumer and run the callback, which will retry gaining the worker and retry the task.\nconst workerConsumerQueue = [];\n/**\n * Runs a task in the `script` in a worker thread that can be aborted during runtime.\n *\n * In Node.js, the `script` can be either a CommonJS module or an ES module, and is relative to\n * the current working directory if not absolute.\n *\n * In browser or Deno, the `script` can only be an ES module, and is relative to the current URL\n * (or working directory for Deno) if not absolute.\n */\nasync function run(script, args = undefined, options = undefined) {\n    var _a, _b;\n    const msg = {\n        type: \"ffi\",\n        script,\n        baseUrl: \"\",\n        fn: (options === null || options === void 0 ? void 0 : options.fn) || \"default\",\n        args: args !== null && args !== void 0 ? args : [],\n    };\n    if (typeof Deno === \"object\") {\n        msg.baseUrl = \"file://\" + Deno.cwd() + \"/\";\n    }\n    else if (isNode) {\n        msg.baseUrl = \"file://\" + process.cwd() + \"/\";\n    }\n    else if (typeof location === \"object\") {\n        msg.baseUrl = location.href;\n    }\n    // `buffer` is used to store data pieces yielded by generator functions before they are\n    // consumed. `error` and `result` serves similar purposes for function results.\n    const buffer = [];\n    let error = null;\n    let result;\n    let resolver;\n    let iterator;\n    let workerId;\n    let poolRecord;\n    let release;\n    let terminate = () => Promise.resolve(void 0);\n    const timeout = (options === null || options === void 0 ? void 0 : options.timeout) ? setTimeout(() => {\n        const err = new Error(`operation timeout after ${options.timeout}ms`);\n        if (resolver) {\n            resolver.reject(err);\n        }\n        else {\n            error = err;\n        }\n        terminate();\n    }, options.timeout) : null;\n    const handleMessage = (msg) => {\n        var _a;\n        if (msg && typeof msg === \"object\" && typeof msg.type === \"string\") {\n            if (msg.type === \"error\") {\n                return handleError(msg.error);\n            }\n            else if (msg.type === \"return\") {\n                if (options === null || options === void 0 ? void 0 : options.keepAlive) {\n                    // Release before resolve.\n                    release === null || release === void 0 ? void 0 : release();\n                    if (workerConsumerQueue.length) {\n                        // Queued consumer now has chance to gain the worker.\n                        (_a = workerConsumerQueue.shift()) === null || _a === void 0 ? void 0 : _a();\n                    }\n                }\n                else {\n                    terminate();\n                }\n                if (resolver) {\n                    resolver.resolve(msg.value);\n                }\n                else {\n                    result = { value: msg.value };\n                }\n            }\n            else if (msg.type === \"yield\") {\n                if (msg.done) {\n                    // The final message of yield event is the return value.\n                    handleMessage({ type: \"return\", value: msg.value });\n                }\n                else {\n                    if (iterator) {\n                        iterator.emit(\"data\", msg.value);\n                    }\n                    else {\n                        buffer.push(msg.value);\n                    }\n                }\n            }\n        }\n    };\n    const handleError = (err) => {\n        if (resolver) {\n            resolver.reject(err);\n        }\n        else if (iterator) {\n            iterator.emit(\"error\", err);\n        }\n        else {\n            error = err;\n        }\n    };\n    const handleExit = () => {\n        var _a;\n        if (poolRecord) {\n            // Clean the pool before resolve.\n            workerPool = workerPool.filter(record => record !== poolRecord);\n            if (workerConsumerQueue.length) {\n                // Queued consumer now has chance to create new worker.\n                (_a = workerConsumerQueue.shift()) === null || _a === void 0 ? void 0 : _a();\n            }\n        }\n        if (resolver) {\n            resolver.resolve(void 0);\n        }\n        else if (iterator) {\n            iterator.emit(\"close\");\n        }\n        else if (!error && !result) {\n            result = { value: void 0 };\n        }\n    };\n    if (isNode) {\n        const path = await Promise.resolve().then(() => require(\"path\"));\n        const { fileURLToPath } = await Promise.resolve().then(() => require(\"url\"));\n        let _filename;\n        let _dirname;\n        let entry;\n        if (typeof __filename === \"string\") {\n            _filename = __filename;\n            _dirname = __dirname;\n        }\n        else {\n            // This file URL will be replace with `import.meta.url` by Rollup plugin.\n            _filename = fileURLToPath(\"file://{__filename}\");\n            _dirname = path.dirname(_filename);\n        }\n        if ([\"cjs\", \"esm\"].includes(path.basename(_dirname))) { // compiled\n            entry = path.join(path.dirname(_dirname), \"worker.mjs\");\n        }\n        else {\n            entry = path.join(_dirname, \"worker.mjs\");\n        }\n        if ((options === null || options === void 0 ? void 0 : options.adapter) === \"child_process\") {\n            let worker;\n            let ok = true;\n            poolRecord = workerPool.find(item => {\n                return item.adapter === \"child_process\" && !item.busy;\n            });\n            if (poolRecord) {\n                worker = poolRecord.worker;\n                workerId = poolRecord.workerId;\n                poolRecord.busy = true;\n            }\n            else if (workerPool.length < maxWorkerNum) {\n                const { fork } = await Promise.resolve().then(() => require(\"child_process\"));\n                const isPrior14 = parseInt(process.version.slice(1)) < 14;\n                worker = fork(entry, {\n                    stdio: \"inherit\",\n                    serialization: isPrior14 ? \"advanced\" : \"json\",\n                });\n                workerId = worker.pid;\n                ok = await new Promise((resolve) => {\n                    worker.once(\"exit\", () => {\n                        if (error) {\n                            // The child process took too long to start and cause timeout error.\n                            resolve(false);\n                        }\n                    });\n                    worker.once(\"message\", () => {\n                        worker.removeAllListeners(\"exit\");\n                        resolve(true);\n                    });\n                });\n                // Fill the worker pool regardless the current call should keep-alive or not,\n                // this will make sure that the total number of workers will not exceed the\n                // maxWorkerNum. If the the call doesn't keep-alive the worker, it will be\n                // cleaned after the call.\n                ok && workerPool.push(poolRecord = {\n                    workerId,\n                    worker,\n                    adapter: \"child_process\",\n                    busy: true,\n                });\n            }\n            else {\n                // Put the current call in the consumer queue if there are no workers available,\n                // once an existing call finishes, the queue will pop the its head consumer and\n                // retry.\n                return new Promise((resolve) => {\n                    workerConsumerQueue.push(resolve);\n                }).then(() => run(script, args, options));\n            }\n            release = () => {\n                // Remove the event listener so that later calls will not mess up.\n                worker.off(\"message\", handleMessage);\n                poolRecord && (poolRecord.busy = false);\n            };\n            terminate = () => Promise.resolve(void worker.kill(1));\n            if (ok) {\n                worker.send(msg);\n                worker.on(\"message\", handleMessage);\n                worker.once(\"error\", handleError);\n                worker.once(\"exit\", handleExit);\n            }\n        }\n        else {\n            let worker;\n            let ok = true;\n            poolRecord = workerPool.find(item => {\n                return item.adapter === \"worker_threads\" && !item.busy;\n            });\n            if (poolRecord) {\n                worker = poolRecord.worker;\n                workerId = poolRecord.workerId;\n                poolRecord.busy = true;\n            }\n            else if (workerPool.length < maxWorkerNum) {\n                const { Worker } = await Promise.resolve().then(() => require(\"worker_threads\"));\n                worker = new Worker(entry);\n                // `threadId` may not exist in Bun.\n                workerId = (_a = worker.threadId) !== null && _a !== void 0 ? _a : workerIdCounter.next().value;\n                ok = await new Promise((resolve) => {\n                    worker.once(\"exit\", () => {\n                        if (error) {\n                            // The child process took too long to start and cause timeout error.\n                            resolve(false);\n                        }\n                    });\n                    worker.once(\"online\", () => {\n                        worker.removeAllListeners(\"exit\");\n                        resolve(true);\n                    });\n                });\n                ok && workerPool.push(poolRecord = {\n                    workerId,\n                    worker,\n                    adapter: \"worker_threads\",\n                    busy: true,\n                });\n            }\n            else {\n                return new Promise((resolve) => {\n                    workerConsumerQueue.push(resolve);\n                }).then(() => run(script, args, options));\n            }\n            release = () => {\n                worker.off(\"message\", handleMessage);\n                poolRecord && (poolRecord.busy = false);\n            };\n            terminate = async () => void (await worker.terminate());\n            if (ok) {\n                worker.postMessage(msg);\n                worker.on(\"message\", handleMessage);\n                worker.once(\"error\", handleError);\n                worker.once(\"messageerror\", handleError);\n                worker.once(\"exit\", handleExit);\n            }\n        }\n    }\n    else {\n        let worker;\n        poolRecord = workerPool.find(item => {\n            return item.adapter === \"worker_threads\" && !item.busy;\n        });\n        if (poolRecord) {\n            worker = poolRecord.worker;\n            workerId = poolRecord.workerId;\n            poolRecord.busy = true;\n        }\n        else if (workerPool.length < maxWorkerNum) {\n            let url;\n            if (typeof Deno === \"object\") {\n                // Deno can load the module regardless of MINE type.\n                url = [\n                    ...(\"file://{__filename}\".split(\"/\").slice(0, -1)),\n                    \"worker-web.mjs\"\n                ].join(\"/\");\n            }\n            else {\n                const _url = (options === null || options === void 0 ? void 0 : options.webWorkerEntry)\n                    || \"https://raw.githubusercontent.com/ayonli/jsext/main/esm/worker-web.mjs\";\n                const res = await fetch(_url);\n                let blob;\n                if ((_b = res.headers.get(\"content-type\")) === null || _b === void 0 ? void 0 : _b.startsWith(\"application/javascript\")) {\n                    blob = await res.blob();\n                }\n                else {\n                    const buf = await res.arrayBuffer();\n                    blob = new Blob([new Uint8Array(buf)], {\n                        type: \"application/javascript\",\n                    });\n                }\n                url = URL.createObjectURL(blob);\n            }\n            worker = new Worker(url, { type: \"module\" });\n            workerId = workerIdCounter.next().value;\n            workerPool.push(poolRecord = {\n                workerId,\n                worker,\n                adapter: \"worker_threads\",\n                busy: true,\n            });\n        }\n        else {\n            return new Promise((resolve) => {\n                workerConsumerQueue.push(resolve);\n            }).then(() => run(script, args, options));\n        }\n        release = () => {\n            worker.onmessage = null;\n            poolRecord && (poolRecord.busy = false);\n        };\n        terminate = async () => {\n            await Promise.resolve(worker.terminate());\n            handleExit();\n        };\n        worker.postMessage(msg);\n        worker.onmessage = (ev) => handleMessage(ev.data);\n        worker.onerror = (ev) => handleMessage(ev.error || new Error(ev.message));\n        worker.onmessageerror = () => {\n            handleError(new Error(\"unable to deserialize the message\"));\n        };\n    }\n    return {\n        workerId,\n        async abort() {\n            timeout && clearTimeout(timeout);\n            await terminate();\n        },\n        async result() {\n            return await new Promise((resolve, reject) => {\n                if (error) {\n                    reject(error);\n                }\n                else if (result) {\n                    resolve(result.value);\n                }\n                else {\n                    resolver = { resolve, reject };\n                }\n            });\n        },\n        async *iterate() {\n            if (resolver) {\n                throw new Error(\"result() has been called\");\n            }\n            else if (result) {\n                throw new TypeError(\"the response is not iterable\");\n            }\n            const { EventEmitter } = await Promise.resolve().then(() => require(\"events\"));\n            iterator = new EventEmitter();\n            if (buffer.length) {\n                (async () => {\n                    await Promise.resolve(null);\n                    let msg;\n                    while (msg = buffer.shift()) {\n                        iterator.emit(\"data\", msg);\n                    }\n                })().catch(console.error);\n            }\n            for await (const msg of read(iterator)) {\n                yield msg;\n            }\n        },\n    };\n}\nexports.run = run;\nconst jsext = {\n    try: _try,\n    func,\n    wrap,\n    throttle,\n    mixins,\n    isSubclassOf,\n    read,\n    run,\n};\nexports.default = jsext;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sequence = exports.random = exports.isBetween = exports.isNumeric = exports.isFloat = void 0;\n/** Returns `true` if the given value is a float number, `false` otherwise. */\nfunction isFloat(value) {\n    return typeof value === \"number\"\n        && !Number.isNaN(value)\n        && (!Number.isFinite(value) || value % 1 !== 0);\n}\nexports.isFloat = isFloat;\n/**\n * Returns `true` if the given value is a numeric value, `false` otherwise. A numeric value is a\n * number, a bigint, or a string that can be converted to a number or bigint.\n */\nfunction isNumeric(value) {\n    const type = typeof value;\n    if (type === \"number\" || type === \"bigint\") {\n        return true;\n    }\n    else if (type === \"string\") {\n        if (!Number.isNaN(value)) {\n            return true;\n        }\n        else {\n            try {\n                BigInt(value);\n                return true;\n            }\n            catch (_a) {\n                return false;\n            }\n        }\n    }\n    return false;\n}\nexports.isNumeric = isNumeric;\n/** Return `true` if a number is between the given range (inclusive). */\nfunction isBetween(value, [min, max]) {\n    return value >= min && value <= max;\n}\nexports.isBetween = isBetween;\n/** Returns a random integer ranged from `min` to `max`. */\nfunction random(min, max) {\n    return min + Math.floor(Math.random() * (max - min + 1));\n}\nexports.random = random;\n/** Creates a generator that produces sequential numbers from `min` to `max` (inclusive). */\nfunction* sequence(min, max, step = 1, loop = false) {\n    let id = min;\n    while (true) {\n        yield id;\n        if (id >= max) {\n            if (loop) {\n                id = min;\n            }\n            else {\n                break;\n            }\n        }\n        else {\n            id += step;\n        }\n    }\n}\nexports.sequence = sequence;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isValid = exports.as = exports.omit = exports.pick = exports.patch = exports.hasOwnMethod = exports.hasOwn = void 0;\nfunction hasOwn(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n}\nexports.hasOwn = hasOwn;\n;\n/**\n * Returns `true` if the specified object has the indicated method as its own method (in its own\n * prototype). If the method is inherited, or is not in the prototype, or does not exist, this\n * function returns `false`.\n */\nfunction hasOwnMethod(obj, method) {\n    var _a;\n    const proto = Object.getPrototypeOf(obj);\n    if (!proto || !hasOwn(proto, method)) {\n        return false;\n    }\n    return typeof ((_a = Object.getOwnPropertyDescriptor(proto, method)) === null || _a === void 0 ? void 0 : _a.value) === \"function\";\n}\nexports.hasOwnMethod = hasOwnMethod;\nfunction patch(target, ...sources) {\n    for (const source of sources) {\n        for (const key of Reflect.ownKeys(source)) {\n            if (!hasOwn(target, key) || target[key] === undefined) {\n                target[key] = source[key];\n            }\n        }\n    }\n    return target;\n}\nexports.patch = patch;\n;\nfunction pick(obj, keys) {\n    return keys.reduce((result, key) => {\n        if (key in obj && obj[key] !== undefined) {\n            result[key] = obj[key];\n        }\n        return result;\n    }, {});\n}\nexports.pick = pick;\nfunction omit(obj, keys) {\n    const allKeys = Reflect.ownKeys(obj);\n    const keptKeys = allKeys.filter(key => !keys.includes(key));\n    const result = pick(obj, keptKeys);\n    // special treatment for Error types\n    if (obj instanceof Error) {\n        [\"name\", \"message\", \"cause\"].forEach(key => {\n            if (!keys.includes(key) &&\n                obj[key] !== undefined &&\n                !hasOwn(result, key)) {\n                result[key] = obj[key];\n            }\n        });\n    }\n    return result;\n}\nexports.omit = omit;\nfunction as(value, type) {\n    if (typeof type !== \"function\") {\n        throw new TypeError(\"type must be a valid constructor\");\n    }\n    let _type;\n    const primitiveMap = {\n        \"string\": String,\n        \"number\": Number,\n        \"bigint\": BigInt,\n        \"boolean\": Boolean,\n        \"symbol\": Symbol\n    };\n    if (value instanceof type) {\n        if ([String, Number, Boolean].includes(type)) {\n            return value.valueOf(); // make sure the primitives are returned.\n        }\n        else {\n            return value;\n        }\n    }\n    else if ((_type = typeof value) && primitiveMap[_type] === type) {\n        return value;\n    }\n    return null;\n}\nexports.as = as;\n/**\n * Returns `true` if the given value is valid. Thee following values are considered invalid:\n *\n * - `undefined`\n * - `null`\n * - `NaN`\n * - `Invalid Date`\n */\nfunction isValid(value) {\n    return value !== undefined\n        && value !== null\n        && !Object.is(value, NaN)\n        && !(value instanceof Date && value.toString() === \"Invalid Date\");\n}\nexports.isValid = isValid;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.until = exports.sleep = exports.after = exports.timeout = void 0;\n/** Try to resolve a promise with a timeout limit. */\nasync function timeout(value, ms) {\n    const result = await Promise.race([\n        value,\n        new Promise((_, reject) => setTimeout(() => {\n            reject(new Error(`operation timeout after ${ms}ms`));\n        }, ms))\n    ]);\n    return result;\n}\nexports.timeout = timeout;\n/** Resolves a promise only after the given duration. */\nasync function after(value, ms) {\n    const [result] = await Promise.allSettled([\n        value,\n        new Promise(resolve => setTimeout(resolve, ms))\n    ]);\n    if (result.status === \"fulfilled\") {\n        return result.value;\n    }\n    else {\n        throw result.reason;\n    }\n}\nexports.after = after;\n/** Blocks the context for a given time. */\nasync function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\nexports.sleep = sleep;\n/** Blocks the context until the test is passed. */\nasync function until(test) {\n    if (typeof globalThis.setImmediate === \"undefined\") {\n        // @ts-ignore\n        globalThis.setImmediate = (cb) => setTimeout(cb, 0);\n    }\n    do {\n        await new Promise(globalThis.setImmediate);\n    } while ((await test()) == false);\n}\nexports.until = until;\n//# sourceMappingURL=index.js.map","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isIterable = isIterable;\nexports.isAsyncIterable = isAsyncIterable;\nexports.isIteratorLike = isIteratorLike;\nexports.isIterableIterator = isIterableIterator;\nexports.isAsyncIterableIterator = isAsyncIterableIterator;\nexports.isGenerator = isGenerator;\nexports.isAsyncGenerator = isAsyncGenerator;\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nif (!Symbol.asyncIterator) {\n  Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\");\n}\n\n/**\n * Checks if the given object is an Iterable (implemented `@@iterator`).\n * @returns {obj is Iterable<any>}\n */\nfunction isIterable(obj) {\n  return obj !== null && obj !== undefined && typeof obj[Symbol.iterator] === \"function\";\n}\n\n/**\n * Checks if the given object is an AsyncIterable (implemented `@@asyncIterator`).\n * @returns {obj is AsyncIterable<any>}\n */\nfunction isAsyncIterable(obj) {\n  return obj !== null && obj !== undefined && typeof obj[Symbol.asyncIterator] === \"function\";\n}\n\n/**\n * Checks if the given object is an IteratorLike (implemented `next`).\n * @returns {obj is { next: Function }}\n */\nfunction isIteratorLike(obj) {\n  // An iterable object has a 'next' method, however including a 'next' method\n  // doesn't ensure the object is an iterator, it is only iterator-like.\n  return _typeof(obj) === \"object\" && obj !== null && typeof obj.next === \"function\";\n}\n\n/**\n * Checks if the given object is an IterableIterator (implemented both\n * `@@iterator` and `next`).\n */\nfunction isIterableIterator(obj) {\n  return isIteratorLike(obj) && typeof obj[Symbol.iterator] === \"function\";\n}\n\n/**\n * Checks if the given object is an AsyncIterableIterator (implemented\n * both `@@asyncIterator` and `next`).\n * @returns {obj is AsyncIterableIterator<any>}\n */\nfunction isAsyncIterableIterator(obj) {\n  return isIteratorLike(obj) && typeof obj[Symbol.asyncIterator] === \"function\";\n}\n\n/**\n * Checks if the given object is a Generator.\n * @returns {obj is Generator}\n */\nfunction isGenerator(obj) {\n  return isIterableIterator(obj) && hasGeneratorSpecials(obj);\n}\n\n/**\n * Checks if the given object is an AsyncGenerator.\n * @returns {obj is AsyncGenerator}\n */\nfunction isAsyncGenerator(obj) {\n  return isAsyncIterableIterator(obj) && hasGeneratorSpecials(obj);\n}\nfunction hasGeneratorSpecials(obj) {\n  return typeof obj[\"return\"] === \"function\" && typeof obj[\"throw\"] === \"function\";\n}\n","\"use strict\";\n\n/**\n * Checks if an object could be an instantiable class.\n * @param {any} obj\n * @returns {obj is new (...args: any[]) => any}\n */\nfunction couldBeClass(obj) {\n    if (typeof obj != \"function\") return false;\n\n    // async function or arrow function\n    if (obj.prototype === undefined)\n        return false;\n\n    // generator function and malformed inheritance\n    if (obj.prototype.constructor !== obj)\n        return false;\n\n    // has own prototype properties\n    if (Object.getOwnPropertyNames(obj.prototype).length >= 2)\n        return true;\n\n    var str = String(obj);\n\n    // ES6 class\n    if (str.slice(0, 5) == \"class\")\n        return true;\n\n    // anonymous function\n    if (/^function\\s*\\(|^function anonymous\\(/.test(str))\n        return false;\n\n    var hasThis = /(call|apply|_classCallCheck)\\(this(, arguments)?\\)|\\bthis(.\\S+|\\[.+?\\])\\s*(=|\\()|=\\s*this[,;]/.test(str);\n\n    // Upper-cased first char of the name and has `this` in the body, or it's\n    // a native class in ES5 style.\n    if (/^function\\s+[A-Z]/.test(str) && (hasThis ||\n        (/\\[native code\\]/.test(str) &&\n            obj.name !== \"BigInt\" && // ES6 BigInt and Symbol is not class\n            obj.name !== \"Symbol\"\n        )\n    )) {\n        return true;\n    }\n\n    // TypeScript anonymous class to ES5 with default export\n    if (hasThis && obj.name === \"default_1\")\n        return true;\n\n    return false;\n}\n\nexports.couldBeClass = couldBeClass;\nexports.default = couldBeClass;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isArrayLike = isArrayLike;\nexports.isBufferLike = void 0;\nexports.isCollectionLike = isCollectionLike;\nexports.isDictLike = isDictLike;\nexports.isErrorLike = isErrorLike;\nexports.isObjectIdLike = isObjectIdLike;\nexports.isPromiseLike = isPromiseLike;\nexports.isTypedArrayLike = isTypedArrayLike;\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\nfunction _iterableToArrayLimit(arr, i) { var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (null != _i) { var _s, _e, _x, _r, _arr = [], _n = !0, _d = !1; try { if (_x = (_i = _i.call(arr)).next, 0 === i) { if (Object(_i) !== _i) return; _n = !1; } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0) { ; } } catch (err) { _d = !0, _e = err; } finally { try { if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return; } finally { if (_d) throw _e; } } return _arr; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n/**\n * @param {any} value \n * @param {Array<[string|symbol, string]>} props \n * @param {Array<string>} types\n */\nfunction isObjectWith(value) {\n  var isObj = _typeof(value) === \"object\" && value !== null;\n  for (var _len = arguments.length, props = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    props[_key - 1] = arguments[_key];\n  }\n  return isObj && props.every(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n      p = _ref2[0],\n      t = _ref2[1];\n    return p in value && _typeof(value[p]) === t;\n  });\n}\nfunction isEmptyDict(obj) {\n  try {\n    var str = JSON.stringify(obj);\n    return str === \"{}\" || str === \"[]\";\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Checks if the input value is a dict `object`, which includes key-value pairs.\n * @returns {value is { [x: string | symbol]: any; }}\n */\nfunction isDictLike(value) {\n  return _typeof(value) === \"object\" && value !== null && (value.constructor === Object || !(value instanceof Date) && !(value instanceof RegExp) && !isArrayLike(value, true) && !isObjectIdLike(value) && !isEmptyDict(value) && !isTypedArrayLike(value) && !isCollectionLike(value) && !isPromiseLike(value));\n}\n\n/**\n * Checks if the input value is an `object` with `length` property or a string.\n * @returns {value is ArrayLike<any>}\n */\nfunction isArrayLike(value) {\n  var strict = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  if (Array.isArray(value)) {\n    return true;\n  } else if (!strict) {\n    return isObjectWith(value, [\"length\", \"number\"]) || typeof value === \"string\";\n  } else if (isObjectWith(value, [\"length\", \"number\"])) {\n    var keys = Object.keys(value);\n    var isNonEnumLength = !keys.includes(\"length\");\n    var indexes;\n    if (value.length === 0 || (indexes = keys.map(Number).filter(isFinite)).length === 0) {\n      return isNonEnumLength;\n    } else {\n      var hasIterator = typeof value[Symbol.iterator] === \"function\";\n      for (var i = value.length; i--;) {\n        if (!indexes.includes(i) && !(isNonEnumLength || hasIterator)) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Checks if the input value is an `object` with `size` property and\n * `[Symbol.iterator]()` method, or is an instance of **WeakMap** or\n * **WeakSet** if `excludeWeakOnes` is not set.\n */\nfunction isCollectionLike(value) {\n  var excludeWeakOnes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return isObjectWith(value, [\"size\", \"number\"], [Symbol.iterator, \"function\"]) || !excludeWeakOnes && (value instanceof WeakMap || value instanceof WeakSet);\n}\n\n/**\n * \n * @returns {value is ArrayLike<number> & Pick<Uint8Array, \"byteLength\" | \"slice\">}\n */\nfunction isTypedArrayLike(value) {\n  return isObjectWith(value, [\"byteLength\", \"number\"], [\"slice\", \"function\"]);\n}\n\n/** @deprecated An alias of `isTypedArrayLike`. */\nvar isBufferLike = isTypedArrayLike;\n\n/**\n * Checks if the input value is an `object` with `name`, `message` and `stack`\n * properties.\n * @returns {value is Error}\n */\nexports.isBufferLike = isBufferLike;\nfunction isErrorLike(value) {\n  return isObjectWith(value, [\"name\", \"string\"], [\"message\", \"string\"], [\"stack\", \"string\"]);\n}\n\n/**\n * Checks if the input is an `object` with `then()` method.\n * @returns {value is PromiseLike<any>}\n */\nfunction isPromiseLike(value) {\n  return isObjectWith(value, [\"then\", \"function\"]);\n}\nfunction isObjectIdLike(value) {\n  return _typeof(value) === \"object\" && value !== null && (value.constructor.name === \"ObjectId\" || value.constructor.name === \"ObjectID\");\n}\n","import { isArrayLike, isBufferLike, isCollectionLike } from \"is-like\";\n\nconst encoder = new TextEncoder();\n\nexport default count;\n\n/** Counts the length of a string. */\nfunction count(str: string, byteLength?: boolean): number;\n/** Counts how many times a substring appeared in the given string. */\nfunction count(str: string, substr: string): number;\n/** Counts the length of an array-like object. */\nfunction count<T>(arr: ArrayLike<T>): number;\n/** Counts how many times an element appeared in the given array-like object. */\nfunction count<T>(arr: ArrayLike<T>, ele: T): number;\n/** Counts the size of a collection. */\nfunction count(collection: Map<any, any> | Set<any>): number;\n/** Counts the capacity of an object (of how many properties it has). */\nfunction count(obj: any): number;\nfunction count(target: any, option: any = void 0) {\n    if (typeof target === \"string\") {\n        if (typeof option === \"string\") {\n            if (!option) {\n                return target.length + 1;\n            } else if (!target) {\n                return 0;\n            }\n\n            return target.split(option).length - 1;\n        } else if (option === true) {\n            if (typeof Buffer === \"function\" &&\n                typeof Buffer.byteLength === \"function\"\n            ) {\n                return Buffer.byteLength(target);\n            } else {\n                return encoder.encode(target).byteLength;\n            }\n        } else {\n            return target.length;\n        }\n    } else if (isArrayLike(target, true)) {\n        if (arguments.length === 2) {\n            let times = 0;\n\n            for (let i = target.length; i--;) {\n                // treat 0 equals -0 and NaN equals NaN\n                if (target[i] === option || Object.is(target[i], option)) {\n                    times++;\n                }\n            }\n\n            return times;\n        } else {\n            return target.length;\n        }\n    } else if (isBufferLike(target)) {\n        return target.byteLength;\n    } else if (isCollectionLike(target, true)) {\n        return target.size;\n    } else {\n        return Object.keys(target).length;\n    }\n}\n","import typeOf from './typeOf';\n\n/**\n * Sets a property on the target object.\n * @param value Normally this is the value bound to the property, however, it\n *  could be used to set the getter and the setter using the signature\n *  `{ get: Function, set?: Function }`.\n * @param enumerable By default, the property is non-enumerable and can't be\n *  seen by the console, use this option to make it enumerable and visible to\n *  the console.\n * @param writable By default, the property is readonly once set, use this\n *  option to allow it being writable.\n *  **This property doesn't work with setter.**\n */\nexport default function define(\n    obj: any,\n    prop: string | symbol,\n    value: any,\n    enumerable = false,\n    writable = false,\n): void {\n    if ((typeOf(value) as any) === Object) {\n        if (isGetter(value) || isGetterAndSetter(value)) {\n            Object.defineProperty(obj, prop, {\n                configurable: true,\n                enumerable,\n                ...value\n            });\n            return;\n        }\n    }\n\n    Object.defineProperty(obj, <string | symbol>prop, {\n        configurable: true,\n        enumerable,\n        writable,\n        value\n    });\n}\n\nfunction isGetter(obj: any) {\n    return String(Object.keys(obj)) === \"get\"\n        && typeof obj[\"get\"] === \"function\";\n}\n\nfunction isGetterAndSetter(obj: any) {\n    let sign = String(Object.keys(obj));\n    return (sign === \"get,set\" || sign === \"set,get\")\n        && typeof obj[\"get\"] === \"function\"\n        && typeof obj[\"set\"] === \"function\";\n}\n","import { isDictLike } from \"is-like\";\nimport isEmpty from './isEmpty';\nimport isVoid from './isVoid';\n\n\n/**\n * Creates an array that contains the difference set between `origin` and\n * `input`;\n */\nexport default function diff<T>(origin: T[], input: T[]): T[];\n/**\n * Evaluates the differences between `origin` and `input`, if a property exists\n * in both objects and the values are not equal, the `input` one will be taken.\n * \n * NOTE: This function treats all void values equal and will not differ them.\n */\nexport default function diff<T, U>(origin: T, input: U): Diff<T, U>;\nexport default function diff<T, U>(origin: T, input: U, deep: true): DeepPartial<T & U>;\nexport default function diff(origin: any, input: any, deep = false) {\n    if (Array.isArray(origin) && Array.isArray(input)) {\n        return [\n            ...input.filter(value => !origin.includes(value)),\n            ...origin.filter(value => !input.includes(value))\n        ];\n    } else if (isDictLike(origin) && isDictLike(input)) {\n        let keys = Reflect.ownKeys(input);\n        let _keys = Reflect.ownKeys(origin);\n        let result: any = {};\n\n        keys.forEach(key => {\n            if (origin[key] !== input[key] &&\n                !(isVoid(origin[key]) && isVoid(input[key])) // ignore void values\n            ) {\n                if (deep &&\n                    typeof origin[key] === \"object\" && origin[key] !== null &&\n                    typeof input[key] === \"object\" && input[key] !== null\n                ) {\n                    let _result = diff(origin[key], input[key], deep);\n\n                    if (!isEmpty(_result)) {\n                        result[key] = _result;\n                    }\n                } else {\n                    result[key] = input[key];\n                }\n            }\n        });\n\n        _keys.forEach(key => {\n            keys.includes(key) || (result[key] = origin[key]);\n        });\n\n        return result;\n    } else {\n        return input;\n    }\n}\n","import { isArrayLike, isDictLike } from \"is-like\";\nimport { isBetween } from \"@ayonli/jsext/number\";\n\nconst truePattern = /^\\s*(true|yes|on)\\s*$/i;\nconst falsePattern = /^\\s*(false|no|off)\\s*$/i;\nconst nullPattern = /^\\s*(null|nil|none|void|undefined)\\s*$/i;\nconst nanPattern = /^\\s*NaN\\s*$/;\nconst infinityPattern = /^\\s*-?Infinity\\s*/;\nconst regexPattern = /^\\s*\\/(.+)\\/([gimuys]*)\\s*$/;\nconst numberInterval: [number, number] = [\n    Number.MIN_SAFE_INTEGER,\n    Number.MAX_SAFE_INTEGER\n];\n\n/**\n * Casts the target object or its contents to the closest types automatically.\n * This function is useful when reading config from a file or fetching data from\n * the web.\n */\nexport default function ensureType(target: any): any {\n    switch (typeof target) {\n        case \"string\": {\n            let re: RegExpMatchArray | null;\n\n            if (truePattern.test(target)) {\n                return true;\n            } else if (falsePattern.test(target)) {\n                return false;\n            } else if (nullPattern.test(target)) {\n                return null;\n            } else if (nanPattern.test(target)) {\n                return NaN;\n            } else if (infinityPattern.test(target)) {\n                return Number(target);\n            } else if (re = target.match(regexPattern)) {\n                return new RegExp(re[1] as string, re[2]);\n            } else {\n                let num = Number(target);\n\n                if (!isNaN(num) &&\n                    isBetween(num, numberInterval) &&\n                    target[0] !== \"+\" // Most likely a telephone number.\n                ) {\n                    return num;\n                } else {\n                    return target;\n                }\n            }\n        }\n\n        case \"object\": {\n            if (target === null) {\n                return null;\n            } else if (isArrayLike(target, true)) {\n                return ensureArray(target).map(ensureType);\n            } else if (isDictLike(target)) {\n                return Reflect.ownKeys(target).reduce((result, key) => {\n                    result[key] = ensureType(target[key]);\n                    return result;\n                }, <Record<string | symbol, any>>{});\n            } else {\n                return target;\n            }\n        }\n\n        default:\n            return target;\n    }\n}\n\nexport function ensureArray<T>(value: ArrayLike<T>): T[] {\n    return Array.isArray(value) ? value : Array.from(value);\n}\n","import isVoid from './isVoid';\nimport type { Constructor, TypedArray } from \"@ayonli/jsext\";\nimport { isDictLike, isArrayLike, isBufferLike } from 'is-like';\n\ntype OmitChildrenNodes<T> = Pick<T, {\n    [K in keyof T]: T[K] extends TypedArray\n    ? K\n    : T[K] extends (any[] | ArrayLike<any> | Function | Constructor<any> | Map<any, any> | Set<any> | Promise<any> | TypedArray)\n    ? K\n    : T[K] extends object\n    ? never\n    : K;\n}[keyof T]>;\n\ntype OmitChildrenElements<T> = Pick<T, {\n    [K in keyof T]: T[K] extends TypedArray\n    ? K\n    : T[K] extends (Function | Constructor<any> | Map<any, any> | Set<any> | Promise<any> | TypedArray)\n    ? K\n    : T[K] extends (object | any[] | ArrayLike<any>)\n    ? never\n    : K;\n}[keyof T]>;\n\n/**\n * Create an object with flatted properties of the original object, the children\n * nodes' properties will be transformed to a string-represented path.\n * NOTE: this function also flat array/array-like nodes (except for TypedArray).\n * @param depth Default value: `1`.\n * @example\n *  flatObject({ foo: { bar: \"Hello, World!\" } }) === { \"foo.bar\": \"Hello, World!\" }\n */\nexport default function flatObject<T extends object>(\n    obj: T,\n    depth?: number\n): OmitChildrenNodes<T> & Record<string | symbol, any>;\nexport default function flatObject<T extends object>(\n    obj: T,\n    depth: number,\n    flatArray: true\n): OmitChildrenElements<T> & Record<string | symbol, any>;\nexport default function flatObject(obj: any, depth = 1, flatArray = false) {\n    return flatDeep({}, obj, \"\", 0, depth, flatArray);\n}\n\nfunction flatDeep(\n    carrier: any,\n    source: any,\n    field: string,\n    depth: number,\n    maxDepth: number,\n    flatArray: boolean\n) {\n    let isArr: boolean | undefined;\n    let isDict: boolean | undefined;\n    let isContent = !isVoid(field) && field !== \"\";\n\n    if (depth === maxDepth || (\n        !(isArr = isArrayLike(source, true) && !isBufferLike(source)) &&\n        !(isDict = isDictLike(source))\n    )) {\n        carrier[field] = source;\n    } else if (isDict) {\n        Reflect.ownKeys(<object>source).forEach(key => {\n            let value = (<any>source)[key];\n\n            if (typeof key === \"symbol\") {\n                if (depth === 0) { // only allow top-level symbol properties\n                    carrier[key] = value;\n                }\n            } else {\n                flatDeep(\n                    carrier,\n                    value,\n                    isContent ? `${field}.${key}` : key,\n                    isContent ? depth + 1 : depth,\n                    maxDepth,\n                    flatArray\n                );\n            }\n        });\n    } else if (isArr) {\n        if (flatArray) {\n            for (let i = 0, len = (<any[]>source).length; i < len; ++i) {\n                flatDeep(\n                    carrier,\n                    (<any[]>source)[i],\n                    isContent ? `${field}.${i}` : String(i),\n                    isContent ? depth + 1 : depth,\n                    maxDepth,\n                    flatArray\n                );\n            }\n        } else {\n            carrier[field] = source;\n        }\n    }\n\n    return carrier;\n}\n","import type { Ensured } from \"@ayonli/jsext\";\n\nexport type Global = Ensured<Partial<Window & typeof globalThis>, keyof Window & typeof globalThis>;\n\n/** Gets the global object of the host environment. */\nexport default function getGlobal(): Global;\n/** Returns a property from the global object. */\nexport default function getGlobal<P extends keyof Global>(prop: P): Global[P];\n/** Returns a property from the global object. */\nexport default function getGlobal(prop: string): any;\nexport default function getGlobal(prop: string | undefined = void 0): any {\n    let _global: Global & { [prop: string]: any; } | undefined;\n\n    if (typeof globalThis === \"object\") {\n        _global = <any>globalThis;\n    } else if (typeof self === \"object\") {\n        _global = self;\n    } else if (typeof global === \"object\") {\n        _global = <any>global;\n    } else if (typeof window === \"object\") {\n        _global = window;\n    }\n\n    return _global && (prop ? _global[prop] : _global);\n}\n","import { isBetween as _isBetween } from \"@ayonli/jsext/number\";\n\n/** @deprecated use `Number.isBetween` from `@ayonli/jsext/number/augment` instead. */\nconst isBetween = _isBetween;\nexport default isBetween;\n","import { isArrayLike, isBufferLike, isCollectionLike } from \"is-like\";\n\nconst BaseEmptyPrimitives: any[] = [\"\", NaN, null, void 0];\nconst EmptyPrimitives: any[] = [...BaseEmptyPrimitives, 0, false];\n\nif (typeof BigInt === \"function\")\n    EmptyPrimitives.push(BigInt(\"0\"));\n\n/**\n * Checks if the value resolves to an empty object or a falsy value.\n */\nexport default function isEmpty(value: any, deep = false): boolean {\n    return test(value, Boolean(deep), EmptyPrimitives);\n}\n\nfunction test(\n    value: any,\n    deep: boolean,\n    emptyPrimitives: any[]\n): boolean {\n    if (emptyPrimitives.includes(value))\n        return true;\n\n    if (typeof value === \"object\") {\n        if (value instanceof RegExp) {\n            return false;\n        } else if (value instanceof Date) {\n            return String(value) === \"Invalid Date\";\n        } else if (value instanceof Error) {\n            return value.message.length === 0;\n        } else if (isBufferLike(value)) {\n            return value.byteLength === 0;\n        } else if (isArrayLike(value, true)) {\n            if (value.length === 0) {\n                return true;\n            } else if (!deep) {\n                return false;\n            } else {\n                for (let i = 0, len = value.length; i < len; ++i) {\n                    if (!test(value[i], deep, BaseEmptyPrimitives)) {\n                        return false;\n                    }\n                }\n\n                return true;\n            }\n        } else if (isCollectionLike(value, true)) {\n            if (value.size === 0) {\n                return true;\n            } else if (!deep) {\n                return false;\n            } else {\n                if (value instanceof Map) {\n                    for (let v of value.values()) {\n                        if (!test(v, deep, BaseEmptyPrimitives)) {\n                            return false;\n                        }\n                    }\n\n                    return true;\n                } else if (value instanceof Set) {\n                    for (let v of value) {\n                        if (!test(v, deep, BaseEmptyPrimitives)) {\n                            return false;\n                        }\n                    }\n\n                    return true;\n                }\n\n                return false;\n            }\n        } else {\n            let keys = Reflect.ownKeys(value);\n\n            if (keys.length === 0) {\n                return true;\n            } else if (!deep) {\n                return false;\n            } else {\n                return keys.every(\n                    k => test(value[k], deep, BaseEmptyPrimitives)\n                );\n            }\n        }\n    }\n\n    return false;\n}\n","import { isFloat as _isFloat } from \"@ayonli/jsext/number\";\n\n/** @deprecated use `Number.isFloat` from `@ayonli/jsext/number/augment` instead. */\nconst isFloat = _isFloat as (value: any) => value is number;\nexport default isFloat;\n","/**\n * Checks if the value is an integer number (or bigint).\n * \n * @deprecated use `Number.isInteger` instead.\n */\nexport default function isInteger(value: any): value is (number | bigint) {\n    return typeof value === \"bigint\" || Number.isInteger(value);\n}\n","import { isNumeric as _isNumeric } from \"@ayonli/jsext/number\";\n\n/** @deprecated use `Number.isNumeric` from `@ayonli/jsext/number/augment` instead. */\nconst isNumeric = _isNumeric;\nexport default isNumeric;\n","import { hasOwn } from \"@ayonli/jsext/object\";\n\n/** @deprecated use `Object.hasOwn` from `@ayonli/jsext/object/augment` instead. */\nconst isOwnKey = hasOwn;\nexport default isOwnKey;\n","import { hasOwnMethod } from \"@ayonli/jsext/object\";\n\n/** @deprecated use `Object.hasOwnMethod` from `@ayonli/jsext/object/augment` instead. */\nconst isOwnMethod = hasOwnMethod;\nexport default isOwnMethod;\n","import jsext from \"@ayonli/jsext\";\n\n/** @deprecated use `jsext.jsSubclassOf` from `@ayonli/jsext` instead. */\nconst isSubClassOf = jsext.isSubclassOf;\nexport default isSubClassOf;\n","/**\n * Checks if a value is resolved to void (`null`, `undefined` or `NaN`).\n * \n * @deprecated use `!Object.isValid` from `@ayonli/jsext/object/augment` instead.\n */\nexport default function isVoid(value: any): value is void {\n    return value === null || value === undefined || Object.is(value, NaN);\n}\n","/** Returns the indexes of the given array. */\nexport default function keysOf<T extends any[]>(arr: T): number[];\n/** Returns an array of the given function's own properties. */\nexport default function keysOf<T extends Function>(fn: T): (string | symbol)[];\n/** Returns an array of the given object's own properties. */\nexport default function keysOf<T extends object>(obj: T): (keyof T | symbol)[];\nexport default function keysOf(obj: object): (string | number | symbol)[] {\n    if (Array.isArray(obj)) {\n        return obj.map((_, i) => i);\n    } else {\n        return Reflect.ownKeys(obj);\n    }\n}\n","import { omit as _omit } from \"@ayonli/jsext/object\";\n\n/** Creates an array composed without the picked items. */\nexport default function omit<T extends any>(arr: T[], items: T[]): T[];\n/**\n * Creates an object composed without the picked properties.\n * NOTE: this function will collect both the own keys and the enumerable\n * properties from the prototype chain.\n * \n * @deprecated use `Object.omit` from `@ayonli/jsext/object/augment` instead.\n */\nexport default function omit<T extends object, U extends keyof T>(obj: T, props: U[]): Omit<T, U>;\n/**\n * @deprecated use `Object.omit` from `@ayonli/jsext/object/augment` instead.\n */\nexport default function omit<T>(obj: T, props: (string | symbol)[]): Partial<T>;\nexport default function omit(obj: any, props: (string | number | symbol)[]) {\n    if (Array.isArray(obj)) {\n        return obj.filter(i => !props.includes(i));\n    } else {\n        return _omit(obj, props);\n    }\n}\n","import isEmpty from \"./isEmpty\";\nimport { isArrayLike, isBufferLike } from 'is-like';\nimport { isValid } from \"@ayonli/jsext/object\";\n\n/**\n * Creates an object composed with only the non-void properties.\n * @param omitEmptyObjects If set, empty properties of type `object` will be\n *  removed as well.\n * @param omitEmptyStrings If set, empty properties of type `string` will be\n *  removed as well.\n */\nexport default function omitVoid<T>(\n    target: T,\n    deep = false,\n    omitEmptyObjects = false,\n    omitEmptyStrings = false\n): T {\n    return doOmit(target, deep, omitEmptyObjects, omitEmptyStrings, 0) as T;\n}\n\nexport function doOmit<T extends any>(\n    target: T,\n    deep: boolean,\n    omitEmptyObjects: boolean,\n    omitEmptyStrings: boolean,\n    depth: number\n): T | undefined {\n    if (typeof target === \"string\") {\n        return omitEmptyStrings && target.trim() === \"\"\n            ? (depth > 0 ? void 0 : \"\" as T)\n            : target;\n    } else if (target === null\n        || typeof target !== \"object\"\n        || target instanceof Date\n        || target instanceof Error\n        || target instanceof RegExp\n        || isBufferLike(target)\n    ) {\n        return target;\n    } else if (omitEmptyObjects && isEmpty(target)) {\n        return depth > 0 ? void 0 : (isArrayLike(target, true) ? [] : {}) as any;\n    }\n\n    if (isArrayLike(target, true)) {\n        let arr: any[] = [];\n\n        for (let i = 0, len = (<ArrayLike<any>>target).length; i < len; ++i) {\n            let value = target[i];\n\n            if (isValid(value)) {\n                if (deep) {\n                    value = doOmit(\n                        value,\n                        deep,\n                        omitEmptyObjects,\n                        omitEmptyStrings,\n                        depth + 1);\n                    !isValid(value) || arr.push(value);\n                } else {\n                    arr.push(value);\n                }\n            }\n        }\n\n        if (depth > 0 && omitEmptyObjects && isEmpty(arr)) {\n            return void 0;\n        } else {\n            return arr as any;\n        }\n    } else {\n        let obj = Reflect.ownKeys(target as object).reduce((obj, key) => {\n            let value = (target as any)[key];\n\n            if (isValid(value)) {\n                if (deep) {\n                    value = doOmit(\n                        value,\n                        deep,\n                        omitEmptyObjects,\n                        omitEmptyStrings,\n                        depth + 1);\n                    !isValid(value) || ((obj as any)[key] = value);\n                } else {\n                    (obj as any)[key] = value;\n                }\n            }\n\n            return obj;\n        }, <T>{});\n\n        if (depth > 0 && omitEmptyObjects && isEmpty(obj)) {\n            return void 0;\n        } else {\n            return obj;\n        }\n    }\n}\n","import { isDictLike } from 'is-like';\nimport { isValid } from \"@ayonli/jsext/object\";\nimport isEmpty from './isEmpty';\n\n\n/**\n * Patches the differences onto the `origin` object from the `input` object. If\n * a property exists in both objects and the values are not equal, the `input`\n * one will be taken. However, those properties that are only presents in the\n * `origin` object will remain untouched.\n * \n * NOTE: This function mutates the `origin` object and returns the patched\n * differences, when patching, any void value in the `input` object will be\n * ignored.\n * \n * This function is very useful, for example, a client issued a patch of the\n * resource and the server wants to know what properties has been modified by\n * this update so that it can perform some extra operations to provide a better\n * user experience.\n */\nexport default function patch<T, U>(\n    origin: T,\n    input: U,\n    deep = false,\n    ignoreEmptyStrings = false,\n): T & Partial<U> {\n    return doPatch(origin, input, deep, ignoreEmptyStrings, false);\n}\n\nfunction doPatch(\n    origin: any,\n    input: any,\n    deep: boolean,\n    ignoreEmptyStrings: boolean,\n    isChildNode: boolean\n) {\n    if (isDictLike(origin) && isDictLike(input)) {\n        let keys = Reflect.ownKeys(input);\n        let result: any = {};\n\n        keys.forEach(key => {\n            if (origin[key] !== input[key] &&\n                isValid(input[key]) && // ignore invalid values\n                (!ignoreEmptyStrings || input[key] !== \"\")\n            ) {\n                if (deep && isDictLike(origin[key]) && isDictLike(input[key])) {\n                    let _result = doPatch(\n                        origin[key],\n                        input[key],\n                        deep,\n                        ignoreEmptyStrings,\n                        true\n                    );\n\n                    if (!isEmpty(_result)) {\n                        result[key] = _result;\n                        Object.assign(origin[key], input[key]);\n                    }\n                } else {\n                    result[key] = origin[key] = input[key];\n                }\n            }\n        });\n\n        return result;\n    } else if (isChildNode) {\n        return input;\n    } else {\n        return {};\n    }\n}\n","import { pick as _pick } from \"@ayonli/jsext/object\";\n\n/** Creates an array composed of the picked elements. */\nexport default function pick<T extends any[]>(arr: T, indexes: number[]): T;\n/**\n * Creates an object composed of the picked properties.\n * \n * @deprecated use `Object.pick` from `@ayonli/jsext/object/augment` instead.\n */\nexport default function pick<T extends object, U extends keyof T>(obj: T, props: U[]): Pick<T, U>;\n/**\n * @deprecated use `Object.pick` from `@ayonli/jsext/object/augment` instead.\n */\nexport default function pick<T>(obj: T, props: (string | symbol)[]): Partial<T>;\nexport default function pick(obj: any, props: (string | number | symbol)[]) {\n    if (Array.isArray(obj)) {\n        return (<number[]>props).map(i => obj[i]);\n    } else {\n        return _pick(obj, props);\n    }\n}\n","import { random } from \"@ayonli/jsext/number\";\n\n/** @deprecated use `Number.random` from `@ayonli/jsext/number/augment` instead. */\nconst rand = random;\nexport default rand;\n","import rand from './rand';\n\n/** \n * Generates a random string.\n * @param chars The possible characters.\n * @deprecated use `String.random` from `@ayonli/jsext/string/augment` instead.\n */\nexport default function randStr(\n    length: number,\n    chars = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n) {\n    let str = \"\";\n    let max = chars.length - 1;\n\n    while (0 < length--) {\n        str += chars[rand(0, max)];\n    }\n\n    return str;\n}\n","import { sleep as _sleep } from \"@ayonli/jsext/promise\";\n\n/** @deprecated use `Promise.sleep` from `@ayonli/jsext/promise/augment` instead. */\nconst sleep = _sleep;\nexport default sleep;\n","import { isArrayLike, isDictLike } from 'is-like';\nimport { ensureArray } from \"./ensureType\";\n\ndeclare var Deno: any;\n\n/**\n * Creates a new array with sorted elements of the original array, the sorted\n * array is in ascending order by default, unless providing a `compare` function\n * to determine how should the elements be ordered.\n * Unlike `Array.prototype.sort()`, this function always guarantees a stable\n * sort; and if all elements are numbers, they're sorted by their values instead\n * of converting to strings for sorting.\n */\nexport default function sort<T>(arr: ArrayLike<T>, compare?: (a: T, b: T) => number): T[];\n/**\n * Creates a new object with sorted keys (in ascending order) of the original\n * object, if `deep` is set, the children nodes will be sorted as well.\n * Note: symbol keys are not sorted and remain their original order.\n */\nexport default function sort<T extends object>(obj: T, deep?: boolean): T;\nexport default function sort(\n    target: any | any[],\n    method: ((a: any, b: any) => number) | boolean | undefined = void 0\n) {\n    if (isArrayLike(target, true)) {\n        let arr = ensureArray(target);\n        let compare = <(a: any, b: any) => number>method;\n\n        // If the compare function is omitted and all the elements are numbers\n        // (or of bigint), sort them by their values.\n        if (!compare && (onlyNumbers(arr) || onlyNumbers(arr, \"bigint\"))) {\n            compare = (a: number, b: number) => a - b;\n        }\n\n        if (shouldUseNativeSort(arr)) {\n            return arr.sort(compare);\n        }\n\n        // Emulate stable sort.\n        // Reference: http://blog.vjeux.com/2010/javascript/javascript-sorting-table.html\n        return arr\n            .map((value, index) => ({ value, index }))\n            .sort((a, b) => compare(a.value, b.value) || a.index - b.index)\n            .map(({ value }) => value);\n    } else if (isDictLike(target)) {\n        let deep = Boolean(method);\n        let keys = [\n            ...sort(Object.getOwnPropertyNames(target)), // sort the string keys\n            ...Object.getOwnPropertySymbols(target)\n        ];\n\n        return keys.reduce((result, key) => {\n            let value = target[key];\n\n            if (deep) {\n                if (isArrayLike(value, true)) {\n                    value = ensureArray(value).map(item => {\n                        return isDictLike(item) ? sort(item, deep) : item;\n                    });\n                } else if (isDictLike(value)) {\n                    value = sort(value, deep);\n                }\n            }\n\n            result[key] = value;\n            return result;\n        }, {} as any);\n    } else {\n        if (typeof method === \"function\") {\n            throw new TypeError(\"The target to sort is not an array\");\n        } else if (typeof method === \"boolean\") {\n            throw new TypeError(\"The target to sort is not a pure object\");\n        } else {\n            throw new TypeError(\n                \"The target to sort is not an array or a pure object\"\n            );\n        }\n    }\n}\n\nfunction onlyNumbers(arr: any[], type: \"number\" | \"bigint\" = \"number\") {\n    return arr.every(ele => typeof ele === type);\n}\n\nfunction shouldUseNativeSort(arr: any[]) {\n    if (typeof process === \"object\" && typeof process.versions === \"object\") {\n        return arr.length <= 10\n            || parseFloat(process.versions.v8 || \"0\") >= 7.0;\n    } else if (typeof Deno === \"object\") {\n        return true;\n    } else if (typeof navigator === \"object\"\n        && typeof navigator.userAgent === \"string\"\n    ) {\n        let match = navigator.userAgent.match(\n            /(Chrome|Firefox|Safari|Edge|OPR)\\/(\\d+)/\n        );\n\n        if (match) {\n            let name = match[1];\n            let version = parseFloat(match[2] as string);\n\n            if ((name === \"Edge\" && arr.length <= 512) ||\n                (name === \"Chrome\" && (version >= 70) || arr.length <= 10) ||\n                (name === \"Firefox\" && version >= 3) ||\n                (name === \"Safari\" && version >= 10.1) ||\n                (name === \"OPR\" && version >= 54)\n            ) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n","import { isArrayLike, isBufferLike, isCollectionLike } from \"is-like\";\nimport type { RealArrayLike } from \"@ayonli/jsext/array\";\nimport type { TypedArray } from \"@ayonli/jsext\";\n\nfunction checkNumberArgument(name: string, value: any) {\n    if (typeof value !== \"number\") {\n        throw new TypeError(`argument '${name}' must be a number`);\n    } else if (value < 1) {\n        throw new RangeError(`argument '${name}' must be 1 or higher`);\n    }\n}\n\nfunction splitArrayLike(arr: ArrayLike<any>, length: number, total: number | undefined = void 0) {\n    let result: any[] = [];\n\n    for (let i = 0, j = (total || arr.length); i < j; i += length) {\n        if (typeof (arr as RealArrayLike<any>).slice === \"function\") {\n            result.push((arr as RealArrayLike<any>).slice(i, i + length));\n        } else {\n            result.push(Array.prototype.slice.call(arr, i, i + length));\n        }\n    }\n\n    return result;\n}\n\nfunction splitBuffer(buf: Buffer, sep: string | Buffer) {\n    let result: Buffer[] = [];\n    let offset = 0;\n    let length = sep.length;\n    let total = buf.byteLength;\n\n    while (offset < total) {\n        let index = buf.indexOf(sep, offset);\n\n        if (index !== -1) {\n            result.push(buf.slice(offset, index));\n            offset = index + length;\n        } else {\n            result.push(buf.slice(offset));\n            offset = total;\n        }\n    }\n\n    return result;\n}\n\nfunction splitObject(obj: any, size: number) {\n    let proto = Object.getPrototypeOf(obj);\n    let keyChunks = splitArrayLike(Object.keys(obj), size);\n    let result = [];\n\n    for (let keys of keyChunks) {\n        let chunk = Object.create(proto);\n        result.push(chunk);\n\n        for (let key of keys) {\n            chunk[key] = obj[key];\n        }\n    }\n\n    return result;\n}\n\nfunction splitNumber(num: number, step: number) {\n    let result: number[] = [];\n    let offset = 0;\n\n    while ((offset += step) <= num) {\n        result.push(offset);\n    }\n\n    if (num > offset - step) {\n        result.push(num);\n    }\n\n    return result;\n}\n\n/** Splits a string into chunks by the given separator. */\nexport default function split(str: string, separator: string | RegExp): string[];\n/** Splits a string into chunks with the given length. */\nexport default function split(str: string, length: number): string[];\n/** Splits a number into serials with the given step. */\nexport default function split(num: number, step: number): number[];\n/** Splits a Buffer into chunks by the given separator. */\nexport default function split<T extends Buffer>(buf: T, separator: string | Buffer): T[];\n/** Splits a Buffer, an ArrayBuffer, or a TypedArray into chunks with the given byteLength. */\nexport default function split<T extends Buffer | ArrayBufferLike | TypedArray>(buf: T, byteLength: number): T[];\n/** Splits an array into chunks of arrays with the given length. */\nexport default function split<T extends Array<any>>(arr: T, length: number): T[];\n/** Splits an array-like object into chunks of arrays with the given length. */\nexport default function split<T>(list: ArrayLike<T>, length: number): T[][];\n/** Splits a collection into chunks with the given size. */\nexport default function split<T extends Set<any> | Map<any, any>>(collection: T, size: number): T[];\n/** Splits an object into multiple objects with partial properties. */\nexport default function split<T extends object>(obj: T extends Function ? never : T, size: number): Partial<T>[];\nexport default function split(obj: any, sep: any) {\n    if (arguments.length < 2) {\n        throw new SyntaxError(`2 arguments required, received ${arguments.length}`);\n    } else if (typeof obj === \"string\") {\n        if (typeof sep === \"string\" || sep instanceof RegExp) {\n            return obj.split(sep);\n        } else {\n            checkNumberArgument(\"length\", sep);\n            return splitArrayLike(obj, sep);\n        }\n    } else if (typeof obj === \"number\") {\n        checkNumberArgument(\"step\", sep);\n        return splitNumber(obj, sep);\n    } else if (typeof Buffer === \"function\"\n        && Buffer.isBuffer(obj)\n        && (typeof sep === \"string\" || Buffer.isBuffer(sep))\n    ) {\n        return splitBuffer(obj, sep);\n    } else if (isBufferLike(obj)) {\n        checkNumberArgument(\"byteLength\", sep);\n        return splitArrayLike(obj, sep, obj.byteLength);\n    } else if (isArrayLike(obj, true)) {\n        checkNumberArgument(\"length\", sep);\n        return splitArrayLike(obj, sep);\n    } else if (isCollectionLike(obj)) {\n        let ctor = obj[\"constructor\"];\n        checkNumberArgument(\"size\", sep);\n        return splitArrayLike([...obj], sep).map(list => new ctor(list));\n    } else if (typeof obj === \"object\" && obj !== null) {\n        checkNumberArgument(\"size\", sep);\n        return splitObject(obj, sep);\n    } else {\n        throw new TypeError(\"argument 'obj' must be a string, a number or an object\");\n    }\n}\n","import { isValid } from \"@ayonli/jsext/object\";\nimport { isNumeric } from '@ayonli/jsext/number';\n\nexport default timestamp;\n\n/** Returns the current UNIX timestamp. */\nfunction timestamp(ms?: boolean): number;\n/**\n * Returns the UNIX timestamp according the input date or time.\n * \n * TIP: since v0.2.3, this function supports the date string format in\n * `<year>,<monthIndex>,[date],[hours],[minutes],[seconds],[milliseconds]`,\n * which segments is used as arguments for `Date` constructor.\n * \n * NOTE: if the input value is a number, it must be of milliseconds.\n */\nfunction timestamp(input: string | number | Date, ms?: boolean): number;\nfunction timestamp(input: any, ms = false) {\n    if (typeof input === \"boolean\") {\n        ms = input;\n        input = void 0;\n    }\n\n    input = input || new Date();\n\n    if (input instanceof Date) {\n        return ms ? input.valueOf() : Math.floor(input.valueOf() / 1000);\n    } else if (typeof input === \"number\") {\n        return ms ? input : Math.floor(input / 1000);\n    } else {\n        let date: Date;\n        let dateTime = String(input).trim();\n\n        if (dateTime.includes(\",\") && dateTime.split(\",\").every(isNumeric)) {\n            date = parseDateRawArgs(dateTime);\n        } else {\n            let match: RegExpMatchArray | null = null;\n\n            if (match = dateTime.match(/^(\\d{1,2}):\\d{2}(:\\d{2})?/)) { // time only\n                if (match[1].length !== 2) {\n                    dateTime = \"0\" + dateTime;\n                }\n\n                if (!match[2]) {\n                    dateTime += \":00\";\n                }\n\n                date = new Date();\n                dateTime = date.getFullYear()\n                    + \"-\" + String(date.getMonth() + 1).padStart(2, \"0\")\n                    + \"-\" + String(date.getDate()).padStart(2, \"0\")\n                    + \" \" + dateTime;\n            }\n\n            date = new Date(dateTime);\n        }\n\n        if (String(date) !== \"Invalid Date\") {\n            return ms ? date.valueOf() : Math.floor(date.valueOf() / 1000);\n        } else {\n            console.log(dateTime);\n            throw new Error(\"The input argument is not a valid date-time string\");\n        }\n    }\n}\n\nfunction parseDateRawArgs(str: string) {\n    let [Y, M, D, H, m, s, ms] = str.split(\",\").map(Number);\n    let date = new Date();\n\n    isValid(Y) && date.setFullYear(Y);\n    isValid(M) && date.setMonth(M);\n    isValid(D) && date.setDate(D);\n    isValid(H) && date.setHours(H);\n    isValid(m) && date.setMinutes(m);\n    isValid(s) && date.setSeconds(s);\n    isValid(ms) && date.setMilliseconds(ms);\n\n    return date;\n}\n","import { isArrayLike, isDictLike } from \"is-like\";\nimport { ensureArray } from \"./ensureType\";\n\n/**\n * Trims the leading and tailing spaces of a string, the string properties of\n * an object, or the string and object elements in an array.\n */\nexport default function trim<T extends any>(target: T, deep = false): T extends string ? string : T {\n    if (typeof target === \"string\") {\n        return target.trim() as any;\n    } else if (isArrayLike(target, true)) {\n        return ensureArray(target).map(item => trim(item, deep)) as any;\n    } else if (isDictLike(target)) {\n        const keys = [\n            ...Object.getOwnPropertyNames(target),\n            ...Object.getOwnPropertySymbols(target)\n        ];\n\n        return keys.reduce((result, key) => {\n            let value = target[key];\n\n            if (typeof value === \"string\") {\n                value = value.trim();\n            } else if (deep) {\n                if (isArrayLike(value, true)) {\n                    value = ensureArray(value).map(item => {\n                        return isDictLike(item) ? trim(item, deep) : item;\n                    });\n                } else if (isDictLike(value)) {\n                    value = trim(value, deep);\n                }\n            }\n\n            result[key] = value;\n            return result;\n        }, {} as any);\n    } else {\n        return target as any;\n    }\n}\n","import { as } from \"@ayonli/jsext/object\";\n\n/** @deprecated use `Object.as` from `@ayonli/jsext/object/augment` instead. */\nconst typeAs = as;\nexport default typeAs;\n","import isVoid from './isVoid';\nimport { couldBeClass as isClass } from \"could-be-class\";\nimport type { Constructor } from \"@ayonli/jsext\";\n\nexport type TypeNames = \"string\"\n    | \"number\"\n    | \"bigint\"\n    | \"boolean\"\n    | \"symbol\"\n    | \"function\"\n    | \"class\"\n    | \"arguments\"\n    | \"void\";\n\n/**\n * Returns a string representation or the constructor of the value's type.\n * NOTE: this function also returns `'void'` when testing `NaN`.\n */\nexport default function typeOf<T extends any>(\n    target: T\n): TypeNames | Constructor<T> {\n    if (arguments.length === 0)\n        throw new TypeError(\"1 argument is required, 0 given\");\n    else if (isVoid(target))\n        return \"void\";\n\n    let type = typeof target;\n\n    if (type === \"function\") {\n        if (isClass(<any>target)) {\n            return \"class\";\n        } else {\n            return \"function\";\n        }\n    } else if (type === \"object\") {\n        if (Object.prototype.toString.call(target) === \"[object Arguments]\") {\n            return \"arguments\";\n        } else {\n            return (<any>target).constructor || Object;\n        }\n    } else {\n        return <any>type;\n    }\n}\n","import { until as _until } from \"@ayonli/jsext/promise\";\n\n/** @deprecated use `Promise.until` from `@ayonli/jsext/promise/augment` instead. */\nconst until = _until;\nexport default until;\n","import isEmpty from './isEmpty';\n\n// @ts-ignore\nif (typeof setImmediate === \"undefined\") {\n    // compatible with browsers\n    var setImmediate = (cb: () => void) => setTimeout(cb, 0);\n}\n\nexport default useThrottle;\n\n/**\n * Uses throttle strategy on the given resource and returns a throttle function,\n * if a subsequent call happens within the `interval` time, the previous result\n * will be returned and the current `handle` function will not be invoked.\n * \n * If `backgroundUpdate` is set, when reaching the `interval` time, the `handle`\n * function will be called in background and updates the result the when it's\n * done, the current call and any calls before the update will return the\n * previous result instead.\n * \n * NOTE: this function only creates the throttle function once and uses\n * `interval` only once, any later calls on the same `resource` will return the\n * initial throttle function.\n * \n * @deprecated this implementation is too complicated and redundant, use\n *  `jsext.throttle` from `@ayonli/jsext` instead.\n */\nfunction useThrottle(resource: any, interval: number, backgroundUpdate = false) {\n    if (interval < 1) {\n        throw new RangeError(\n            \"The 'interval' time for throttle must not be smaller than 1\"\n        );\n    } else if (!useThrottle.gcTimer) {\n        let { gcInterval, tasks: jobs } = useThrottle;\n\n        useThrottle.gcTimer = setInterval(() => {\n            let now = Date.now();\n\n            jobs.forEach(({ interval, lastActive }, key) => {\n                if (now - lastActive > Math.max(interval + 5, gcInterval)) {\n                    jobs.delete(key);\n                }\n            });\n        }, gcInterval);\n\n        if (typeof useThrottle.gcTimer.unref === \"function\") {\n            useThrottle.gcTimer.unref();\n        }\n    }\n\n    let task = useThrottle.tasks.get(resource);\n\n    if (!task) {\n        useThrottle.tasks.set(\n            resource,\n            task = createThrottleTask(interval, backgroundUpdate)\n        );\n    }\n\n    return task.func as (<T, A extends any[]>(\n        handle: (...args: A) => T | Promise<T>,\n        ...args: A\n    ) => Promise<T>);\n}\n\nnamespace useThrottle {\n    export var gcInterval = 30000;\n    export let gcTimer: any = void 0;\n    export const tasks = new Map<any, ThrottleTask>();\n}\n\ntype ThrottleTask = {\n    interval: number;\n    lastActive: number;\n    cache: { value: any, error: any; } | undefined;\n    queue: Set<{ resolve: (value: any) => void, reject: (err: any) => void; }>;\n    func: (<T, A extends any[]>(\n        handle: (...args: A) => T | Promise<T>,\n        ...args: A\n    ) => Promise<T>) | undefined;\n    daemon?: any;\n};\n\nfunction createThrottleTask(\n    interval: number,\n    backgroundUpdate = false\n): ThrottleTask {\n    let task: ThrottleTask = {\n        interval,\n        lastActive: 0,\n        cache: void 0,\n        queue: new Set(),\n        func: void 0,\n        daemon: null,\n    };\n\n    async function throttle<T, A extends any[]>(\n        this: ThrottleTask,\n        handle: (...args: A) => T | Promise<T>,\n        ...args: A\n    ): Promise<T> {\n        if (backgroundUpdate && !this.daemon) {\n            this.daemon = setInterval(() => this.func?.(handle, ...args), interval);\n\n            if (typeof this.daemon.unref === \"function\") {\n                this.daemon.unref();\n            }\n        }\n\n        let now = Date.now();\n\n        if ((now - this.lastActive) >= interval) {\n            this.lastActive = now;\n\n            if (backgroundUpdate && this.cache) {\n                Promise.resolve(handle(...args)).then(result => {\n                    this.cache = { value: result, error: null };\n                }).catch(err => {\n                    this.cache = { value: void 0, error: err };\n                });\n\n                if (this.cache.error)\n                    throw this.cache.error;\n                else\n                    return this.cache.value as T;\n            } else {\n                // Clear cache before dispatching the new job.\n                this.cache = void 0;\n\n                let result: T | undefined;\n                let error: any;\n\n                try {\n                    result = await handle(...args);\n                    this.cache = { value: result, error: null };\n                } catch (err) {\n                    this.cache = { value: void 0, error: error = err };\n                }\n\n                // Resolve or reject subsequent jobs once the result is ready,\n                // and make the procedure asynchronous so that they will be\n                // performed after the current job.\n                setImmediate(() => {\n                    if (!isEmpty(this.queue)) {\n                        this.queue.forEach((job) => {\n                            error ? job.reject(error) : job.resolve(result);\n                            this.queue.delete(job);\n                        });\n                    }\n                });\n\n                if (error)\n                    throw error;\n                else\n                    return result as T;\n            }\n        } else if (this.cache) {\n            if (this.cache.error)\n                throw this.cache.error;\n            else\n                return this.cache.value as T;\n        } else {\n            return new Promise<T>((resolve, reject) => {\n                this.queue.add({ resolve, reject });\n            });\n        }\n    }\n\n    task.func = throttle.bind(task) as any;\n    return task;\n}\n","import jsext from \"@ayonli/jsext\";\n\n/** @deprecated use `jsext.wrap` from `@ayonli/jsext` instead. */\nconst wrap = jsext.wrap;\nexport default wrap;\n","module.exports = require(\"child_process\");","module.exports = require(\"events\");","module.exports = require(\"path\");","module.exports = require(\"url\");","module.exports = require(\"worker_threads\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import \"./types\";\nexport { default as count } from \"./count\";\nexport { default as define } from \"./define\";\nexport { default as diff } from \"./diff\";\nexport { default as ensureType } from \"./ensureType\";\nexport { default as flatObject } from \"./flatObject\";\nexport { default as getGlobal } from \"./getGlobal\";\nexport { default as isBetween } from \"./isBetween\";\nexport { default as isEmpty } from \"./isEmpty\";\nexport { default as isFloat } from \"./isFloat\";\nexport { default as isInteger } from \"./isInteger\";\nexport { default as isNumeric } from \"./isNumeric\";\nexport { default as isOwnKey } from \"./isOwnKey\";\nexport { default as isOwnMethod } from \"./isOwnMethod\";\nexport { default as isSubClassOf } from \"./isSubClassOf\";\nexport { default as isVoid } from \"./isVoid\";\nexport { default as keysOf } from \"./keysOf\";\nexport { default as omit } from \"./omit\";\nexport { default as omitVoid } from \"./omitVoid\";\nexport { default as patch } from \"./patch\";\nexport { default as pick } from \"./pick\";\nexport { default as rand } from \"./rand\";\nexport { default as randStr } from \"./randStr\";\nexport { default as sleep } from \"./sleep\";\nexport { default as sort } from \"./sort\";\nexport { default as split } from \"./split\";\nexport { default as timestamp } from \"./timestamp\";\nexport { default as trim } from \"./trim\";\nexport { default as typeAs } from \"./typeAs\";\nexport { default as typeOf } from \"./typeOf\";\nexport { default as until } from \"./until\";\nexport { default as useThrottle } from \"./useThrottle\";\nexport { default as wrap } from \"./wrap\";\n"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","this","_a","Object","defineProperty","value","run","read","isSubclassOf","mixins","throttle","wrap","func","_try","AsyncGeneratorFunction","AsyncFunction","check_iterable_1","number_1","fn","args","apply","err","undefined","returns","isAsyncGenerator","input","result","done","next","Promise","resolve","isGenerator","then","catch","callbacks","defer","cb","push","call","gen","error","i","length","async","wrapper","wrapped","getOwnPropertyDescriptor","configurable","enumerable","writable","toString","bind","constructor","throttleCaches","Map","handler","options","key","for","duration","handleCall","cache","Date","now","expires","get","set","mergeIfNotExists","proto","source","mergeSuper","props","Reflect","ownKeys","prop","setProp","hasOwnProperty","mergeHierarchy","ctor","mixin","prototype","_super","getPrototypeOf","name","desc","base","obj","TypeError","ctor1","ctor2","eventMap","Symbol","asyncIterator","iterable","ended","queue","consumers","reject","shift","handleMessage","data","handleClose","consumer","handleError","forEach","item","handleBrowserErrorEvent","ev","ErrorEvent","Error","message","cause","msgDesc","close","errDesc","closeDesc","cleanup","event","es","eventName","msgListener","addEventListener","removeEventListener","_b","_close","send","ws","onmessage","onerror","onclose","target","msgEvent","errEvent","closeEvent","MessageEvent","closeListener","dataEvent","endEvent","on","once","off","isNode","process","versions","node","workerIdCounter","sequence","Number","MAX_SAFE_INTEGER","workerPool","workerConsumerQueue","script","msg","type","baseUrl","Deno","cwd","location","href","buffer","resolver","iterator","workerId","poolRecord","release","terminate","timeout","setTimeout","keepAlive","emit","handleExit","filter","record","path","fileURLToPath","_filename","_dirname","entry","__filename","__dirname","includes","basename","join","dirname","adapter","worker","ok","find","busy","fork","isPrior14","parseInt","version","slice","stdio","serialization","pid","removeAllListeners","kill","Worker","threadId","postMessage","url","split","_url","webWorkerEntry","res","fetch","blob","headers","startsWith","buf","arrayBuffer","Blob","Uint8Array","URL","createObjectURL","onmessageerror","abort","clearTimeout","iterate","EventEmitter","console","jsext","try","random","isBetween","isNumeric","isFloat","isNaN","isFinite","BigInt","min","max","Math","floor","step","loop","id","hasOwn","pick","keys","reduce","isValid","as","omit","patch","hasOwnMethod","method","sources","keptKeys","_type","primitiveMap","String","Boolean","valueOf","is","NaN","until","sleep","after","ms","race","_","allSettled","status","reason","test","globalThis","setImmediate","_typeof","isIteratorLike","isIterableIterator","isAsyncIterableIterator","hasGeneratorSpecials","isIterable","isAsyncIterable","couldBeClass","getOwnPropertyNames","str","hasThis","_slicedToArray","arr","_arrayWithHoles","Array","isArray","_iterableToArrayLimit","_i","_s","_e","_x","_r","_arr","_n","_d","_unsupportedIterableToArray","o","minLen","_arrayLikeToArray","n","from","_nonIterableRest","len","arr2","isObjectWith","isObj","_len","arguments","_key","every","_ref","_ref2","p","t","isArrayLike","strict","indexes","isNonEnumLength","map","hasIterator","isCollectionLike","excludeWeakOnes","WeakMap","WeakSet","isTypedArrayLike","isBufferLike","isDictLike","RegExp","isObjectIdLike","isEmptyDict","JSON","stringify","e","isPromiseLike","isErrorLike","encoder","TextEncoder","count","option","Buffer","byteLength","encode","times","size","isGetter","isGetterAndSetter","sign","diff","origin","deep","_keys","_result","truePattern","falsePattern","nullPattern","nanPattern","infinityPattern","regexPattern","numberInterval","MIN_SAFE_INTEGER","ensureArray","ensureType","re","match","num","flatDeep","carrier","field","depth","maxDepth","flatArray","isArr","isDict","isContent","flatObject","getGlobal","_global","self","global","window","BaseEmptyPrimitives","EmptyPrimitives","emptyPrimitives","v","values","Set","k","isEmpty","isInteger","isOwnKey","isOwnMethod","isSubClassOf","isVoid","keysOf","doOmit","omitEmptyObjects","omitEmptyStrings","trim","omitVoid","doPatch","ignoreEmptyStrings","isChildNode","assign","rand","randStr","chars","onlyNumbers","ele","sort","compare","a","b","shouldUseNativeSort","parseFloat","v8","navigator","userAgent","index","getOwnPropertySymbols","checkNumberArgument","RangeError","splitArrayLike","total","j","sep","SyntaxError","splitNumber","offset","isBuffer","splitBuffer","indexOf","list","splitObject","keyChunks","chunk","create","timestamp","date","dateTime","parseDateRawArgs","Y","M","D","H","m","s","setFullYear","setMonth","setDate","setHours","setMinutes","setSeconds","setMilliseconds","getFullYear","getMonth","padStart","getDate","log","typeAs","typeOf","useThrottle","resource","interval","backgroundUpdate","gcTimer","gcInterval","tasks","jobs","setInterval","lastActive","delete","unref","task","createThrottleTask","daemon","handle","job","add","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","default"],"sourceRoot":""}